Started by user [8mha:////4C8zTO/v0UlG+vQ5Fjm5jTf9kR93yL5yxTMP2X04T9v8AAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Running in Durability level: MAX_SURVIVABILITY
[8mha:////4DOlrZhma2TKYqx8mtRBwGXVE8Xt4z3OJyo/zi+ICDdzAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4B4K7nOhvaaLmbeE3w0NEhE1GAALwLDjakw9plXgkY6XAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] node
Still waiting to schedule task
Waiting for next available executor on â€˜[8mha:////4GiJsi7Mya/6bg7lYfwMQTzNVpzT54TxwGFsrEp/EcRtAAAAoh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyeEgZx/eT83ILSktQi/eTKAkMD3aLUXKBKfQCdwg2/zAAAAA==[0mcyp10-remoteâ€™
Pausing
Resuming
Running on [8mha:////4GiJsi7Mya/6bg7lYfwMQTzNVpzT54TxwGFsrEp/EcRtAAAAoh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyeEgZx/eT83ILSktQi/eTKAkMD3aLUXKBKfQCdwg2/zAAAAA==[0mcyp10-remote in /root/.jenkins/workspace/test-nic@2
[8mha:////4NUxBMzN6CtFAbQ4pdo7pH8ZuwVHigLf0SdP3FcjQTwyAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4OCB1+Up79PmV3LnMeomKr9r+JFCKkFjAfTpr2UorbLOAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gQkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jc09154wAAAAA==[0m[Pipeline] stage
[8mha:////4N6KQN35K8CT/Pcr9a+R4oOEu4uEh3phvpB1t67zd2hmAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0ggUxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jek7ggRwAAAAA==[0m[Pipeline] { (set args)
[8mha:////4KpTcsSlLG7yEvo1vGv2QG1z86HMYkLASFXVuKwhd7SZAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaWGsbAmNJ0AWEZb8zwLrbuWJvJp3kLiJlZNMMm+a93rDOic4UbLcG+wdZu14DKOti0+U+lugiXu6ck2YKRguzSSpM+cFJRUDS1gDKwEbgzpQdmgLbIVXD9UGhba9lFS/o4DGdQM8gYlqLiqVL8wJdvexy4Q/z18BzLEA29ce4gfg7KmOvAAAAA==[0m[Pipeline] sh
+ python /root/.jenkins/workspace/test-nic/npxtester/conf/change_args.py '{"dpdk_dir":"/opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/","vm_image_conf":{"image1":"ubuntu20.04.img","image2":"ubuntu20.04_2.img","image3":"rhel84rt.img","image4":"rhel84rt2.img","image_dir":"/home/image"},"sut_conf":{"host":"10.112.97.157","connect_switch_sut_pf":"ens787f0","pf1":"ens787f0","pf1_ipv6":"fe80::b696:91ff:fe9c:f760","os":"rehat"},"dhcp":{"ipv4":"192.168.10.10","ipv6":"fe80::b696:91ff:fe9c:f762"}}'
[8mha:////4ChDQWb8Lvr0RoXQ1L8EY4p37+Po0Q8Mb8bchs8JeqDJAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbGRNjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI6xADvU7j9Dg2gqvAAAAA==[0m[Pipeline] }
[8mha:////4J0p4zt/+On27QitkvU5TFB8M2wwWYWaAHIuYiUer4fkAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQRbWRhjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI6xADvU7j9J+wGOvAAAAA==[0m[Pipeline] // stage
[8mha:////4Ea3/4ZYuTM98yMZ9UntzMXOyQ2ItSOm6XAUUO4QqkITAAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQDEh2iorXc8AITG+PEugv2haTiRXyNPxCIRMVWOyut5vmCMic4UPKycdgGzHWQXez91ORAqb1EGmRDZ1kTZopOajdosu44oyZ2MEcUsFCwdFhHygE9w0o15m6qaNBXJ07TtldQBHuDBwg1mdkk/sKYYH3tbSb8ef4KYOwYxI6h2G4+x/INtuQqUcEAAAA=[0m[Pipeline] stage
[8mha:////4IJd0qxfNFkcgwUT9OFke9rxaJjwCH2G9mHJ+5FMmbLfAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+DOrAycoiUzoiJNerCCUITQtLo/zZJSSdOxNW4Ay2VmPBg2Zas93pDGQOcKBjuNHYWY2t570czJ54pdDdPmTu68pYwkte80bkhpc9rbShpWFUw2AjYamw9RYsmwU44+ZCVl2iqSwrzdhTArBrgCYWYyUmG9C1TgP19VJHwx/kLgKlPwOrDYvXyLD8BobDcwgAAAA==[0m[Pipeline] { (run silver nic case)
[8mha:////4KACpsxoNqug+yeGIE2K55MD+IyPDLfbYOrean7h1Zl/AAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggysXWsbBkaT4AJIoT5nwCRVJ7Iq3kH0cxYucXOvm3e8wXrGOBIQTOrcDAYO8O8m3RZLFMYro4ys3RhHWEkp5hQWVCvTgsKSgqWVDWsOGwUdo6iQZ1gy628y8ZJ1M05hfIdONSmH+EBFS/mJEP6whxgd5v6SPjz/BXA7BPUbfupvX8DpQJrNb4AAAA=[0m[Pipeline] sh
+ pytest /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_nics.py -m nicall -s
============================= test session starts ==============================
platform linux -- Python 3.6.8, pytest-6.2.4, py-1.11.0, pluggy-0.13.1
rootdir: /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics, configfile: pytest.ini
plugins: metadata-1.11.0, html-3.1.1
collected 3 items

../test-nic/npxtester/Tests/testNics/test_nics.py 2021-11-24 15:01:54 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_silver_Networking_ConnectivityEnableDisable
2021-11-24 15:01:54 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 15:01:54 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 15:01:54 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:01:54 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:01:54 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:01:54 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:01:54 - test_nics.py - [line:34] - root - INFO - run silver_Networking_ConnectivityEnableDisable
2021-11-24 15:01:58 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 14:47:53 2021 from 10.238.10.192
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.046 ms
2021-11-24 15:01:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 15:02:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 15:02:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
2021-11-24 15:02:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4105ms
rtt min/avg/max/mdev = 0.007/0.016/0.046/0.015 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:02:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 15:02:18 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 15:02:25 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.038 ms
2021-11-24 15:02:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.014 ms
2021-11-24 15:02:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 15:02:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 15:02:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.015 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4084ms
rtt min/avg/max/mdev = 0.008/0.016/0.038/0.011 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:02:37 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 15:02:45 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 15:02:52 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.041 ms
2021-11-24 15:02:53 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 15:02:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 15:02:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.012 ms
2021-11-24 15:02:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.015 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4125ms
rtt min/avg/max/mdev = 0.008/0.017/0.041/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:03:04 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 15:03:12 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 15:03:19 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.036 ms
2021-11-24 15:03:20 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.012 ms
2021-11-24 15:03:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.012 ms
2021-11-24 15:03:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.019 ms
2021-11-24 15:03:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4102ms
rtt min/avg/max/mdev = 0.008/0.017/0.036/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:03:31 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 15:03:39 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 15:03:46 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.034 ms
2021-11-24 15:03:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 15:03:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 15:03:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 15:03:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4080ms
rtt min/avg/max/mdev = 0.007/0.013/0.034/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:03:58 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 15:04:06 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 15:04:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.027 ms
2021-11-24 15:04:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 15:04:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.010 ms
2021-11-24 15:04:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.010 ms
2021-11-24 15:04:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4121ms
rtt min/avg/max/mdev = 0.007/0.013/0.027/0.007 ms
[root@WW30CYP10 ~]# 
.2021-11-24 15:04:20 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 15:04:20 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown
2021-11-24 15:04:20 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_silver_ConnectivityReboot
2021-11-24 15:04:20 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 15:04:20 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:04:20 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:04:20 - test_nics.py - [line:56] - root - INFO - run silver_ConnectivityReboot
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:04:20 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:04:20 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:04:24 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:04:33 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.039 ms
2021-11-24 15:04:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.012 ms
2021-11-24 15:04:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.013 ms
2021-11-24 15:04:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 15:04:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.008/0.016/0.039/0.011 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:04:35 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.834 ms
2021-11-24 15:04:36 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.048 ms
2021-11-24 15:04:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.035 ms
2021-11-24 15:04:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.027 ms
2021-11-24 15:04:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.025 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.025/0.193/0.834/0.320 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:04:42 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:04:42 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:04:42 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:04:42 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:04:46 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:04:33 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.038 ms
2021-11-24 15:04:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 15:04:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 15:04:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 15:04:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.014 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4107ms
rtt min/avg/max/mdev = 0.008/0.015/0.038/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:04:57 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.079 ms
2021-11-24 15:04:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.041 ms
2021-11-24 15:04:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.030 ms
2021-11-24 15:05:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.038 ms
2021-11-24 15:05:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.028 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4101ms
rtt min/avg/max/mdev = 0.028/0.043/0.079/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:05:04 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:05:05 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:05:05 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:05:05 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:05:09 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:04:55 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.038 ms
2021-11-24 15:05:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.014 ms
2021-11-24 15:05:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 15:05:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.011 ms
2021-11-24 15:05:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.010 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4120ms
rtt min/avg/max/mdev = 0.010/0.022/0.038/0.013 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:05:20 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.075 ms
2021-11-24 15:05:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.033 ms
2021-11-24 15:05:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 15:05:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.030 ms
2021-11-24 15:05:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.028 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4116ms
rtt min/avg/max/mdev = 0.028/0.040/0.075/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:05:27 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:05:27 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:05:27 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:05:27 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:05:31 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:05:18 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.030 ms
2021-11-24 15:05:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.012 ms
2021-11-24 15:05:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.011 ms
2021-11-24 15:05:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
2021-11-24 15:05:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4134ms
rtt min/avg/max/mdev = 0.008/0.014/0.030/0.008 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:05:42 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.062 ms
2021-11-24 15:05:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.043 ms
2021-11-24 15:05:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.034 ms
2021-11-24 15:05:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.036 ms
2021-11-24 15:05:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.032 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4129ms
rtt min/avg/max/mdev = 0.032/0.041/0.062/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:05:49 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:05:49 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:05:49 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:05:49 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:05:53 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:05:40 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.037 ms
2021-11-24 15:05:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.018 ms
2021-11-24 15:05:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 15:05:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.014 ms
2021-11-24 15:05:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4081ms
rtt min/avg/max/mdev = 0.007/0.017/0.037/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:06:04 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.068 ms
2021-11-24 15:06:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.044 ms
2021-11-24 15:06:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.040 ms
2021-11-24 15:06:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.038 ms
2021-11-24 15:06:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.034 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4075ms
rtt min/avg/max/mdev = 0.034/0.044/0.068/0.014 ms
[root@WW30CYP10 ~]# 
.2021-11-24 15:06:11 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 15:06:11 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown
2021-11-24 15:06:11 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_gold_PI_Networking_SRIOV_CheckDevice
2021-11-24 15:06:11 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 15:06:11 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 15:06:11 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:06:11 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:06:11 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:06:11 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:06:11 - test_nics.py - [line:74] - root - INFO - run gold_PI_Networking_SRIOV_CheckDevice
2021-11-24 15:06:14 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:06:14 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:06:22 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v0 192.168.10.11
2021-11-24 15:06:23 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:06:31 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v1 192.168.10.12
2021-11-24 15:06:31 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:06:39 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v2 192.168.10.13
2021-11-24 15:06:39 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:06:47 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v3 192.168.10.14
2021-11-24 15:06:47 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:06:55 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 15:06:59 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.030 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.016 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.010 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4075ms
rtt min/avg/max/mdev = 0.008/0.014/0.030/0.009 ms

2021-11-24 15:07:07 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v0 fe80::b696:91ff:fe9c:f762
2021-11-24 15:07:21 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v0: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4109ms


2021-11-24 15:07:29 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 15:07:33 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.043 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.010 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4098ms
rtt min/avg/max/mdev = 0.008/0.016/0.043/0.013 ms

2021-11-24 15:07:41 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v1 fe80::b696:91ff:fe9c:f762
2021-11-24 15:07:55 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v1: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4109ms


2021-11-24 15:08:03 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 15:08:07 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.033 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.015 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4094ms
rtt min/avg/max/mdev = 0.007/0.015/0.033/0.009 ms

2021-11-24 15:08:15 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v2 fe80::b696:91ff:fe9c:f762
2021-11-24 15:08:30 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v2: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4109ms


2021-11-24 15:08:38 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 15:08:42 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.045 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.012 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4093ms
rtt min/avg/max/mdev = 0.008/0.016/0.045/0.015 ms

2021-11-24 15:08:50 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v3 fe80::b696:91ff:fe9c:f762
2021-11-24 15:09:04 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v3: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4109ms


.2021-11-24 15:09:09 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 15:09:09 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown


======================== 3 passed in 435.36s (0:07:15) =========================
[8mha:////4KMKnj+jwomtBZRlOM1zDNsT7NVP2UylJUBAmwQdpqOFAAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggyGUvHypah8QSYIEKY/wkQSeWJvJp3EM2MlVvs7NvmPV+wjgGOFDSzCgeDsTPMu0mXxTKF4eooM0sX1hFGcooJlQX16rSgoKRgSVXDisNGYecoGtQJttzKu2ycRN2cUyjfgUNt+hEeUPFiTjKkL8wBdrepj4Q/z18BzN4nqNv9p9o3geV5574AAAA=[0m[Pipeline] }
[8mha:////4PHbOgS4fTQzlO31aLQygq6Gmyy7LbpReNAbbgHuNOsPAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOICEh2iSmu54QUmNsaJdWdsh6TiRXyNPxCIRMUWq51t5vmCZYpw5GixNdQ5So3D4Hs7LRw4dhfPA7Z8xoYpsTcozSBZm3pGydnAnKKEhYCVocZzcmQzrEWr7qryimx1ynH6DgJKp2/wgEJM5qxi/sIYYXPtdWL6ef4KYAwhQ7nbf2r7Bq/le42+AAAA[0m[Pipeline] // stage
[8mha:////4MZyk33+V/AiT4fn8n6G3pw2AKptiha+GL2FVGy8vSODAAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjJKgQFa3lhheY2Bgn1l2wLyQVL+Jr/IFAJCq22llpNc8XlDnBgZKXjcM2YK6D7GLvpyYHSu0l0iAbOsuaMFN0UrtBk3XHGTWxgzmigIWCpcM6Ug7oGVaqMXdTRYO+OnGatr2CItgbPECoycwm8RfGBOtrbzPhz/NXAGPHILYMxWb3OZZvBXXnAcEAAAA=[0m[Pipeline] stage
[8mha:////4IbAYeEfzIYrbjXur3hhLHFS6T3zmMsYQQAYadAUrpZ/AAAApx+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohUDLAgpq5RFk4QmhDSRv+Xn5R24kRcjTvQUokJD5ZtyXqvNxSR4UTsRGOx9RhrL7rQuymJgbi9BhpEQxdRE0YKVig7KDK2WqqiZGFRlsNKwtpiHSh6dAk2stEPXQaNrjwnnrajhNybOzwhkxM5aU7fMjJsb72JhD/OXwCMXYJ8t5/tMD+LD/s94rDCAAAA[0m[Pipeline] { (run gold nic sriov stress vm)
[8mha:////4FPk2mTBzwof/oyzK3/Y2W4GOSwpNdCdlxh/EpNq5ACcAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiGigQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGPIUG53n9qHN27Iu42+AAAA[0m[Pipeline] sh
+ pytest /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py -m nicall -s
============================= test session starts ==============================
platform linux -- Python 3.6.8, pytest-6.2.4, py-1.11.0, pluggy-0.13.1
rootdir: /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics, configfile: pytest.ini
plugins: metadata-1.11.0, html-3.1.1
collected 3 items / 1 deselected / 2 selected

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py 2021-11-24 15:09:10 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[ubuntu20.04.img-ubuntu20.04_2.img]
2021-11-24 15:09:10 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 15:09:10 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 15:09:10 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:09:10 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:09:10 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:09:10 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:09:10 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


2021-11-24 15:09:13 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:09:14 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 15:09:19 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 15:09:19 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 15:09:19 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 15:09:24 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 15:06:24 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:09:27 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:09:30 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:09:30 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:09:35 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:09:38 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:09:38 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:09:43 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:09:46 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:09:46 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:09:51 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:09:54 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:09:55 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:10:00 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:10:03 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:10:03 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:10:08 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:10:08 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:10:11 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:10:11 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:10:16 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:10:19 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:10:20 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:10:25 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:10:29 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole
2021-11-24 15:10:30 - sshInstance.py - [line:69] - root - INFO - 
** (process:11742): [1;33mWARNING[0m **: [34m15:10:42.174[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:10:33 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:10:36 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:10:40 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:11834): [1;33mWARNING[0m **: [34m15:10:52.971[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:10:43 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:10:46 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:10:49 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:10:49 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:10:54 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:11:57 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:11:57 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:12:02 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:12:05 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:12:05 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:12:10 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:12:10 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 15:12:10 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 15:12:14 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.098 ms
2021-11-24 15:12:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.106 ms
2021-11-24 15:12:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.096 ms
2021-11-24 15:12:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.121 ms
2021-11-24 15:12:18 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.084 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4118ms
rtt min/avg/max/mdev = 0.084/0.101/0.121/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:12:26 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:12:34 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:12:44 AM EST
  System load:  0.1                Processes:             135
  Usage of /:   45.9% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 01:15:52 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:12:42 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:12:48 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:12:53 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:12:58 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:13:03 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:13:06 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:13:11 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:13:19 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:13:27 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:13:35 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:13:43 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:13:51 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:13:58 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.114 ms
2021-11-24 15:13:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.110 ms
2021-11-24 15:14:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.073 ms
2021-11-24 15:14:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.073 ms
2021-11-24 15:14:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4130ms
rtt min/avg/max/mdev = 0.068/0.087/0.114/0.022 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:14:10 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 15:14:18 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:14:28 AM EST
  System load:  0.01               Processes:             136
  Usage of /:   45.9% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 01:17:36 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:14:26 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:14:32 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:14:37 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:14:42 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:14:47 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 15:14:50 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:14:55 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:15:03 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 15:15:11 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:15:19 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:15:27 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:15:35 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:15:38 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 15:15:42 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=6.21 ms
2021-11-24 15:15:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.038 ms
2021-11-24 15:15:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.035 ms
2021-11-24 15:15:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.060 ms
2021-11-24 15:15:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.042 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4081ms
rtt min/avg/max/mdev = 0.035/1.276/6.206/2.465 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:15:53 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.028 ms
2021-11-24 15:15:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 15:15:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 15:15:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.011 ms
2021-11-24 15:15:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4077ms
rtt min/avg/max/mdev = 0.008/0.013/0.028/0.007 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:16:00 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:16:04 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.110 ms
2021-11-24 15:16:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.218 ms
2021-11-24 15:16:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.177 ms
2021-11-24 15:16:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.088 ms
2021-11-24 15:16:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.159 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4135ms
rtt min/avg/max/mdev = 0.088/0.150/0.218/0.047 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:16:16 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:16:24 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:16:35 AM EST
  System load:  0.0                Processes:             129
  Usage of /:   45.9% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:12:45 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:16:31 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.165 ms
2021-11-24 15:16:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.038 ms
2021-11-24 15:16:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.033 ms
2021-11-24 15:16:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.033 ms
2021-11-24 15:16:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.032 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4088ms
rtt min/avg/max/mdev = 0.032/0.060/0.165/0.052 ms
root@localhost:~# 
2021-11-24 15:17:14 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:17:17 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:17:21 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.032 ms
2021-11-24 15:17:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.017 ms
2021-11-24 15:17:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.018 ms
2021-11-24 15:17:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.024 ms
2021-11-24 15:17:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.011 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4105ms
rtt min/avg/max/mdev = 0.011/0.020/0.032/0.008 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:17:31 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:17:34 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:17:39 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 15:17:42 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:17:42 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 15:17:47 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 15:17:50 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 15:17:50 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 15:17:55 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 15:17:58 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:17:59 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 15:18:04 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 15:18:07 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 15:18:07 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 15:18:12 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 15:18:12 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 2 time when VF is Assigned VM guest.*************************************************************


2021-11-24 15:18:15 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:18:15 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 15:18:20 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 15:18:20 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 15:18:20 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 15:18:25 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:18:28 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:18:31 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:18:32 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:18:37 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:18:40 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:18:40 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:18:45 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:18:48 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:18:48 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:18:53 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:18:56 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:18:57 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:19:02 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:19:05 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:19:05 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:19:10 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:19:10 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:19:13 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:19:13 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:19:18 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:19:21 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:19:21 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:19:26 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:19:30 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:13084): [1;33mWARNING[0m **: [34m15:19:43.851[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:19:33 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:13084): [1;33mWARNING[0m **: [34m15:19:43.851[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:19:33 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:19:37 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:13144): [1;33mWARNING[0m **: [34m15:19:50.866[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:19:41 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:19:44 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:19:48 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:13210): [1;33mWARNING[0m **: [34m15:20:00.880[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:19:51 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:13210): [1;33mWARNING[0m **: [34m15:20:00.880[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:19:51 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:19:55 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:13272): [1;33mWARNING[0m **: [34m15:20:07.863[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:19:58 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:20:01 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:20:04 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:20:04 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:20:09 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:21:12 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:21:12 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:21:17 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:21:20 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:21:20 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:21:25 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:21:25 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 15:21:25 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 15:21:29 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.117 ms
2021-11-24 15:21:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.129 ms
2021-11-24 15:21:31 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.089 ms
2021-11-24 15:21:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.075 ms
2021-11-24 15:21:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.100 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4098ms
rtt min/avg/max/mdev = 0.075/0.102/0.129/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:21:41 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:21:49 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:22:00 AM EST
  System load:  0.07               Processes:             139
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:16:35 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:21:57 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:22:03 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:22:08 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:22:13 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:22:18 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:22:21 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:22:26 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:22:34 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:22:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:22:50 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:22:58 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:23:06 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:23:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.142 ms
2021-11-24 15:23:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.083 ms
2021-11-24 15:23:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.110 ms
2021-11-24 15:23:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.115 ms
2021-11-24 15:23:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.075 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4112ms
rtt min/avg/max/mdev = 0.075/0.105/0.142/0.024 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:23:25 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 15:23:33 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:23:44 AM EST
  System load:  0.03               Processes:             140
  Usage of /:   45.9% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:14:29 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:23:41 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:23:47 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:23:52 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:23:57 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:24:02 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 15:24:05 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:24:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:24:18 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 15:24:26 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:24:34 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:24:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 6  bytes 2060 (2.0 KB)
        RX errors 0  dropped 2  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:24:50 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:24:53 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 15:24:57 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=4.97 ms
2021-11-24 15:24:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.042 ms
2021-11-24 15:24:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.034 ms
2021-11-24 15:25:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.045 ms
2021-11-24 15:25:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.039 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4061ms
rtt min/avg/max/mdev = 0.034/1.026/4.974/1.974 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:25:08 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=10.1 ms
2021-11-24 15:25:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.054 ms
2021-11-24 15:25:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.032 ms
2021-11-24 15:25:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.038 ms
2021-11-24 15:25:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.028 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4057ms
rtt min/avg/max/mdev = 0.028/2.057/10.134/4.038 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:25:15 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:25:19 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.124 ms
2021-11-24 15:25:20 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.078 ms
2021-11-24 15:25:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.081 ms
2021-11-24 15:25:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.135 ms
2021-11-24 15:25:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.077 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4116ms
rtt min/avg/max/mdev = 0.077/0.099/0.135/0.025 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:25:31 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:25:39 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:25:50 AM EST
  System load:  0.0                Processes:             128
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:22:01 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:25:46 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.144 ms
2021-11-24 15:25:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.039 ms
2021-11-24 15:25:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.033 ms
2021-11-24 15:25:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.037 ms
2021-11-24 15:25:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.030 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4096ms
rtt min/avg/max/mdev = 0.030/0.056/0.144/0.043 ms
root@localhost:~# 
2021-11-24 15:26:29 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:26:32 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:26:36 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.043 ms
2021-11-24 15:26:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.009 ms
2021-11-24 15:26:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 15:26:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.015 ms
2021-11-24 15:26:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4087ms
rtt min/avg/max/mdev = 0.008/0.016/0.043/0.014 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:26:46 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:26:48 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:26:53 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 15:26:56 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:26:57 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 15:27:02 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 15:27:05 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 15:27:05 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 15:27:10 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 15:27:13 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:27:13 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 15:27:18 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 15:27:21 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 15:27:22 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 15:27:27 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 15:27:27 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 3 time when VF is Assigned VM guest.*************************************************************


2021-11-24 15:27:30 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:27:30 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 15:27:35 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 15:27:35 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 15:27:35 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 15:27:40 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:27:43 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:27:46 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:27:46 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:27:51 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:27:54 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:27:54 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:27:59 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:28:02 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:28:02 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:28:07 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:28:10 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:28:11 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:28:16 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:28:19 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:28:20 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:28:25 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:28:25 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:28:28 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:28:28 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:28:33 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:28:36 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:28:36 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:28:41 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:28:45 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:15075): [1;33mWARNING[0m **: [34m15:28:58.457[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:28:48 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:15075): [1;33mWARNING[0m **: [34m15:28:58.457[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:28:48 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:28:52 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:15136): [1;33mWARNING[0m **: [34m15:29:05.483[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:28:55 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:28:58 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:29:02 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:15198): [1;33mWARNING[0m **: [34m15:29:15.508[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:29:05 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:15198): [1;33mWARNING[0m **: [34m15:29:15.508[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:29:05 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:29:09 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:15266): [1;33mWARNING[0m **: [34m15:29:22.502[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:29:12 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:29:15 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:29:18 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:29:18 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:29:23 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:30:26 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:30:26 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:30:31 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:30:34 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:30:34 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:30:39 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:30:39 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 15:30:39 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 15:30:43 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.106 ms
2021-11-24 15:30:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.088 ms
2021-11-24 15:30:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.099 ms
2021-11-24 15:30:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.111 ms
2021-11-24 15:30:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.088 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4087ms
rtt min/avg/max/mdev = 0.088/0.098/0.111/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:30:55 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:31:03 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:31:15 AM EST
  System load:  0.01               Processes:             137
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:25:51 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:31:11 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:31:17 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:31:22 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:31:27 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:31:33 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:31:36 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:31:41 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:31:49 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:31:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:32:05 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:32:13 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 2  bytes 692 (692.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:32:21 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:32:28 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.121 ms
2021-11-24 15:32:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.088 ms
2021-11-24 15:32:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.080 ms
2021-11-24 15:32:31 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.117 ms
2021-11-24 15:32:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.073 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4101ms
rtt min/avg/max/mdev = 0.073/0.095/0.121/0.023 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:32:40 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 15:32:48 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:32:58 AM EST
  System load:  0.0                Processes:             137
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:23:44 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:32:56 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:33:02 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:33:07 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:33:12 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:33:17 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 15:33:20 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:33:25 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:33:33 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 15:33:41 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:33:49 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:33:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:34:05 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:34:08 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 15:34:12 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=3.93 ms
2021-11-24 15:34:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.065 ms
2021-11-24 15:34:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.039 ms
2021-11-24 15:34:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.049 ms
2021-11-24 15:34:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.039 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4115ms
rtt min/avg/max/mdev = 0.039/0.823/3.926/1.551 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:34:23 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=3.87 ms
2021-11-24 15:34:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.040 ms
2021-11-24 15:34:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.033 ms
2021-11-24 15:34:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.104 ms
2021-11-24 15:34:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.039 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4109ms
rtt min/avg/max/mdev = 0.033/0.817/3.871/1.527 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:34:30 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:34:34 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.118 ms
2021-11-24 15:34:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.101 ms
2021-11-24 15:34:36 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.075 ms
2021-11-24 15:34:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.080 ms
2021-11-24 15:34:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.084 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4103ms
rtt min/avg/max/mdev = 0.075/0.091/0.118/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:34:46 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:34:54 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:35:05 AM EST
  System load:  0.0                Processes:             129
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:31:15 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:35:01 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.148 ms
2021-11-24 15:35:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.048 ms
2021-11-24 15:35:03 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.037 ms
2021-11-24 15:35:04 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.035 ms
2021-11-24 15:35:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.034 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.034/0.060/0.148/0.044 ms
root@localhost:~# 
2021-11-24 15:35:44 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:35:47 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:35:51 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.042 ms
2021-11-24 15:35:52 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 15:35:53 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 15:35:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.012 ms
2021-11-24 15:35:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.010 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4076ms
rtt min/avg/max/mdev = 0.009/0.016/0.042/0.013 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:36:01 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:36:03 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:36:08 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 15:36:11 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:36:12 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 15:36:17 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 15:36:20 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 15:36:20 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 15:36:25 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 15:36:28 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:36:28 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 15:36:33 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 15:36:36 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 15:36:36 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 15:36:41 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 15:36:41 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 4 time when VF is Assigned VM guest.*************************************************************


2021-11-24 15:36:44 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:36:45 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 15:36:50 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 15:36:50 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 15:36:50 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 15:36:55 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:36:58 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:37:01 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:37:01 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:37:06 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:37:09 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:37:09 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:37:14 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:37:17 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:37:17 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:37:22 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:37:25 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:37:26 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:37:31 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:37:34 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:37:35 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:37:40 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:37:40 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:37:43 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:37:43 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:37:48 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:37:51 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:37:51 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:37:56 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:38:00 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:16532): [1;33mWARNING[0m **: [34m15:38:13.183[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:03 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:16532): [1;33mWARNING[0m **: [34m15:38:13.183[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:03 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:38:07 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:16592): [1;33mWARNING[0m **: [34m15:38:20.190[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:38:10 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:13 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:38:17 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:16663): [1;33mWARNING[0m **: [34m15:38:30.184[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:20 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:16663): [1;33mWARNING[0m **: [34m15:38:30.184[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:20 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:38:24 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:16723): [1;33mWARNING[0m **: [34m15:38:37.205[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:38:27 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:38:30 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:38:33 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:38:33 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:38:38 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:39:41 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:39:41 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:39:46 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:39:49 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:39:49 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:39:54 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:39:54 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 15:39:54 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 15:39:58 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.172 ms
2021-11-24 15:39:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.088 ms
2021-11-24 15:40:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.097 ms
2021-11-24 15:40:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.075 ms
2021-11-24 15:40:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.077 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4083ms
rtt min/avg/max/mdev = 0.075/0.101/0.172/0.038 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:40:10 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:40:18 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:40:29 AM EST
  System load:  0.14               Processes:             138
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:35:05 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:40:26 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:40:32 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:40:37 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:40:42 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:40:47 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:40:50 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:40:55 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:41:03 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:41:11 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:41:19 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:41:27 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:41:35 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:41:42 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.267 ms
2021-11-24 15:41:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.147 ms
2021-11-24 15:41:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.083 ms
2021-11-24 15:41:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.081 ms
2021-11-24 15:41:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.122 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4101ms
rtt min/avg/max/mdev = 0.081/0.140/0.267/0.068 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:41:54 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 15:42:02 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:42:12 AM EST
  System load:  0.01               Processes:             138
  Usage of /:   46.0% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:32:59 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:42:10 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:42:16 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:42:21 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:42:26 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:42:31 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 15:42:34 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:42:39 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:42:47 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 15:42:55 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:43:03 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:43:11 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1026 (1.0 KB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:43:19 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:43:22 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 15:43:26 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=0.243 ms
2021-11-24 15:43:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.055 ms
2021-11-24 15:43:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.046 ms
2021-11-24 15:43:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.054 ms
2021-11-24 15:43:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.039 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4116ms
rtt min/avg/max/mdev = 0.039/0.087/0.243/0.078 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:43:37 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.145 ms
2021-11-24 15:43:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.051 ms
2021-11-24 15:43:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.041 ms
2021-11-24 15:43:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.038 ms
2021-11-24 15:43:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.037 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.037/0.062/0.145/0.042 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:43:44 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:43:48 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.218 ms
2021-11-24 15:43:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.114 ms
2021-11-24 15:43:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.112 ms
2021-11-24 15:43:51 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.087 ms
2021-11-24 15:43:52 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.091 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4104ms
rtt min/avg/max/mdev = 0.087/0.124/0.218/0.049 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:44:00 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:44:08 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:44:19 AM EST
  System load:  0.08               Processes:             130
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:40:29 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:44:15 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=5.19 ms
2021-11-24 15:44:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.070 ms
2021-11-24 15:44:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.042 ms
2021-11-24 15:44:18 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.044 ms
2021-11-24 15:44:19 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.036 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4081ms
rtt min/avg/max/mdev = 0.036/1.077/5.194/2.058 ms
root@localhost:~# 
2021-11-24 15:44:58 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:45:01 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:45:05 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.047 ms
2021-11-24 15:45:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.023 ms
2021-11-24 15:45:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 15:45:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.010 ms
2021-11-24 15:45:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.028 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4076ms
rtt min/avg/max/mdev = 0.009/0.023/0.047/0.014 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:45:16 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:45:18 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:45:23 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 15:45:26 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:45:26 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 15:45:31 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 15:45:34 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 15:45:34 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 15:45:39 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 15:45:42 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:45:43 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 15:45:48 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 15:45:51 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 15:45:51 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 15:45:56 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 15:45:56 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 5 time when VF is Assigned VM guest.*************************************************************


2021-11-24 15:45:59 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:46:00 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 15:46:05 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 15:46:05 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 15:46:05 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 15:46:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:46:13 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:46:16 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:46:16 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:46:21 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:46:24 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:46:24 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:46:29 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:46:32 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:46:32 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:46:37 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:46:40 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:46:41 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:46:46 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:46:49 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:46:50 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:46:55 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:46:55 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:46:58 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:46:58 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:47:03 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:47:06 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:47:06 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:47:11 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:47:15 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:17974): [1;33mWARNING[0m **: [34m15:47:28.042[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:18 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:17974): [1;33mWARNING[0m **: [34m15:47:28.042[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:18 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:47:22 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:18034): [1;33mWARNING[0m **: [34m15:47:35.034[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:47:25 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:28 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:47:32 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:18098): [1;33mWARNING[0m **: [34m15:47:45.058[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:35 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:18098): [1;33mWARNING[0m **: [34m15:47:45.058[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:35 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:47:39 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:18158): [1;33mWARNING[0m **: [34m15:47:52.050[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:47:42 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:47:45 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:47:48 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:47:48 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:47:53 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:48:56 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:48:56 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:49:01 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:49:04 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:49:04 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:49:09 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:49:09 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 15:49:09 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 15:49:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.137 ms
2021-11-24 15:49:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.096 ms
2021-11-24 15:49:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.108 ms
2021-11-24 15:49:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.092 ms
2021-11-24 15:49:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.084 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4115ms
rtt min/avg/max/mdev = 0.084/0.103/0.137/0.020 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:49:25 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:49:33 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:49:44 AM EST
  System load:  0.01               Processes:             135
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:44:19 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:49:41 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:49:47 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:49:52 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:49:57 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:50:02 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:50:05 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:50:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:50:18 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:50:26 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:50:34 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:50:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 4  bytes 1368 (1.3 KB)
        RX errors 0  dropped 2  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:50:50 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:50:57 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.138 ms
2021-11-24 15:50:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.091 ms
2021-11-24 15:50:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.065 ms
2021-11-24 15:51:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.084 ms
2021-11-24 15:51:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4127ms
rtt min/avg/max/mdev = 0.065/0.091/0.138/0.026 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:51:09 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 15:51:17 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:51:27 AM EST
  System load:  0.0                Processes:             139
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:42:13 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:51:25 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:51:31 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:51:36 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:51:41 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:51:46 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 15:51:49 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:51:54 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:52:02 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 15:52:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 15:52:18 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 15:52:26 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 15:52:34 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:52:37 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 15:52:41 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=0.205 ms
2021-11-24 15:52:42 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.038 ms
2021-11-24 15:52:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.036 ms
2021-11-24 15:52:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.037 ms
2021-11-24 15:52:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.030 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4077ms
rtt min/avg/max/mdev = 0.030/0.069/0.205/0.068 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:52:52 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.134 ms
2021-11-24 15:52:53 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.043 ms
2021-11-24 15:52:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.051 ms
2021-11-24 15:52:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.035 ms
2021-11-24 15:52:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.040 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4073ms
rtt min/avg/max/mdev = 0.035/0.060/0.134/0.038 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:52:59 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:53:03 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.200 ms
2021-11-24 15:53:04 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.099 ms
2021-11-24 15:53:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.108 ms
2021-11-24 15:53:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.156 ms
2021-11-24 15:53:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.109 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4131ms
rtt min/avg/max/mdev = 0.099/0.134/0.200/0.039 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:53:15 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:53:23 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:53:34 AM EST
  System load:  0.0                Processes:             128
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:49:44 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:53:30 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.126 ms
2021-11-24 15:53:31 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.044 ms
2021-11-24 15:53:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.035 ms
2021-11-24 15:53:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.037 ms
2021-11-24 15:53:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.053 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4090ms
rtt min/avg/max/mdev = 0.035/0.059/0.126/0.034 ms
root@localhost:~# 
2021-11-24 15:54:13 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 15:54:16 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 15:54:20 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.045 ms
2021-11-24 15:54:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.012 ms
2021-11-24 15:54:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.010 ms
2021-11-24 15:54:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.028 ms
2021-11-24 15:54:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.017 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4102ms
rtt min/avg/max/mdev = 0.010/0.022/0.045/0.013 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:54:30 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:54:33 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:54:38 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 15:54:41 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:54:41 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 15:54:46 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 15:54:49 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 15:54:49 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 15:54:54 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 15:54:57 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:54:58 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 15:55:03 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 15:55:06 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 15:55:06 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 15:55:11 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
.2021-11-24 15:55:11 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 15:55:14 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 15:55:14 - sshInstance.py - [line:48] - root - INFO - 

2021-11-24 15:55:19 - test_network_sriov_stress.py - [line:249] - root - ERROR - Failed to shut down the VM VMtest2
2021-11-24 15:55:22 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 15:55:22 - sshInstance.py - [line:48] - root - INFO - 

2021-11-24 15:55:27 - test_network_sriov_stress.py - [line:249] - root - ERROR - Failed to shut down the VM VMtest1
2021-11-24 15:55:27 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 15:55:27 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 15:55:27 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[ubuntu20.04.img-ubuntu20.04_2.img]
2021-11-24 15:55:27 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 15:55:27 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 15:55:27 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 15:55:27 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 15:55:27 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 15:55:27 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 15:55:30 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 15:55:31 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 15:55:36 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 15:55:36 - test_network_sriov_stress.py - [line:467] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 15:55:36 - test_network_sriov_stress.py - [line:470] - root - INFO - pf_id_key: 31
2021-11-24 15:55:41 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 15:09:23 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 15:55:44 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 15:55:47 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 15:55:47 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:55:52 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 15:55:55 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 15:55:55 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 15:56:00 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 15:56:03 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 15:56:03 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 15:56:08 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 15:56:11 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 15:56:12 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:56:17 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:56:20 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 15:56:21 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:56:26 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 15:56:26 - test_network_sriov_stress.py - [line:493] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:56:29 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 15:56:29 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 15:56:34 - test_network_sriov_stress.py - [line:504] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 15:56:37 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 15:56:37 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 15:56:42 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 15:56:46 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:19861): [1;33mWARNING[0m **: [34m15:56:59.243[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:56:49 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:19861): [1;33mWARNING[0m **: [34m15:56:59.243[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:56:49 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:56:53 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:19920): [1;33mWARNING[0m **: [34m15:57:06.265[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:56:56 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:56:59 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 15:57:03 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:19986): [1;33mWARNING[0m **: [34m15:57:16.291[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:57:06 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:19986): [1;33mWARNING[0m **: [34m15:57:16.291[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 15:57:06 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 15:57:10 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:20054): [1;33mWARNING[0m **: [34m15:57:23.294[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 15:57:13 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 15:57:16 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 15:57:19 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:57:19 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 15:57:24 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 15:58:27 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:58:27 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 15:58:32 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 15:58:35 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 15:58:35 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 15:58:40 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 15:58:44 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.186 ms
2021-11-24 15:58:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.130 ms
2021-11-24 15:58:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.168 ms
2021-11-24 15:58:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.076 ms
2021-11-24 15:58:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.119 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4132ms
rtt min/avg/max/mdev = 0.076/0.135/0.186/0.041 ms
[root@WW30CYP10 ~]# 
2021-11-24 15:58:56 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 15:59:04 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 02:59:15 AM EST
  System load:  0.03               Processes:             139
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:53:34 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 15:59:12 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 15:59:18 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 15:59:23 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 15:59:28 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 15:59:33 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 15:59:36 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 15:59:41 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 15:59:49 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 15:59:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:00:05 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:00:13 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 2  bytes 692 (692.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:00:21 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:00:28 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.148 ms
2021-11-24 16:00:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.107 ms
2021-11-24 16:00:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.095 ms
2021-11-24 16:00:31 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.102 ms
2021-11-24 16:00:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.077 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4080ms
rtt min/avg/max/mdev = 0.077/0.105/0.148/0.026 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:00:40 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 16:00:48 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:00:58 AM EST
  System load:  0.04               Processes:             135
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:51:28 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:00:56 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 16:01:02 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 16:01:07 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 16:01:12 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 16:01:17 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 16:01:20 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 16:01:25 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 16:01:33 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 16:01:41 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:01:49 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:01:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:02:05 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:02:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.139 ms
2021-11-24 16:02:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.089 ms
2021-11-24 16:02:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.072 ms
2021-11-24 16:02:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.120 ms
2021-11-24 16:02:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.075 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4094ms
rtt min/avg/max/mdev = 0.072/0.099/0.139/0.026 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:02:25 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 16:02:33 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:02:43 AM EST
  System load:  0.0                Processes:             138
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 02:59:15 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:02:41 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 60 192.168.10.11 > ping_sut1.txt &
[1] 1049
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:02:49 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 60 fe80::b696:91ff:fe9c:f760 >ping6_sut1.txt &
[2] 1052
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:02:57 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 60 192.168.10.13 > ping_vm2.txt &
[3] 1054
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:03:05 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 60 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1055
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:03:13 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 60 192.168.10.10 > ping_sut2.txt &
[5] 1056
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:03:21 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 60 fe80::b696:91ff:fe9c:f762 >ping6_sut2.txt &
[6] 1057
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 16:03:24 - test_network_sriov_stress.py - [line:567] - root - INFO - ---ping end -----
2021-11-24 16:03:29 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
.2021-11-24 16:03:32 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 16:03:35 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 16:03:36 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 16:03:41 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 16:03:44 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 16:03:44 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 16:03:49 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 16:03:52 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 16:03:53 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 16:03:58 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 16:04:01 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 16:04:01 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 16:04:06 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 16:04:06 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 16:04:06 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================


================= 2 passed, 1 deselected in 3295.99s (0:54:55) =================
Exception in thread Thread-5:
Traceback (most recent call last):
  File "/usr/lib64/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/usr/lib64/python3.6/threading.py", line 864, in run
    self._target(*self._args, **self._kwargs)
  File "/root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py", line 596, in check_log
    st, code = check_log_rs(dt["filename"], "packet loss", vm1_client)
NameError: name 'vm1_client' is not defined

[8mha:////4LYnTL2kHEK3xk4r0Ko1+Seo0jzleqkNHqW+48vbd8D5AAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiGoSEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDyFBu95/avQHhgNoTvgAAAA==[0m[Pipeline] }
[8mha:////4NMYSizRLQ1dZuwWSEHzgQ6w9lPsBbHRCtMg5H1rEwslAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiCgqEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDyFBu95/avQH+Ao9BvgAAAA==[0m[Pipeline] // stage
[8mha:////4DKXsabp5/afXFSsWLUBDHMQEXD3jgAzV8WEfOF26pEaAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMJBiA5R0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYu06Q77aCbP8BK1nRVL0AAAA=[0m[Pipeline] }
[8mha:////4HmorPDDfMRqsF6zz9/2vCOvXnWMSW4cx9qE6GTxL9MFAAAAoh+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRUCIqWisNLzCJMU6su2BfSCpexNf4AxGRqNhqZ5p5vbFMEUeOTjWWWk+p8qoLvZueGji218CDaviiKqbEwarSDiXX9jRjyWIxL8ux0FhZqgInT06w1o15mCIYcsVZ4uQOGrmv73gi01NZTJQvjBGbW18npl/nbwBj1wny3VaQ7T845dX3vQAAAA==[0m[Pipeline] // node
[8mha:////4BE+fprF9eommgtvg+AAT8POwnI+05QgEWtQ8SEssetUAAAAoh+LCAAAAAAAAP9tjbEOgjAURS8YB1dHP6IkrMbJtWHxCyrUWmjeg/YhTH6Rv+Y/SCRx8k73nOW83timiBNHp1pLnadUe9WH0S1PTRy7W+BJtXxVNVPiYFVlp4obe16xYrFYl+XYaOws1YGTJyfY69Y8TBEMueIicXFHjdw3A57I9FIWE+ULc8ThPjaJ6df5G8Dc94K8LAVZ+QF+r3LHvQAAAA==[0m[Pipeline] End of Pipeline
Finished: SUCCESS
