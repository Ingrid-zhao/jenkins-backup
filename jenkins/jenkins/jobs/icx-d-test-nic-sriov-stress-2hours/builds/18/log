Started by user [8mha:////4C8zTO/v0UlG+vQ5Fjm5jTf9kR93yL5yxTMP2X04T9v8AAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Running in Durability level: MAX_SURVIVABILITY
[8mha:////4DOlrZhma2TKYqx8mtRBwGXVE8Xt4z3OJyo/zi+ICDdzAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4B4K7nOhvaaLmbeE3w0NEhE1GAALwLDjakw9plXgkY6XAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] node
Running on [8mha:////4C8PgMHPegRpCg8+HpIiIHK02uxvuQktJylkqRHkJagNAAAAox+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAzeEgYJ/eT83ILSktQiICOvpCg/Jye1SNfSUh8ABjlyb80AAAA=[0mcontroller-99 in /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours
[8mha:////4NUxBMzN6CtFAbQ4pdo7pH8ZuwVHigLf0SdP3FcjQTwyAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4OCB1+Up79PmV3LnMeomKr9r+JFCKkFjAfTpr2UorbLOAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gQkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jc09154wAAAAA==[0m[Pipeline] stage
[8mha:////4N6KQN35K8CT/Pcr9a+R4oOEu4uEh3phvpB1t67zd2hmAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0ggUxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jek7ggRwAAAAA==[0m[Pipeline] { (rm project dir)
[8mha:////4EWjgIQS1R18e39T6LdOu3ZpSMSXMburmKwxJHd8e163AAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gwExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jcChmMxwAAAAA==[0m[Pipeline] script
[8mha:////4NOJ/YVWDlnnBpjDdLKlLZkF5LrR387vblsx7fWhZkPlAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0BAkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfpX/cvwAAAAA==[0m[Pipeline] {
[8mha:////4MAm0moKTc8Eo2PcB0LgkHNHI7Xtf5Poej2Mf/l8xh/lAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaoyVLaHxBMgiwpL/WWDdrTyRV/MOEjexcpJJ5k3zXm9Y5wQnSpZ7g73DrB2PYbR18YlSfws0cU9XrgkzBcOlmSR15rygpGJgCWtgJWBjUAfKDm2BrfDqodqg0LaXkup3FNC4boAnMFHNRaXyhTnB7j52mfDn+SuAORZg+9pD/AAeoCAqvAAAAA==[0m[Pipeline] sh
+ ls /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester
1.0.0.0001.version
conf
installation
libs
log_analyzer
README.md
testconf
testLibs
Tests
[8mha:////4F3BY6hez6Yn9lSF4dYULOlz4RwK0Fdsp1OYWtj0vxDtAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMKBDglR0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYO0G2F+S7bfcBITL9lL0AAAA=[0m[Pipeline] echo
dir is exists and rm dir
[8mha:////4KL1cTFlC/t8/0LRf71hJwxXIUFLIMviWtcIHXR2W8epAAAAox+LCAAAAAAAAP9tjbEOgjAURS8YB1dHP6KEzcQ4uTYsfkGFWgvNe9g+hMkv8tf8B4kkTt7pnrOc1xvrFHHk6FRrqfOUaq/6MLj5qZFjdw08qpYvqmZKHKyq7FhxY08LViwWy7IcK42NpTpw8uQEW92ahymCIVecJc7uoJH75o4nMj2XxUT5whSxuw1NYvp1/gYw9YJsL8jLsv8AYAPmjb0AAAA=[0m[Pipeline] sh
+ rm -rf /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester
[8mha:////4GzJynz9IX3CLl34e/1JpYOeLz7FDsqMtIihCtFGqNpZAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRVEiIitZKwwtMYowT6y7YF5KKF/E1/kBEJCq22plmXm8sU8SRo1ONpdZTqrzqQu+mpwaO7TXwoBq+qIopcbCqtEPJtT3NWLJYzMtyLDRWlqrAyZMTrHVjHqYIhlxxlji5g0bu6zueyPRUFhPlC2PE5tbXienX+RvA2HWCfLsTZPsPzjQzob0AAAA=[0m[Pipeline] }
[8mha:////4MvApYhNLg1xEFG2iXyHCog7Z9h4MbdAsNSDoK4wJnDgAAAApB+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRoqBAVLRWGl5gEmOcWHfBvpBUvIiv8QciIlGx1c4083pjmSKOHJ1qLLWeUuVVF3o3PTVwbK+BB9XwRVVMiYNVpR1Kru1pxpLFYl6WY6GxslQFTp6cYK0b8zBFMOSKs8TJHTRyX9/xRKanspgoXxgjNre+Tky/zt8Axq4T5NudINt/AO8A7Ay9AAAA[0m[Pipeline] // script
[8mha:////4P1g47DHQeYIMdAQPrqVFJW5XTEYSJkMqP0k+p1upCWxAAAApB+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIREqJBVLRWGl5gEmOcWHfBvpBUvIiv8QciIlGx1c4083pjmSKOHJ1qLLWeUuVVF3o3PTVwbK+BB9XwRVVMiYNVpR1Kru1pxpLFYl6WY6GxslQFTp6cYK0b8zBFMOSKs8TJHTRyX9/xRKanspgoXxgjNre+Tky/zt8Axq4T5NudINt/AGnsy8m9AAAA[0m[Pipeline] }
[8mha:////4Lc6WrLYEiiAC7rTWY8q4RQPGu1FD+hrgClvEqpzcg2sAAAAox+LCAAAAAAAAP9tjTESgjAQRT84FraWHiKMBZVjZZuh8QQRYgxkdjFZhMoTeTXvICMzVv7qv9e81xvrFHHk6FRrqfOUaq/6MLj5qZFjdw08qpYvqmZKHKyq7FhxY08LViwWy7IcK42NpTpw8uQEW92ahymCIVecJc7uoJH75o4nMj2XxUT5whSxuw1NYvp1/gYw9b0g35eCrPwAY5Sibb0AAAA=[0m[Pipeline] // stage
[8mha:////4LPzYIRsJlP9vBl87WR2FbvV5590n9jZkqHCRBijPEs5AAAApx+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjJESDqGgtN7zAxMY4se6CfSGpeBFf4w8EIlGx1c5Kq3m+oMwJDpS8bBy2AXMdZBd7PzU5UGovkQbZ0FnWhJmik9oNmqw7zqiJHcwRBSwULB3WkXJAz7BSjbmbKhr01YnTtO0VFMHe4AFCTWY2ib8wJlhfe5sJf56/Ahg7BrFlKDa7z7F8A6sHc4fBAAAA[0m[Pipeline] stage
[8mha:////4P0yjWfQiEwQxZO7i9obwDXrYwQclNR3i//1CTGbFwBFAAAApx+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohULDAgpq5RFk4QmhDSRv+Xn5R24kRcjTvQUokJD5ZtyXqvNxSR4UTsRGOx9RhrL7rQuymJgbi9BhpEQxdRE0YKVig7KDK2WqqiZGFRlsNKwtpiHSh6dAk2stEPXQaNrjwnnrajhNybOzwhkxM5aU7fMjJsb72JhD/OXwCMXYJ8t5/tMD+LD1+IXOLCAAAA[0m[Pipeline] { (clone)
[8mha:////4I3tKNYAz7At397ZkNOs6SFwEn2bzn3ZBhsoegW1dhRwAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiKpAQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGPIUG53n9qHNxXfVKy+AAAA[0m[Pipeline] sh
+ git clone -b develop https://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@github.com/Jiz1028/applications.validation.network-platform.npxtester.git npxtester
Cloning into 'npxtester'...
[8mha:////4CRWXV91kUhqh2bTVXI+2n5U32cQ89nJ7yub5blKQ29bAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiKoQQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGMIGcrt/lO7N9Jjga++AAAA[0m[Pipeline] }
[8mha:////4I4ZVrOFMvh2sVfxnfT9s6+paGHoH9OzkxEwdR4h+nRDAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOICFDQoFa3lhheYxBgn1l2wHZyKF/E1/oBFJCq2WO1sM683LIOHmr3BTlNvKTQWBzeavDCx76+OE3Z8wYYpsNModZLc6tOMkqOGOUUJCwErTY3jYMlEWItOPVTlFJnqHH3+jgJK297hCYXI5qh8/MLkYXMb28D08/wVwDQMEcr9Ntfu8AERGGHOvgAAAA==[0m[Pipeline] // stage
[8mha:////4J4BpfnRrLE6odVrNZGgZ11wIRy0HYHBalvcHAcD12j/AAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjEB2iorXc8AITG+PEugv2haTiRXyNPxCIRMVWOyut5vmCMic4UPKycdgGzHWQXez91ORAqb1EGmRDZ1kTZopOajdosu44oyZ2MEcUsFCwdFhHygE9w0o15m6qaNBXJ07TtldQBHuDBwg1mdkk/sKYYH3tbSb8ef4KYOwYxI6h2G4+x/INji2eq8EAAAA=[0m[Pipeline] stage
[8mha:////4AgPhGmio4pMNzq5gItmuDxswb3P5dwyIofUIBdMXBTmAAAAph+LCAAAAAAAAP9tjTEOwjAUQ3+DOrAycohUdEVMrFEXThCaEJJG/7dJSjpxIq7GHWipxIQHy7ZkvdcbyhjgRMFwp7GzGFvLez+aOfFMobt5ytzRlbeEkbzmjc4NKX1ea0NJw6qCwUbAVmPrKVo0CXbCyYesvERTXVKYt6MAZtUATyjETE4ypG+ZAuzvo4qEP85fAEx9AlYfFquXZ/kBAsTc3cIAAAA=[0m[Pipeline] { (set args)
[8mha:////4G9dxluK5ut2lxdfo2JVi6OIov1ZH/881VUFzuPzanonAAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggyE0vHypah8QSYIEKY/wkQSeWJvJp3EM2MlVvs7NvmPV+wjgGOFDSzCgeDsTPMu0mXxTKF4eooM0sX1hFGcooJlQX16rSgoKRgSVXDisNGYecoGtQJttzKu2ycRN2cUyjfgUNt+hEeUPFiTjKkL8wBdrepj4Q/z18BzD5B3baf2vs3w5BRkb4AAAA=[0m[Pipeline] sh
+ python /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/conf/change_args.py '{"drive_info":{"drive_version":"1.7.19"},"dpdk_dir":"/opt/APP/utility/DPDK/dpdk-21.11/","vm_image_conf":{"image1":"uvm1.img","image2":"uvm2.img","image3":"rhel84rt.img","image4":"rhel84rt2.img","image_dir":"/home/image"},"sut_conf":{"host":"10.239.115.71","run_time":"600","connect_switch_sut_pf":"enp137s0f0","pf1":"enp137s0f0","os":"UBUNTU"},"pkg_generator":{"host":"10.239.115.16","pf1":"ens801f0"}}'
[8mha:////4FhUQONKPXFSeOjFO92QKbtxv93cUzSuhB7hx3xoWX6KAAAApB+LCAAAAAAAAP9tjbEOwiAURV9rHFwd/QiaNG7GyZWw+AXYIkLJexSodPKL/DX/QbSJk3e4uecu5/mCdQxwpKCZVTgYjJ1h3k26LJYpDFdHmVm6sI4wklNMqCyoV6cFBSUFS6oaVhw2CjtH0aBOsOVW3mXjJOrmnEL5Dhxq04/wgIoXc5IhfWEOsLtNfST8ef4KYPY+Qd3uP9W+Ad3NsHm+AAAA[0m[Pipeline] }
[8mha:////4EpM1Tihe33kOTBucrClpdwMCq1FF6wGwTU/AEOZmYaNAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIikKgQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGMIGcrd/lPbN8JP5Su+AAAA[0m[Pipeline] // stage
[8mha:////4JJk4NQMkVX21N+ktknOqKLQw+FD2VU/fvD8dhBPuambAAAApx+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjIUSDqGgtN7zAxMY4se6CfSGpeBFf4w8EIlGx1c5Kq3m+oMwJDpS8bBy2AXMdZBd7PzU5UGovkQbZ0FnWhJmik9oNmqw7zqiJHcwRBSwULB3WkXJAz7BSjbmbKhr01YnTtO0VFMHe4AFCTWY2ib8wJlhfe5sJf56/Ahg7BrFlKDa7z7F8AzYdm7bBAAAA[0m[Pipeline] stage
[8mha:////4GToWcz1lEtttcc1F67+obVKf97ChyGWoNBgdNb8ln6iAAAAqB+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohUYoABMXWNsnCC0ISQNvq//KS0EyfiatyBlkpMeLBsS9Z7vaGIDCdiJxqLrcdYe9GF3k1JDMTtNdAgGrqImjBSsELZQZGx1VIVJQuLshxWEtYW60DRo0uwkY1+6DJodOU58bQdJeTe3OEJmZzISXP6lpFhe+tNJPxx/gJg7BLku/1sh/lZfAAyQCqkwgAAAA==[0m[Pipeline] { (run nic case)
[8mha:////4M/BBJOrvLliK1a64sS7A0hf4H4seiclg8D1IX9OqKAVAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIi0YCEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDhnK7+9Q+vAGvZp0gvgAAAA==[0m[Pipeline] sh
+ pytest /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics -s -m nicSriov2hours --capture=tee-sys --html=/root/testconfig/testlogs/HtmlReport/nic_sriov2hours_case_report.html --self-contained-html
============================= test session starts ==============================
platform linux -- Python 3.6.8, pytest-6.2.4, py-1.11.0, pluggy-0.13.1
rootdir: /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics, configfile: pytest.ini
plugins: metadata-1.11.0, html-3.1.1
collected 17 items / 16 deselected / 1 selected

npxtester/Tests/testNics/test_network_sriov_stress.py 2022-03-21 13:16:29 - NicTestFixture.py - [line:30] - root - INFO - ============================ Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
2022-03-21 13:16:29 - test_network_sriov_stress.py - [line:28] - root - INFO - SSH SUT and setup configurations in the setup function.
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.2p1)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.71
2022-03-21 13:16:29 - sftp.py - [line:158] - paramiko.transport.sftp - INFO - [chan 1] Opened sftp connection (server version 3)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.16
2022-03-21 13:16:32 - sshInstance.py - [line:46] - root - INFO - modinfo ice | grep ^version:
2022-03-21 13:16:32 - sshInstance.py - [line:50] - root - INFO - version:        1.7.19

2022-03-21 13:16:40 - sshInstance.py - [line:46] - root - INFO - rmmod ice
2022-03-21 13:16:43 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:16:51 - sshInstance.py - [line:46] - root - INFO - modprobe ice
2022-03-21 13:16:55 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:03 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0 up
2022-03-21 13:17:03 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:12 - sshInstance.py - [line:46] - root - INFO - ethtool -i enp137s0f0
2022-03-21 13:17:12 - sshInstance.py - [line:50] - root - INFO - driver: ice
version: 1.7.19
firmware-version: 2.19 0x8000bafe 1.3083.0
expansion-rom-version: 
bus-info: 0000:89:00.0
supports-statistics: yes
supports-test: yes
supports-eeprom-access: yes
supports-register-dump: yes
supports-priv-flags: yes

2022-03-21 13:17:20 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0
2022-03-21 13:17:20 - sshInstance.py - [line:50] - root - INFO - enp137s0f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::200:ff:fe00:3300  prefixlen 64  scopeid 0x20<link>
        ether 00:00:00:00:33:00  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 12  bytes 2036 (2.0 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


2022-03-21 13:17:28 - sshInstance.py - [line:46] - root - INFO - ifconfig ens801f0
2022-03-21 13:17:28 - sshInstance.py - [line:50] - root - INFO - ens801f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::3efd:feff:fed2:73e0  prefixlen 64  scopeid 0x20<link>
        ether 3c:fd:fe:d2:73:e0  txqueuelen 1000  (Ethernet)
        RX packets 9759985854  bytes 14765465651642 (13.4 TiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 413079936  bytes 27353029185 (25.4 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


2022-03-21 13:17:36 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -s | grep enp137s0f0 | awk '{print $1;}'
2022-03-21 13:17:36 - sshInstance.py - [line:50] - root - INFO - 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:111] - root - INFO - pf_id was found: 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:511] - root - INFO - format_pf_id is 0000\:89\:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:514] - root - INFO - pf_id_key: 89
2022-03-21 13:17:47 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:47 - sshInstance.py - [line:96] - root - INFO - Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Mon Mar 21 12:08:54 2022 from 10.239.182.99
root@npx-sut3-ice-d-auto:~# ifconfig enp137s0f0 192.168.10.10
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:17:50 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: enp137s0f0
2022-03-21 13:17:56 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:56 - sshInstance.py - [line:96] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Mon Mar 21 11:51:38 2022 from 10.239.182.99
[root@redhat8 ~]# ifconfig ens801f0 192.168.10.11
[root@redhat8 ~]# 
2022-03-21 13:17:59 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens801f0
2022-03-21 13:18:02 - sshInstance.py - [line:46] - root - INFO - echo 4 > /sys/class/net/enp137s0f0/device/sriov_numvfs
2022-03-21 13:18:02 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:07 - test_network_sriov_stress.py - [line:125] - root - INFO - Successfully Virtualized PF to VFs.
2022-03-21 13:18:10 - sshInstance.py - [line:46] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2022-03-21 13:18:10 - sshInstance.py - [line:50] - root - INFO - 89:01.0
89:01.1
89:01.2
89:01.3

2022-03-21 13:18:15 - test_network_sriov_stress.py - [line:139] - root - INFO - Succssfully Gotten vf_id list:

2022-03-21 13:18:18 - sshInstance.py - [line:46] - root - INFO - modprobe vfio-pci

2022-03-21 13:18:18 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:26 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.0
2022-03-21 13:18:27 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:32 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:35 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.1
2022-03-21 13:18:36 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:537] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:46] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:50] - root - INFO - 0000:89:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889]

2022-03-21 13:18:49 - test_network_sriov_stress.py - [line:549] - root - INFO - Successfully get vf device id: 8086:1889
2022-03-21 13:18:52 - sshInstance.py - [line:46] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2022-03-21 13:18:52 - sshInstance.py - [line:50] - root - INFO - yes

2022-03-21 13:18:57 - test_network_sriov_stress.py - [line:198] - root - INFO - Default network is active? yes

2022-03-21 13:19:01 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:08 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:10 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:13 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest1
2022-03-21 13:19:17 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:17 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:24 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:26 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:26 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:29 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest2
2022-03-21 13:19:32 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:19:32 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:19:37 - test_network_sriov_stress.py - [line:250] - root - ERROR - not found IP of VMtest1
2022-03-21 13:20:40 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:40 - sshInstance.py - [line:50] - root - INFO - 192.168.122.98/24

2022-03-21 13:20:45 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest1 IP: 192.168.122.98/24

2022-03-21 13:20:48 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:48 - sshInstance.py - [line:50] - root - INFO - 192.168.122.17/24

2022-03-21 13:20:53 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest2 IP: 192.168.122.17/24

2022-03-21 13:20:57 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.098 ms
2022-03-21 13:20:58 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.084 ms
2022-03-21 13:20:59 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.087 ms
2022-03-21 13:21:00 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.078 ms
2022-03-21 13:21:01 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.074/0.084/0.098/0.008 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:21:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
The authenticity of host '192.168.122.98 (192.168.122.98)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:21:19 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:19 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.98' (ECDSA) to the list of known hosts.
root@192.168.122.98's password: 
2022-03-21 13:21:28 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:28 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:23:16 AM EDT
  System load:  0.01               Processes:             135
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:58:30 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:21:37 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:37 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:21:43 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:21:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:49 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:21:54 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:22:00 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:00 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2022-03-21 13:22:03 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:22:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:09 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:22:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:18 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2022-03-21 13:22:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:27 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:22:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:36 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:22:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:45 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:22:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:54 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.98 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:01 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.17
PING 192.168.122.17 (192.168.122.17) 56(84) bytes of data.
64 bytes from 192.168.122.17: icmp_seq=1 ttl=64 time=0.097 ms
2022-03-21 13:23:02 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=2 ttl=64 time=0.079 ms
2022-03-21 13:23:03 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=3 ttl=64 time=0.079 ms
2022-03-21 13:23:04 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=4 ttl=64 time=0.067 ms
2022-03-21 13:23:05 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.17 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.067/0.078/0.097/0.010 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:05 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.17
The authenticity of host '192.168.122.17 (192.168.122.17)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:23:23 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:23 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.17' (ECDSA) to the list of known hosts.
root@192.168.122.17's password: 
2022-03-21 13:23:32 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:32 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:25:20 AM EDT
  System load:  0.0                Processes:             138
  Usage of /:   37.4% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.17
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:56:13 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:23:41 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:41 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:23:47 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:23:53 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:53 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:23:58 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:24:04 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:04 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2022-03-21 13:24:07 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:24:13 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:13 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:24:22 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:22 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2022-03-21 13:24:31 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:31 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:24:40 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:40 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:24:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:49 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:24:58 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:58 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.17 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:05 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.103 ms
2022-03-21 13:25:06 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.075 ms
2022-03-21 13:25:07 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.128 ms
2022-03-21 13:25:08 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.119 ms
2022-03-21 13:25:09 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.075/0.100/0.128/0.021 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
root@192.168.122.98's password: 
2022-03-21 13:25:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:27 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:27:15 AM EDT
  System load:  0.0                Processes:             131
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Mon Mar 21 01:23:16 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:25:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:36 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.10 > ping_sut1.txt &
[1] 1085
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:45 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 >ping6_sut1.txt &
[2] 1088
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:54 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.13 > ping_vm2.txt &
[3] 1090
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:03 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:03 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1091
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:12 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:12 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.11 > ping_sut2.txt &
[5] 1093
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:21 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:21 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 >ping6_sut2.txt &
[6] 1094
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:24 - test_network_sriov_stress.py - [line:613] - root - INFO - ---ping end -----
2022-03-21 13:36:30 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:30 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut1.txt
--- 192.168.10.10 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599024ms
rtt min/avg/max/mdev = 0.017/0.026/0.464/0.019 ms
[1]   Done                    nohup ping -w 600 192.168.10.10 > ping_sut1.txt
[2]   Done                    nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 > ping6_sut1.txt
[3]   Done                    nohup ping -w 600 192.168.10.13 > ping_vm2.txt
[4]   Done                    nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab > ping6_vm2.txt
[5]-  Done                    nohup ping -w 600 192.168.10.11 > ping_sut2.txt
[6]+  Done                    nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 > ping6_sut2.txt
root@localhost:~# 
2022-03-21 13:36:39 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:39 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut1.txt
--- fe80::200:ff:fe00:3300 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599040ms
rtt min/avg/max/mdev = 0.018/0.024/0.146/0.009 ms
root@localhost:~# 
2022-03-21 13:36:48 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:48 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_vm2.txt
--- 192.168.10.13 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599022ms
rtt min/avg/max/mdev = 0.022/0.030/0.124/0.008 ms
root@localhost:~# 
2022-03-21 13:36:57 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:57 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_vm2.txt
--- fe80::1034:56ff:fe78:90ab ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599035ms
rtt min/avg/max/mdev = 0.027/0.040/0.412/0.044 ms
root@localhost:~# 
2022-03-21 13:37:07 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:07 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut2.txt
--- 192.168.10.11 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599017ms
rtt min/avg/max/mdev = 0.027/0.036/0.105/0.005 ms
root@localhost:~# 
2022-03-21 13:37:16 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:16 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut2.txt
--- fe80::3efd:feff:fed2:73e0 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599030ms
rtt min/avg/max/mdev = 0.027/0.036/0.120/0.006 ms
root@localhost:~# 
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:663] - root - INFO - check ---end---
F2022-03-21 13:37:25 - sshInstance.py - [line:46] - root - INFO - virsh destroy VMtest2
2022-03-21 13:37:25 - NicTestFixture.py - [line:34] - root - INFO - ============================ end of run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
E                 [100%]

==================================== ERRORS ====================================
_ ERROR at call of Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] _
self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f61231456a0>
vm1_image = 'uvm2.img', vm2_image = 'uvm1.img'

    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.nicAll
    @pytest.mark.nicStress
    @pytest.mark.nicSriovStress
    @pytest.mark.nicSriov2hours
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest(self, vm1_image, vm2_image):
        pf_id, status = self.get_pf_id(self.pf_name)
        # transfer pf_id to 0000\:00\:00.0 format
    
        if not pf_id:
            assert 200 == status
        else:
            pf_id_format = pf_id.replace(":", "\\:", 2)
            logging.info("format_pf_id is {}".format(pf_id_format))
            # get the number key of pf_id
            pf_id_key = pf_id.split(":")[1]
            logging.info("pf_id_key: {}".format(pf_id_key))
            # assign IP to PF in SUT and sut2
            pf_ip = "192.168.10.10"
            sut2_ip = "192.168.10.11"
            assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
            assert 200 == self.assign_ip_ehternet(self.session2, sut2_ip, self.sut2_info["pf1"])
            # virtulize the pf to vfs
            assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
            # get vf ids
            vf_id_list, status = self.get_vf_ids(pf_id_key)
            vf_id_list = [i.strip() for i in vf_id_list]
    
            if status == 200:
                # modprobe vfio-pci
                assert 200 == self.modprobe("vfio-pci")
                # bind vf with vfio-pci
                host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                assert 200 == status
            else:
                assert 200 == status
    
            # get vF device id
            cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
            logging.info(cmd)
            vf_device_id = ""
            vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
            vf_device_id_rs = vf_device_id_rs.strip()
            if vf_device_id_rs:
                st = False
                vf_device_id = None
                for one in vf_device_id_rs.split(" "):
                    one = " " + one + " "
                    if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":") > -1:
                        vf_device_id = one.replace("[", "").replace("]", "").strip()
                if not vf_device_id: assert 200 == 400, "vf_device_id is not found"
                logging.info("Successfully get vf device id: {}".format(vf_device_id))
                assert 200 == 200
            else:
                logging.error("Fail to get vf device id.")
                assert 200 == 400
            # set network
            status = self.default_network_isActive(self.defult_network)
            if status == "no":
                assert 200 == self.start_default_network(self.defult_network)
    
            # start VMs
            assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
            assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
            # get VM ssh IP
            vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
            vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
    
            # ssh VM1 to set VF
            # ssh VM1 to set VF
            vm1_vf_ip = "192.168.10.12"
            vm2_vf_ip = "192.168.10.13"
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm1_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            vm1_vf_name, vm1_ipv6, status = self.ssh_vm_set_VF(vm1_ip, vf_device_id, vm1_vf_ip, "1234567890ac")
            self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
    
            assert 200 == status, "vm1 vf related settings failed"
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm2_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            vm2_vf_name, vm2_ipv6, status = self.ssh_vm_set_VF(vm2_ip, vf_device_id, vm2_vf_ip, "1234567890ab")
            self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
            assert 200 == status, "vm2 vf related settings failed"
            ping_time = self.sut_info["run_time"]
    
            def vm1_ping_other():
                condition.acquire()
                #from vm1 ping sut1 ipv4 and sut1 ipv6
                cmd_sut_ipv4 = "nohup ping -w {} {} > ping_sut1.txt &\n\n".format(ping_time, pf_ip)
                cmd_sut_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_sut1.txt &\n\n".format(vm1_vf_name, ping_time, self.sut1_pf1_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut ipv6 cmd is ERROR"
                #from vm1 ping vm2 ipv4 and vm2 ipv6
                cmd_vm_ipv4 = "nohup ping -w {} {} > ping_vm2.txt &\n\n".format(ping_time, vm2_vf_ip)
                cmd_vm_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_vm2.txt &\n\n".format(vm1_vf_name, ping_time, vm2_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_vm_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping vm2 ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_vm_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping vm2 ipv6 cmd is ERROR"
                #from vm1 ping sut2 ipv4 and sut2 ipv6
                cmd_sut2_ipv4 = "nohup ping -w {} {} > ping_sut2.txt &\n\n".format(ping_time, sut2_ip)
                cmd_sut2_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_sut2.txt &\n\n".format(vm1_vf_name, ping_time, self.sut2_pf1_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut2_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut2 ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut2_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut2 ipv6 cmd is ERROR"
                condition.notify_all()
                logging.info("---ping end -----")
                condition.release()
    
    
            def check_log_rs(filename, check_rs):
                filepath = os.path.join("/root/", filename)
                content, stderr = self.ssh_sut.run_ssh_cmd(self.session, "tail -n 3 {}\n".format(filepath))
                if content.find(check_rs) > -1:
                    if content.find("0% packet loss") > -1:
                        return True, 200
                    else:
                        return True, 400
                else:
                    return False, None
    
            def check_log():
                condition.acquire()
                condition.wait()
                timeout =  300
                time.sleep(int(ping_time))
                filelist = [
                    {"filename": "ping_sut1.txt", "err_message": "ping sut1 pf ipv4 is error", "rs": 400, "st": False},
                    {"filename": "ping6_sut1.txt", "err_message": "ping sut1 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping_vm2.txt", "err_message": "ping vm2 vf ipv4 is error", "rs": 400, "st": False},
                    {"filename": "ping6_vm2.txt", "err_message": "ping vm2 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping_sut2.txt", "err_message": "ping sut2 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping6_sut2.txt", "err_message": "ping sut2 pf ipv6 is error", "rs": 400, "st": False},
                ]
                tm = 0
                while True:
                    for dt in filelist:
                        st, code = check_log_rs(dt["filename"], "packet loss")
                        if st:
                            dt["st"] = st
                            dt["rs"] = code
                    all_st = True
                    for dt in filelist:
                        if not dt["st"]:
                            all_st = False
                    if all_st:
                        break
    
                    time.sleep(2)
                    tm = tm + 2
                    if tm > timeout:
                        break
    
                for dt in filelist:
                    assert 200 == dt["rs"], dt["err_message"]
                    logging.info("Successfully {}".format(dt["filename"].replace(".txt", "").replace("_", " ")))
                logging.info("check ---end---")
                condition.release()
    
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm1_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            condition = threading.Condition()
            trend_task = [
                threading.Thread(target=check_log, args=()),
                threading.Thread(target=vm1_ping_other, args=())
            ]
            for ele in trend_task:
                ele.start()
            for ele in trend_task:
                ele.join()
>           self.ssh_sut.run_ssh_cmd(self.session, "exit\n")

npxtester/Tests/testNics/test_network_sriov_stress.py:677: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
npxtester/libs/commons/sshInstance.py:63: in run_ssh_cmd
    ss.sendall(command)
/usr/local/lib/python3.6/site-packages/paramiko/channel.py:846: in sendall
    sent = self.send(s)
/usr/local/lib/python3.6/site-packages/paramiko/channel.py:801: in send
    return self._send(s, m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <paramiko.Channel 0 (closed) -> <paramiko.Transport at 0x232616d8 (unconnected)>>
s = 'exit\n', m = paramiko.Message(b'^\x00\x00\x00\x00')

    def _send(self, s, m):
        size = len(s)
        self.lock.acquire()
        try:
            if self.closed:
                # this doesn't seem useful, but it is the documented behavior
                # of Socket
>               raise socket.error("Socket is closed")
E               OSError: Socket is closed

/usr/local/lib/python3.6/site-packages/paramiko/channel.py:1198: OSErrorself = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f61231456a0>

    def teardown(self):
        # status = self.remove_vf_from_pf()
>       status = self.remove_vm(self.vm2_name)

npxtester/Tests/testNics/test_network_sriov_stress.py:74: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
npxtester/Tests/testNics/test_network_sriov_stress.py:271: in remove_vm
    output1, error1 = self.ssh_sut.ssh_exec_cmd(self.client, cmd1)
npxtester/libs/commons/sshInstance.py:47: in ssh_exec_cmd
    stdin1, stdout1, stderr = client.exec_command(cmd, get_pty=True)
/usr/local/lib/python3.6/site-packages/paramiko/client.py:508: in exec_command
    chan = self._transport.open_session(timeout=timeout)
/usr/local/lib/python3.6/site-packages/paramiko/transport.py:879: in open_session
    timeout=timeout,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <paramiko.Transport at 0x232616d8 (unconnected)>, kind = 'session'
dest_addr = None, src_addr = None, window_size = None, max_packet_size = None
timeout = None

    def open_channel(
        self,
        kind,
        dest_addr=None,
        src_addr=None,
        window_size=None,
        max_packet_size=None,
        timeout=None,
    ):
        """
        Request a new channel to the server. `Channels <.Channel>` are
        socket-like objects used for the actual transfer of data across the
        session. You may only request a channel after negotiating encryption
        (using `connect` or `start_client`) and authenticating.
    
        .. note:: Modifying the the window and packet sizes might have adverse
            effects on the channel created. The default values are the same
            as in the OpenSSH code base and have been battle tested.
    
        :param str kind:
            the kind of channel requested (usually ``"session"``,
            ``"forwarded-tcpip"``, ``"direct-tcpip"``, or ``"x11"``)
        :param tuple dest_addr:
            the destination address (address + port tuple) of this port
            forwarding, if ``kind`` is ``"forwarded-tcpip"`` or
            ``"direct-tcpip"`` (ignored for other channel types)
        :param src_addr: the source address of this port forwarding, if
            ``kind`` is ``"forwarded-tcpip"``, ``"direct-tcpip"``, or ``"x11"``
        :param int window_size:
            optional window size for this session.
        :param int max_packet_size:
            optional max packet size for this session.
        :param float timeout:
            optional timeout opening a channel, default 3600s (1h)
    
        :return: a new `.Channel` on success
    
        :raises:
            `.SSHException` -- if the request is rejected, the session ends
            prematurely or there is a timeout openning a channel
    
        .. versionchanged:: 1.15
            Added the ``window_size`` and ``max_packet_size`` arguments.
        """
        if not self.active:
>           raise SSHException("SSH session not active")
E           paramiko.ssh_exception.SSHException: SSH session not active

/usr/local/lib/python3.6/site-packages/paramiko/transport.py:969: SSHException
---------------------------- Captured stdout setup -----------------------------
2022-03-21 13:16:29 - NicTestFixture.py - [line:30] - root - INFO - ============================ Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
2022-03-21 13:16:29 - test_network_sriov_stress.py - [line:28] - root - INFO - SSH SUT and setup configurations in the setup function.
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.2p1)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.71
2022-03-21 13:16:29 - sftp.py - [line:158] - paramiko.transport.sftp - INFO - [chan 1] Opened sftp connection (server version 3)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.16
2022-03-21 13:16:32 - sshInstance.py - [line:46] - root - INFO - modinfo ice | grep ^version:
2022-03-21 13:16:32 - sshInstance.py - [line:50] - root - INFO - version:        1.7.19

2022-03-21 13:16:40 - sshInstance.py - [line:46] - root - INFO - rmmod ice
2022-03-21 13:16:43 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:16:51 - sshInstance.py - [line:46] - root - INFO - modprobe ice
2022-03-21 13:16:55 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:03 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0 up
2022-03-21 13:17:03 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:12 - sshInstance.py - [line:46] - root - INFO - ethtool -i enp137s0f0
2022-03-21 13:17:12 - sshInstance.py - [line:50] - root - INFO - driver: ice
version: 1.7.19
firmware-version: 2.19 0x8000bafe 1.3083.0
expansion-rom-version: 
bus-info: 0000:89:00.0
supports-statistics: yes
supports-test: yes
supports-eeprom-access: yes
supports-register-dump: yes
supports-priv-flags: yes

2022-03-21 13:17:20 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0
2022-03-21 13:17:20 - sshInstance.py - [line:50] - root - INFO - enp137s0f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::200:ff:fe00:3300  prefixlen 64  scopeid 0x20<link>
        ether 00:00:00:00:33:00  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 12  bytes 2036 (2.0 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


2022-03-21 13:17:28 - sshInstance.py - [line:46] - root - INFO - ifconfig ens801f0
2022-03-21 13:17:28 - sshInstance.py - [line:50] - root - INFO - ens801f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::3efd:feff:fed2:73e0  prefixlen 64  scopeid 0x20<link>
        ether 3c:fd:fe:d2:73:e0  txqueuelen 1000  (Ethernet)
        RX packets 9759985854  bytes 14765465651642 (13.4 TiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 413079936  bytes 27353029185 (25.4 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


----------------------------- Captured stdout call -----------------------------
2022-03-21 13:17:36 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -s | grep enp137s0f0 | awk '{print $1;}'
2022-03-21 13:17:36 - sshInstance.py - [line:50] - root - INFO - 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:111] - root - INFO - pf_id was found: 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:511] - root - INFO - format_pf_id is 0000\:89\:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:514] - root - INFO - pf_id_key: 89
2022-03-21 13:17:47 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:47 - sshInstance.py - [line:96] - root - INFO - Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Mon Mar 21 12:08:54 2022 from 10.239.182.99
root@npx-sut3-ice-d-auto:~# ifconfig enp137s0f0 192.168.10.10
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:17:50 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: enp137s0f0
2022-03-21 13:17:56 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:56 - sshInstance.py - [line:96] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Mon Mar 21 11:51:38 2022 from 10.239.182.99
[root@redhat8 ~]# ifconfig ens801f0 192.168.10.11
[root@redhat8 ~]# 
2022-03-21 13:17:59 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens801f0
2022-03-21 13:18:02 - sshInstance.py - [line:46] - root - INFO - echo 4 > /sys/class/net/enp137s0f0/device/sriov_numvfs
2022-03-21 13:18:02 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:07 - test_network_sriov_stress.py - [line:125] - root - INFO - Successfully Virtualized PF to VFs.
2022-03-21 13:18:10 - sshInstance.py - [line:46] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2022-03-21 13:18:10 - sshInstance.py - [line:50] - root - INFO - 89:01.0
89:01.1
89:01.2
89:01.3

2022-03-21 13:18:15 - test_network_sriov_stress.py - [line:139] - root - INFO - Succssfully Gotten vf_id list:

2022-03-21 13:18:18 - sshInstance.py - [line:46] - root - INFO - modprobe vfio-pci

2022-03-21 13:18:18 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:26 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.0
2022-03-21 13:18:27 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:32 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:35 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.1
2022-03-21 13:18:36 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:537] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:46] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:50] - root - INFO - 0000:89:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889]

2022-03-21 13:18:49 - test_network_sriov_stress.py - [line:549] - root - INFO - Successfully get vf device id: 8086:1889
2022-03-21 13:18:52 - sshInstance.py - [line:46] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2022-03-21 13:18:52 - sshInstance.py - [line:50] - root - INFO - yes

2022-03-21 13:18:57 - test_network_sriov_stress.py - [line:198] - root - INFO - Default network is active? yes

2022-03-21 13:19:01 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:08 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:10 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:13 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest1
2022-03-21 13:19:17 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:17 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:24 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:26 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:26 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:29 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest2
2022-03-21 13:19:32 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:19:32 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:19:37 - test_network_sriov_stress.py - [line:250] - root - ERROR - not found IP of VMtest1
2022-03-21 13:20:40 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:40 - sshInstance.py - [line:50] - root - INFO - 192.168.122.98/24

2022-03-21 13:20:45 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest1 IP: 192.168.122.98/24

2022-03-21 13:20:48 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:48 - sshInstance.py - [line:50] - root - INFO - 192.168.122.17/24

2022-03-21 13:20:53 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest2 IP: 192.168.122.17/24

2022-03-21 13:20:57 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.098 ms
2022-03-21 13:20:58 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.084 ms
2022-03-21 13:20:59 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.087 ms
2022-03-21 13:21:00 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.078 ms
2022-03-21 13:21:01 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.074/0.084/0.098/0.008 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:21:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
The authenticity of host '192.168.122.98 (192.168.122.98)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:21:19 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:19 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.98' (ECDSA) to the list of known hosts.
root@192.168.122.98's password: 
2022-03-21 13:21:28 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:28 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:23:16 AM EDT
  System load:  0.01               Processes:             135
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:58:30 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:21:37 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:37 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:21:43 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:21:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:49 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:21:54 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:22:00 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:00 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2022-03-21 13:22:03 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:22:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:09 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:22:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:18 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2022-03-21 13:22:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:27 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:22:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:36 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:22:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:45 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:22:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:54 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.98 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:01 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.17
PING 192.168.122.17 (192.168.122.17) 56(84) bytes of data.
64 bytes from 192.168.122.17: icmp_seq=1 ttl=64 time=0.097 ms
2022-03-21 13:23:02 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=2 ttl=64 time=0.079 ms
2022-03-21 13:23:03 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=3 ttl=64 time=0.079 ms
2022-03-21 13:23:04 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=4 ttl=64 time=0.067 ms
2022-03-21 13:23:05 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.17 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.067/0.078/0.097/0.010 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:05 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.17
The authenticity of host '192.168.122.17 (192.168.122.17)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:23:23 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:23 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.17' (ECDSA) to the list of known hosts.
root@192.168.122.17's password: 
2022-03-21 13:23:32 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:32 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:25:20 AM EDT
  System load:  0.0                Processes:             138
  Usage of /:   37.4% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.17
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:56:13 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:23:41 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:41 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:23:47 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:23:53 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:53 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:23:58 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:24:04 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:04 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2022-03-21 13:24:07 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:24:13 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:13 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:24:22 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:22 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2022-03-21 13:24:31 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:31 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:24:40 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:40 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:24:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:49 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:24:58 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:58 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.17 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:05 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.103 ms
2022-03-21 13:25:06 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.075 ms
2022-03-21 13:25:07 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.128 ms
2022-03-21 13:25:08 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.119 ms
2022-03-21 13:25:09 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.075/0.100/0.128/0.021 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
root@192.168.122.98's password: 
2022-03-21 13:25:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:27 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:27:15 AM EDT
  System load:  0.0                Processes:             131
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Mon Mar 21 01:23:16 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:25:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:36 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.10 > ping_sut1.txt &
[1] 1085
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:45 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 >ping6_sut1.txt &
[2] 1088
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:54 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.13 > ping_vm2.txt &
[3] 1090
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:03 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:03 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1091
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:12 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:12 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.11 > ping_sut2.txt &
[5] 1093
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:21 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:21 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 >ping6_sut2.txt &
[6] 1094
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:24 - test_network_sriov_stress.py - [line:613] - root - INFO - ---ping end -----
2022-03-21 13:36:30 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:30 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut1.txt
--- 192.168.10.10 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599024ms
rtt min/avg/max/mdev = 0.017/0.026/0.464/0.019 ms
[1]   Done                    nohup ping -w 600 192.168.10.10 > ping_sut1.txt
[2]   Done                    nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 > ping6_sut1.txt
[3]   Done                    nohup ping -w 600 192.168.10.13 > ping_vm2.txt
[4]   Done                    nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab > ping6_vm2.txt
[5]-  Done                    nohup ping -w 600 192.168.10.11 > ping_sut2.txt
[6]+  Done                    nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 > ping6_sut2.txt
root@localhost:~# 
2022-03-21 13:36:39 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:39 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut1.txt
--- fe80::200:ff:fe00:3300 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599040ms
rtt min/avg/max/mdev = 0.018/0.024/0.146/0.009 ms
root@localhost:~# 
2022-03-21 13:36:48 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:48 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_vm2.txt
--- 192.168.10.13 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599022ms
rtt min/avg/max/mdev = 0.022/0.030/0.124/0.008 ms
root@localhost:~# 
2022-03-21 13:36:57 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:57 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_vm2.txt
--- fe80::1034:56ff:fe78:90ab ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599035ms
rtt min/avg/max/mdev = 0.027/0.040/0.412/0.044 ms
root@localhost:~# 
2022-03-21 13:37:07 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:07 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut2.txt
--- 192.168.10.11 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599017ms
rtt min/avg/max/mdev = 0.027/0.036/0.105/0.005 ms
root@localhost:~# 
2022-03-21 13:37:16 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:16 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut2.txt
--- fe80::3efd:feff:fed2:73e0 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599030ms
rtt min/avg/max/mdev = 0.027/0.036/0.120/0.006 ms
root@localhost:~# 
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:663] - root - INFO - check ---end---
------------------------------ Captured log call -------------------------------
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -s | grep enp137s0f0 | awk '{print $1;}'
INFO     root:sshInstance.py:50 0000:89:00.0

INFO     root:test_network_sriov_stress.py:111 pf_id was found: 0000:89:00.0

INFO     root:test_network_sriov_stress.py:511 format_pf_id is 0000\:89\:00.0

INFO     root:test_network_sriov_stress.py:514 pf_id_key: 89
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Mon Mar 21 12:08:54 2022 from 10.239.182.99
root@npx-sut3-ice-d-auto:~# ifconfig enp137s0f0 192.168.10.10
root@npx-sut3-ice-d-auto:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: enp137s0f0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Mon Mar 21 11:51:38 2022 from 10.239.182.99
[root@redhat8 ~]# ifconfig ens801f0 192.168.10.11
[root@redhat8 ~]# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens801f0
INFO     root:sshInstance.py:46 echo 4 > /sys/class/net/enp137s0f0/device/sriov_numvfs
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:125 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:46  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:50 89:01.0
89:01.1
89:01.2
89:01.3

INFO     root:test_network_sriov_stress.py:139 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:46 modprobe vfio-pci

INFO     root:sshInstance.py:50 
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.0
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:172 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.1
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:172 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:537 lspci -Dnn | grep 89:01.1
INFO     root:sshInstance.py:46 lspci -Dnn | grep 89:01.1
INFO     root:sshInstance.py:50 0000:89:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889]

INFO     root:test_network_sriov_stress.py:549 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:46 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:50 yes

INFO     root:test_network_sriov_stress.py:198 Default network is active? yes

INFO     root:sshInstance.py:71 virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
ERROR    root:test_network_sriov_stress.py:230 Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
ERROR    root:test_network_sriov_stress.py:231 Failed to create a VM: 
INFO     root:sshInstance.py:71 virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:71 Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:test_network_sriov_stress.py:233 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:71 virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
ERROR    root:test_network_sriov_stress.py:230 Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
ERROR    root:test_network_sriov_stress.py:231 Failed to create a VM: 
INFO     root:sshInstance.py:71 virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:71 Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:test_network_sriov_stress.py:233 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:46 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 
ERROR    root:test_network_sriov_stress.py:250 not found IP of VMtest1
INFO     root:sshInstance.py:46 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 192.168.122.98/24

INFO     root:test_network_sriov_stress.py:245 Successfully got VMtest1 IP: 192.168.122.98/24

INFO     root:sshInstance.py:46 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 192.168.122.17/24

INFO     root:test_network_sriov_stress.py:245 Successfully got VMtest2 IP: 192.168.122.17/24

INFO     root:sshInstance.py:71 ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.098 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.084 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.087 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.078 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.074/0.084/0.098/0.008 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.98
The authenticity of host '192.168.122.98 (192.168.122.98)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 yes
Warning: Permanently added '192.168.122.98' (ECDSA) to the list of known hosts.
root@192.168.122.98's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:23:16 AM EDT
  System load:  0.01               Processes:             135
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:58:30 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:341 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:355 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 192.168.10.12
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 exit
logout
Connection to 192.168.122.98 closed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:71 ping -c 5 192.168.122.17
PING 192.168.122.17 (192.168.122.17) 56(84) bytes of data.
64 bytes from 192.168.122.17: icmp_seq=1 ttl=64 time=0.097 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=2 ttl=64 time=0.079 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=3 ttl=64 time=0.079 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=4 ttl=64 time=0.067 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.17 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.067/0.078/0.097/0.010 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.17
The authenticity of host '192.168.122.17 (192.168.122.17)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 yes
Warning: Permanently added '192.168.122.17' (ECDSA) to the list of known hosts.
root@192.168.122.17's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:25:20 AM EDT
  System load:  0.0                Processes:             138
  Usage of /:   37.4% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.17
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:56:13 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:341 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:355 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 192.168.10.13
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 exit
logout
Connection to 192.168.122.17 closed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:71 ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.103 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.075 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.128 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.119 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.075/0.100/0.128/0.021 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.98
root@192.168.122.98's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:27:15 AM EDT
  System load:  0.0                Processes:             131
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Mon Mar 21 01:23:16 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.10 > ping_sut1.txt &
[1] 1085
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 >ping6_sut1.txt &
[2] 1088
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.13 > ping_vm2.txt &
[3] 1090
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1091
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.11 > ping_sut2.txt &
[5] 1093
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 >ping6_sut2.txt &
[6] 1094
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:test_network_sriov_stress.py:613 ---ping end -----
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_sut1.txt
--- 192.168.10.10 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599024ms
rtt min/avg/max/mdev = 0.017/0.026/0.464/0.019 ms
[1]   Done                    nohup ping -w 600 192.168.10.10 > ping_sut1.txt
[2]   Done                    nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 > ping6_sut1.txt
[3]   Done                    nohup ping -w 600 192.168.10.13 > ping_vm2.txt
[4]   Done                    nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab > ping6_vm2.txt
[5]-  Done                    nohup ping -w 600 192.168.10.11 > ping_sut2.txt
[6]+  Done                    nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 > ping6_sut2.txt
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_sut1.txt
--- fe80::200:ff:fe00:3300 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599040ms
rtt min/avg/max/mdev = 0.018/0.024/0.146/0.009 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_vm2.txt
--- 192.168.10.13 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599022ms
rtt min/avg/max/mdev = 0.022/0.030/0.124/0.008 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_vm2.txt
--- fe80::1034:56ff:fe78:90ab ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599035ms
rtt min/avg/max/mdev = 0.027/0.040/0.412/0.044 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_sut2.txt
--- 192.168.10.11 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599017ms
rtt min/avg/max/mdev = 0.027/0.036/0.105/0.005 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_sut2.txt
--- fe80::3efd:feff:fed2:73e0 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599030ms
rtt min/avg/max/mdev = 0.027/0.036/0.120/0.006 ms
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:662 Successfully ping sut1
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 sut1
INFO     root:test_network_sriov_stress.py:662 Successfully ping vm2
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 vm2
INFO     root:test_network_sriov_stress.py:662 Successfully ping sut2
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 sut2
INFO     root:test_network_sriov_stress.py:663 check ---end---
--------------------------- Captured stdout teardown ---------------------------
2022-03-21 13:37:25 - sshInstance.py - [line:46] - root - INFO - virsh destroy VMtest2
2022-03-21 13:37:25 - NicTestFixture.py - [line:34] - root - INFO - ============================ end of run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
---------------------------- Captured log teardown -----------------------------
INFO     root:sshInstance.py:46 virsh destroy VMtest2
INFO     root:NicTestFixture.py:34 ============================ end of run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
=================================== FAILURES ===================================
_ Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] _

self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f61231456a0>
vm1_image = 'uvm2.img', vm2_image = 'uvm1.img'

    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.nicAll
    @pytest.mark.nicStress
    @pytest.mark.nicSriovStress
    @pytest.mark.nicSriov2hours
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest(self, vm1_image, vm2_image):
        pf_id, status = self.get_pf_id(self.pf_name)
        # transfer pf_id to 0000\:00\:00.0 format
    
        if not pf_id:
            assert 200 == status
        else:
            pf_id_format = pf_id.replace(":", "\\:", 2)
            logging.info("format_pf_id is {}".format(pf_id_format))
            # get the number key of pf_id
            pf_id_key = pf_id.split(":")[1]
            logging.info("pf_id_key: {}".format(pf_id_key))
            # assign IP to PF in SUT and sut2
            pf_ip = "192.168.10.10"
            sut2_ip = "192.168.10.11"
            assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
            assert 200 == self.assign_ip_ehternet(self.session2, sut2_ip, self.sut2_info["pf1"])
            # virtulize the pf to vfs
            assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
            # get vf ids
            vf_id_list, status = self.get_vf_ids(pf_id_key)
            vf_id_list = [i.strip() for i in vf_id_list]
    
            if status == 200:
                # modprobe vfio-pci
                assert 200 == self.modprobe("vfio-pci")
                # bind vf with vfio-pci
                host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                assert 200 == status
            else:
                assert 200 == status
    
            # get vF device id
            cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
            logging.info(cmd)
            vf_device_id = ""
            vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
            vf_device_id_rs = vf_device_id_rs.strip()
            if vf_device_id_rs:
                st = False
                vf_device_id = None
                for one in vf_device_id_rs.split(" "):
                    one = " " + one + " "
                    if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":") > -1:
                        vf_device_id = one.replace("[", "").replace("]", "").strip()
                if not vf_device_id: assert 200 == 400, "vf_device_id is not found"
                logging.info("Successfully get vf device id: {}".format(vf_device_id))
                assert 200 == 200
            else:
                logging.error("Fail to get vf device id.")
                assert 200 == 400
            # set network
            status = self.default_network_isActive(self.defult_network)
            if status == "no":
                assert 200 == self.start_default_network(self.defult_network)
    
            # start VMs
            assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
            assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
            # get VM ssh IP
            vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
            vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
    
            # ssh VM1 to set VF
            # ssh VM1 to set VF
            vm1_vf_ip = "192.168.10.12"
            vm2_vf_ip = "192.168.10.13"
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm1_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            vm1_vf_name, vm1_ipv6, status = self.ssh_vm_set_VF(vm1_ip, vf_device_id, vm1_vf_ip, "1234567890ac")
            self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
    
            assert 200 == status, "vm1 vf related settings failed"
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm2_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            vm2_vf_name, vm2_ipv6, status = self.ssh_vm_set_VF(vm2_ip, vf_device_id, vm2_vf_ip, "1234567890ab")
            self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
            assert 200 == status, "vm2 vf related settings failed"
            ping_time = self.sut_info["run_time"]
    
            def vm1_ping_other():
                condition.acquire()
                #from vm1 ping sut1 ipv4 and sut1 ipv6
                cmd_sut_ipv4 = "nohup ping -w {} {} > ping_sut1.txt &\n\n".format(ping_time, pf_ip)
                cmd_sut_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_sut1.txt &\n\n".format(vm1_vf_name, ping_time, self.sut1_pf1_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut ipv6 cmd is ERROR"
                #from vm1 ping vm2 ipv4 and vm2 ipv6
                cmd_vm_ipv4 = "nohup ping -w {} {} > ping_vm2.txt &\n\n".format(ping_time, vm2_vf_ip)
                cmd_vm_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_vm2.txt &\n\n".format(vm1_vf_name, ping_time, vm2_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_vm_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping vm2 ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_vm_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping vm2 ipv6 cmd is ERROR"
                #from vm1 ping sut2 ipv4 and sut2 ipv6
                cmd_sut2_ipv4 = "nohup ping -w {} {} > ping_sut2.txt &\n\n".format(ping_time, sut2_ip)
                cmd_sut2_ipv6 = "nohup ping6 -I {} -w {} {} >ping6_sut2.txt &\n\n".format(vm1_vf_name, ping_time, self.sut2_pf1_ipv6)
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut2_ipv4)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut2 ipv4 cmd is ERROR"
                stdout, stderr = self.ssh_sut.run_ssh_cmd(self.session, cmd_sut2_ipv6)
                if stderr:
                    assert 200 == 400, "from vm1 ping sut2 ipv6 cmd is ERROR"
                condition.notify_all()
                logging.info("---ping end -----")
                condition.release()
    
    
            def check_log_rs(filename, check_rs):
                filepath = os.path.join("/root/", filename)
                content, stderr = self.ssh_sut.run_ssh_cmd(self.session, "tail -n 3 {}\n".format(filepath))
                if content.find(check_rs) > -1:
                    if content.find("0% packet loss") > -1:
                        return True, 200
                    else:
                        return True, 400
                else:
                    return False, None
    
            def check_log():
                condition.acquire()
                condition.wait()
                timeout =  300
                time.sleep(int(ping_time))
                filelist = [
                    {"filename": "ping_sut1.txt", "err_message": "ping sut1 pf ipv4 is error", "rs": 400, "st": False},
                    {"filename": "ping6_sut1.txt", "err_message": "ping sut1 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping_vm2.txt", "err_message": "ping vm2 vf ipv4 is error", "rs": 400, "st": False},
                    {"filename": "ping6_vm2.txt", "err_message": "ping vm2 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping_sut2.txt", "err_message": "ping sut2 pf ipv6 is error", "rs": 400, "st": False},
                    {"filename": "ping6_sut2.txt", "err_message": "ping sut2 pf ipv6 is error", "rs": 400, "st": False},
                ]
                tm = 0
                while True:
                    for dt in filelist:
                        st, code = check_log_rs(dt["filename"], "packet loss")
                        if st:
                            dt["st"] = st
                            dt["rs"] = code
                    all_st = True
                    for dt in filelist:
                        if not dt["st"]:
                            all_st = False
                    if all_st:
                        break
    
                    time.sleep(2)
                    tm = tm + 2
                    if tm > timeout:
                        break
    
                for dt in filelist:
                    assert 200 == dt["rs"], dt["err_message"]
                    logging.info("Successfully {}".format(dt["filename"].replace(".txt", "").replace("_", " ")))
                logging.info("check ---end---")
                condition.release()
    
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session,
                                              vm1_ip), "ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            condition = threading.Condition()
            trend_task = [
                threading.Thread(target=check_log, args=()),
                threading.Thread(target=vm1_ping_other, args=())
            ]
            for ele in trend_task:
                ele.start()
            for ele in trend_task:
                ele.join()
>           self.ssh_sut.run_ssh_cmd(self.session, "exit\n")

npxtester/Tests/testNics/test_network_sriov_stress.py:677: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
npxtester/libs/commons/sshInstance.py:63: in run_ssh_cmd
    ss.sendall(command)
/usr/local/lib/python3.6/site-packages/paramiko/channel.py:846: in sendall
    sent = self.send(s)
/usr/local/lib/python3.6/site-packages/paramiko/channel.py:801: in send
    return self._send(s, m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <paramiko.Channel 0 (closed) -> <paramiko.Transport at 0x232616d8 (unconnected)>>
s = 'exit\n', m = paramiko.Message(b'^\x00\x00\x00\x00')

    def _send(self, s, m):
        size = len(s)
        self.lock.acquire()
        try:
            if self.closed:
                # this doesn't seem useful, but it is the documented behavior
                # of Socket
>               raise socket.error("Socket is closed")
E               OSError: Socket is closed

/usr/local/lib/python3.6/site-packages/paramiko/channel.py:1198: OSError
---------------------------- Captured stdout setup -----------------------------
2022-03-21 13:16:29 - NicTestFixture.py - [line:30] - root - INFO - ============================ Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img] case ============================
2022-03-21 13:16:29 - test_network_sriov_stress.py - [line:28] - root - INFO - SSH SUT and setup configurations in the setup function.
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.2p1)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.71
2022-03-21 13:16:29 - sftp.py - [line:158] - paramiko.transport.sftp - INFO - [chan 1] Opened sftp connection (server version 3)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2022-03-21 13:16:29 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2022-03-21 13:16:29 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.239.115.16
2022-03-21 13:16:32 - sshInstance.py - [line:46] - root - INFO - modinfo ice | grep ^version:
2022-03-21 13:16:32 - sshInstance.py - [line:50] - root - INFO - version:        1.7.19

2022-03-21 13:16:40 - sshInstance.py - [line:46] - root - INFO - rmmod ice
2022-03-21 13:16:43 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:16:51 - sshInstance.py - [line:46] - root - INFO - modprobe ice
2022-03-21 13:16:55 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:03 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0 up
2022-03-21 13:17:03 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:17:12 - sshInstance.py - [line:46] - root - INFO - ethtool -i enp137s0f0
2022-03-21 13:17:12 - sshInstance.py - [line:50] - root - INFO - driver: ice
version: 1.7.19
firmware-version: 2.19 0x8000bafe 1.3083.0
expansion-rom-version: 
bus-info: 0000:89:00.0
supports-statistics: yes
supports-test: yes
supports-eeprom-access: yes
supports-register-dump: yes
supports-priv-flags: yes

2022-03-21 13:17:20 - sshInstance.py - [line:46] - root - INFO - ifconfig enp137s0f0
2022-03-21 13:17:20 - sshInstance.py - [line:50] - root - INFO - enp137s0f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::200:ff:fe00:3300  prefixlen 64  scopeid 0x20<link>
        ether 00:00:00:00:33:00  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 12  bytes 2036 (2.0 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


2022-03-21 13:17:28 - sshInstance.py - [line:46] - root - INFO - ifconfig ens801f0
2022-03-21 13:17:28 - sshInstance.py - [line:50] - root - INFO - ens801f0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::3efd:feff:fed2:73e0  prefixlen 64  scopeid 0x20<link>
        ether 3c:fd:fe:d2:73:e0  txqueuelen 1000  (Ethernet)
        RX packets 9759985854  bytes 14765465651642 (13.4 TiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 413079936  bytes 27353029185 (25.4 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


----------------------------- Captured stdout call -----------------------------
2022-03-21 13:17:36 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -s | grep enp137s0f0 | awk '{print $1;}'
2022-03-21 13:17:36 - sshInstance.py - [line:50] - root - INFO - 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:111] - root - INFO - pf_id was found: 0000:89:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:511] - root - INFO - format_pf_id is 0000\:89\:00.0

2022-03-21 13:17:41 - test_network_sriov_stress.py - [line:514] - root - INFO - pf_id_key: 89
2022-03-21 13:17:47 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:47 - sshInstance.py - [line:96] - root - INFO - Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Mon Mar 21 12:08:54 2022 from 10.239.182.99
root@npx-sut3-ice-d-auto:~# ifconfig enp137s0f0 192.168.10.10
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:17:50 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: enp137s0f0
2022-03-21 13:17:56 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:17:56 - sshInstance.py - [line:96] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Mon Mar 21 11:51:38 2022 from 10.239.182.99
[root@redhat8 ~]# ifconfig ens801f0 192.168.10.11
[root@redhat8 ~]# 
2022-03-21 13:17:59 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens801f0
2022-03-21 13:18:02 - sshInstance.py - [line:46] - root - INFO - echo 4 > /sys/class/net/enp137s0f0/device/sriov_numvfs
2022-03-21 13:18:02 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:07 - test_network_sriov_stress.py - [line:125] - root - INFO - Successfully Virtualized PF to VFs.
2022-03-21 13:18:10 - sshInstance.py - [line:46] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2022-03-21 13:18:10 - sshInstance.py - [line:50] - root - INFO - 89:01.0
89:01.1
89:01.2
89:01.3

2022-03-21 13:18:15 - test_network_sriov_stress.py - [line:139] - root - INFO - Succssfully Gotten vf_id list:

2022-03-21 13:18:18 - sshInstance.py - [line:46] - root - INFO - modprobe vfio-pci

2022-03-21 13:18:18 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:26 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.0
2022-03-21 13:18:27 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:32 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:35 - sshInstance.py - [line:46] - root - INFO - /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.1
2022-03-21 13:18:36 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:172] - root - INFO - Successfuly bound VF to vfio-pci
2022-03-21 13:18:41 - test_network_sriov_stress.py - [line:537] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:46] - root - INFO - lspci -Dnn | grep 89:01.1
2022-03-21 13:18:44 - sshInstance.py - [line:50] - root - INFO - 0000:89:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889]

2022-03-21 13:18:49 - test_network_sriov_stress.py - [line:549] - root - INFO - Successfully get vf device id: 8086:1889
2022-03-21 13:18:52 - sshInstance.py - [line:46] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2022-03-21 13:18:52 - sshInstance.py - [line:50] - root - INFO - yes

2022-03-21 13:18:57 - test_network_sriov_stress.py - [line:198] - root - INFO - Default network is active? yes

2022-03-21 13:19:01 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:04 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:08 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:10 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:13 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest1
2022-03-21 13:19:17 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:17 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:230] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:20 - test_network_sriov_stress.py - [line:231] - root - ERROR - Failed to create a VM: 
2022-03-21 13:19:24 - sshInstance.py - [line:71] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2022-03-21 13:19:26 - sshInstance.py - [line:71] - root - INFO - Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:19:26 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:19:29 - test_network_sriov_stress.py - [line:233] - root - INFO - Successfully created a VM: VMtest2
2022-03-21 13:19:32 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:19:32 - sshInstance.py - [line:50] - root - INFO - 
2022-03-21 13:19:37 - test_network_sriov_stress.py - [line:250] - root - ERROR - not found IP of VMtest1
2022-03-21 13:20:40 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:40 - sshInstance.py - [line:50] - root - INFO - 192.168.122.98/24

2022-03-21 13:20:45 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest1 IP: 192.168.122.98/24

2022-03-21 13:20:48 - sshInstance.py - [line:46] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2022-03-21 13:20:48 - sshInstance.py - [line:50] - root - INFO - 192.168.122.17/24

2022-03-21 13:20:53 - test_network_sriov_stress.py - [line:245] - root - INFO - Successfully got VMtest2 IP: 192.168.122.17/24

2022-03-21 13:20:57 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.098 ms
2022-03-21 13:20:58 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.084 ms
2022-03-21 13:20:59 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.087 ms
2022-03-21 13:21:00 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.078 ms
2022-03-21 13:21:01 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.074/0.084/0.098/0.008 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:21:01 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:10 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
The authenticity of host '192.168.122.98 (192.168.122.98)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:21:19 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:19 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.98' (ECDSA) to the list of known hosts.
root@192.168.122.98's password: 
2022-03-21 13:21:28 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:28 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:23:16 AM EDT
  System load:  0.01               Processes:             135
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:58:30 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:21:37 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:37 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:21:43 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:21:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:21:49 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:21:54 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:22:00 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:00 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2022-03-21 13:22:03 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:22:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:09 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:22:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:18 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2022-03-21 13:22:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:27 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:22:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:36 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:22:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:45 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:22:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:22:54 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.98 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:01 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.17
PING 192.168.122.17 (192.168.122.17) 56(84) bytes of data.
64 bytes from 192.168.122.17: icmp_seq=1 ttl=64 time=0.097 ms
2022-03-21 13:23:02 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=2 ttl=64 time=0.079 ms
2022-03-21 13:23:03 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=3 ttl=64 time=0.079 ms
2022-03-21 13:23:04 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=4 ttl=64 time=0.067 ms
2022-03-21 13:23:05 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.17: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.17 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.067/0.078/0.097/0.010 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:23:05 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:14 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.17
The authenticity of host '192.168.122.17 (192.168.122.17)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
2022-03-21 13:23:23 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:23 - sshInstance.py - [line:96] - root - INFO - yes
Warning: Permanently added '192.168.122.17' (ECDSA) to the list of known hosts.
root@192.168.122.17's password: 
2022-03-21 13:23:32 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:32 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:25:20 AM EDT
  System load:  0.0                Processes:             138
  Usage of /:   37.4% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.17
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:56:13 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:23:41 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:41 - sshInstance.py - [line:96] - root - INFO - lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
2022-03-21 13:23:47 - test_network_sriov_stress.py - [line:341] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2022-03-21 13:23:53 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:23:53 - sshInstance.py - [line:96] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2022-03-21 13:23:58 - test_network_sriov_stress.py - [line:355] - root - INFO - Successfully got vf device name of vm1: ens5
2022-03-21 13:24:04 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:04 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2022-03-21 13:24:07 - test_network_sriov_stress.py - [line:302] - root - INFO - Successfully assigned ip to ethernet: ens5
2022-03-21 13:24:13 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:13 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2022-03-21 13:24:22 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:22 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2022-03-21 13:24:31 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:31 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2022-03-21 13:24:40 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:40 - sshInstance.py - [line:96] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2022-03-21 13:24:49 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:49 - sshInstance.py - [line:96] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2022-03-21 13:24:58 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:24:58 - sshInstance.py - [line:96] - root - INFO - exit
logout
Connection to 192.168.122.17 closed.
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:05 - sshInstance.py - [line:71] - root - INFO - ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.103 ms
2022-03-21 13:25:06 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.075 ms
2022-03-21 13:25:07 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.128 ms
2022-03-21 13:25:08 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.119 ms
2022-03-21 13:25:09 - sshInstance.py - [line:71] - root - INFO - 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.075/0.100/0.128/0.021 ms
root@npx-sut3-ice-d-auto:~# 
2022-03-21 13:25:09 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:18 - sshInstance.py - [line:96] - root - INFO - ssh root@192.168.122.98
root@192.168.122.98's password: 
2022-03-21 13:25:27 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:27 - sshInstance.py - [line:96] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:27:15 AM EDT
  System load:  0.0                Processes:             131
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Mon Mar 21 01:23:16 2022 from 192.168.122.1
root@localhost:~# 
2022-03-21 13:25:36 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:36 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.10 > ping_sut1.txt &
[1] 1085
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:45 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:45 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 >ping6_sut1.txt &
[2] 1088
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:25:54 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:25:54 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.13 > ping_vm2.txt &
[3] 1090
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:03 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:03 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1091
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:12 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:12 - sshInstance.py - [line:96] - root - INFO - nohup ping -w 600 192.168.10.11 > ping_sut2.txt &
[5] 1093
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:21 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:26:21 - sshInstance.py - [line:96] - root - INFO - nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 >ping6_sut2.txt &
[6] 1094
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2022-03-21 13:26:24 - test_network_sriov_stress.py - [line:613] - root - INFO - ---ping end -----
2022-03-21 13:36:30 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:30 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut1.txt
--- 192.168.10.10 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599024ms
rtt min/avg/max/mdev = 0.017/0.026/0.464/0.019 ms
[1]   Done                    nohup ping -w 600 192.168.10.10 > ping_sut1.txt
[2]   Done                    nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 > ping6_sut1.txt
[3]   Done                    nohup ping -w 600 192.168.10.13 > ping_vm2.txt
[4]   Done                    nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab > ping6_vm2.txt
[5]-  Done                    nohup ping -w 600 192.168.10.11 > ping_sut2.txt
[6]+  Done                    nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 > ping6_sut2.txt
root@localhost:~# 
2022-03-21 13:36:39 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:39 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut1.txt
--- fe80::200:ff:fe00:3300 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599040ms
rtt min/avg/max/mdev = 0.018/0.024/0.146/0.009 ms
root@localhost:~# 
2022-03-21 13:36:48 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:48 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_vm2.txt
--- 192.168.10.13 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599022ms
rtt min/avg/max/mdev = 0.022/0.030/0.124/0.008 ms
root@localhost:~# 
2022-03-21 13:36:57 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:36:57 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_vm2.txt
--- fe80::1034:56ff:fe78:90ab ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599035ms
rtt min/avg/max/mdev = 0.027/0.040/0.412/0.044 ms
root@localhost:~# 
2022-03-21 13:37:07 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:07 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping_sut2.txt
--- 192.168.10.11 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599017ms
rtt min/avg/max/mdev = 0.027/0.036/0.105/0.005 ms
root@localhost:~# 
2022-03-21 13:37:16 - sshInstance.py - [line:94] - root - INFO - --cmd is end--
2022-03-21 13:37:16 - sshInstance.py - [line:96] - root - INFO - tail -n 3 /root/ping6_sut2.txt
--- fe80::3efd:feff:fed2:73e0 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599030ms
rtt min/avg/max/mdev = 0.027/0.036/0.120/0.006 ms
root@localhost:~# 
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut1
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 vm2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:662] - root - INFO - Successfully ping6 sut2
2022-03-21 13:37:19 - test_network_sriov_stress.py - [line:663] - root - INFO - check ---end---
------------------------------ Captured log call -------------------------------
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -s | grep enp137s0f0 | awk '{print $1;}'
INFO     root:sshInstance.py:50 0000:89:00.0

INFO     root:test_network_sriov_stress.py:111 pf_id was found: 0000:89:00.0

INFO     root:test_network_sriov_stress.py:511 format_pf_id is 0000\:89\:00.0

INFO     root:test_network_sriov_stress.py:514 pf_id_key: 89
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Mon Mar 21 12:08:54 2022 from 10.239.182.99
root@npx-sut3-ice-d-auto:~# ifconfig enp137s0f0 192.168.10.10
root@npx-sut3-ice-d-auto:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: enp137s0f0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Mon Mar 21 11:51:38 2022 from 10.239.182.99
[root@redhat8 ~]# ifconfig ens801f0 192.168.10.11
[root@redhat8 ~]# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens801f0
INFO     root:sshInstance.py:46 echo 4 > /sys/class/net/enp137s0f0/device/sriov_numvfs
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:125 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:46  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:50 89:01.0
89:01.1
89:01.2
89:01.3

INFO     root:test_network_sriov_stress.py:139 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:46 modprobe vfio-pci

INFO     root:sshInstance.py:50 
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.0
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:172 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:46 /opt/APP/utility/DPDK/dpdk-21.11/usertools/dpdk-devbind.py -b vfio-pci 89:01.1
INFO     root:sshInstance.py:50 
INFO     root:test_network_sriov_stress.py:172 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:537 lspci -Dnn | grep 89:01.1
INFO     root:sshInstance.py:46 lspci -Dnn | grep 89:01.1
INFO     root:sshInstance.py:50 0000:89:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889]

INFO     root:test_network_sriov_stress.py:549 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:46 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:50 yes

INFO     root:test_network_sriov_stress.py:198 Default network is active? yes

INFO     root:sshInstance.py:71 virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
ERROR    root:test_network_sriov_stress.py:230 Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
ERROR    root:test_network_sriov_stress.py:231 Failed to create a VM: 
INFO     root:sshInstance.py:71 virt-install --name VMtest1 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_0 --boot hd --disk patth=/home/image/uvm2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55900 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:71 Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:test_network_sriov_stress.py:233 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:71 virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
ERROR    root:test_network_sriov_stress.py:230 Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:89:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
root@npx-sut3-ice-d-auto:~# 
ERROR    root:test_network_sriov_stress.py:231 Failed to create a VM: 
INFO     root:sshInstance.py:71 virt-install --name VMtest2 --ram 4096 --cpu host --vvcpus=5 --network network=default --hostdev pci_0000_89_01_1 --boot hd --disk patth=/home/image/uvm1.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=55901 --noautoconsole
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:71 Domain creation completed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:test_network_sriov_stress.py:233 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:46 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 
ERROR    root:test_network_sriov_stress.py:250 not found IP of VMtest1
INFO     root:sshInstance.py:46 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 192.168.122.98/24

INFO     root:test_network_sriov_stress.py:245 Successfully got VMtest1 IP: 192.168.122.98/24

INFO     root:sshInstance.py:46 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:50 192.168.122.17/24

INFO     root:test_network_sriov_stress.py:245 Successfully got VMtest2 IP: 192.168.122.17/24

INFO     root:sshInstance.py:71 ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.098 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.084 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.087 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.078 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4085ms
rtt min/avg/max/mdev = 0.074/0.084/0.098/0.008 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.98
The authenticity of host '192.168.122.98 (192.168.122.98)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 yes
Warning: Permanently added '192.168.122.98' (ECDSA) to the list of known hosts.
root@192.168.122.98's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:23:16 AM EDT
  System load:  0.01               Processes:             135
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:58:30 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:341 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:355 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 192.168.10.12
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 exit
logout
Connection to 192.168.122.98 closed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:71 ping -c 5 192.168.122.17
PING 192.168.122.17 (192.168.122.17) 56(84) bytes of data.
64 bytes from 192.168.122.17: icmp_seq=1 ttl=64 time=0.097 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=2 ttl=64 time=0.079 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=3 ttl=64 time=0.079 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=4 ttl=64 time=0.067 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.17: icmp_seq=5 ttl=64 time=0.068 ms

--- 192.168.122.17 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.067/0.078/0.097/0.010 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.17
The authenticity of host '192.168.122.17 (192.168.122.17)' can't be established.
ECDSA key fingerprint is SHA256:uiL9MQ8j64kizIc2NkvuxVE93C2YBfGXw5p1QHW5dUA.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 yes
Warning: Permanently added '192.168.122.17' (ECDSA) to the list of known hosts.
root@192.168.122.17's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:25:20 AM EDT
  System load:  0.0                Processes:             138
  Usage of /:   37.4% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.17
  Swap usage:   0%

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Sun Mar 20 23:56:13 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 lspci -Dnn | grep "8086:1889" --color=never| awk '{print $1;}' [A        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [C        [K            '
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:341 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:355 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 192.168.10.13
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:302 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 1  bytes 345 (345.0 B)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 exit
logout
Connection to 192.168.122.17 closed.
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:71 ping -c 5 192.168.122.98
PING 192.168.122.98 (192.168.122.98) 56(84) bytes of data.
64 bytes from 192.168.122.98: icmp_seq=1 ttl=64 time=0.103 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=2 ttl=64 time=0.075 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=3 ttl=64 time=0.128 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=4 ttl=64 time=0.119 ms
INFO     root:sshInstance.py:71 64 bytes from 192.168.122.98: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.98 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.075/0.100/0.128/0.021 ms
root@npx-sut3-ice-d-auto:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 ssh root@192.168.122.98
root@192.168.122.98's password: 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Mon 21 Mar 2022 01:27:15 AM EDT
  System load:  0.0                Processes:             131
  Usage of /:   37.3% of 19.07GB   Users logged in:       0
  Memory usage: 4%                 IPv4 address for ens3: 192.168.122.98
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

363 updates can be installed immediately.
221 of these updates are security updates.
To see these additional updates run: apt list --upgradable

The list of available updates is more than a week old.
To check for new updates run: sudo apt update
Last login: Mon Mar 21 01:23:16 2022 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.10 > ping_sut1.txt &
[1] 1085
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 >ping6_sut1.txt &
[2] 1088
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.13 > ping_vm2.txt &
[3] 1090
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1091
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping -w 600 192.168.10.11 > ping_sut2.txt &
[5] 1093
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 >ping6_sut2.txt &
[6] 1094
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

INFO     root:test_network_sriov_stress.py:613 ---ping end -----
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_sut1.txt
--- 192.168.10.10 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599024ms
rtt min/avg/max/mdev = 0.017/0.026/0.464/0.019 ms
[1]   Done                    nohup ping -w 600 192.168.10.10 > ping_sut1.txt
[2]   Done                    nohup ping6 -I ens5 -w 600 fe80::200:ff:fe00:3300 > ping6_sut1.txt
[3]   Done                    nohup ping -w 600 192.168.10.13 > ping_vm2.txt
[4]   Done                    nohup ping6 -I ens5 -w 600 fe80::1034:56ff:fe78:90ab > ping6_vm2.txt
[5]-  Done                    nohup ping -w 600 192.168.10.11 > ping_sut2.txt
[6]+  Done                    nohup ping6 -I ens5 -w 600 fe80::3efd:feff:fed2:73e0 > ping6_sut2.txt
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_sut1.txt
--- fe80::200:ff:fe00:3300 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599040ms
rtt min/avg/max/mdev = 0.018/0.024/0.146/0.009 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_vm2.txt
--- 192.168.10.13 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599022ms
rtt min/avg/max/mdev = 0.022/0.030/0.124/0.008 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_vm2.txt
--- fe80::1034:56ff:fe78:90ab ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599035ms
rtt min/avg/max/mdev = 0.027/0.040/0.412/0.044 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping_sut2.txt
--- 192.168.10.11 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599017ms
rtt min/avg/max/mdev = 0.027/0.036/0.105/0.005 ms
root@localhost:~# 
INFO     root:sshInstance.py:94 --cmd is end--
INFO     root:sshInstance.py:96 tail -n 3 /root/ping6_sut2.txt
--- fe80::3efd:feff:fed2:73e0 ping statistics ---
586 packets transmitted, 586 received, 0% packet loss, time 599030ms
rtt min/avg/max/mdev = 0.027/0.036/0.120/0.006 ms
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:662 Successfully ping sut1
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 sut1
INFO     root:test_network_sriov_stress.py:662 Successfully ping vm2
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 vm2
INFO     root:test_network_sriov_stress.py:662 Successfully ping sut2
INFO     root:test_network_sriov_stress.py:662 Successfully ping6 sut2
INFO     root:test_network_sriov_stress.py:663 check ---end---
=============================== warnings summary ===============================
npxtester/Tests/testNics/test_iperf_client_4hour.py:70
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_iperf_client_4hour.py:70: PytestUnknownMarkWarning: Unknown pytest.mark.iperf_tcp - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.iperf_tcp

npxtester/Tests/testNics/test_iperf_client_4hour.py:108
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_iperf_client_4hour.py:108: PytestUnknownMarkWarning: Unknown pytest.mark.iperf_udp - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.iperf_udp

npxtester/Tests/testNics/test_mtu.py:69
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_mtu.py:69: PytestUnknownMarkWarning: Unknown pytest.mark.two_sut_CVL - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.two_sut_CVL

npxtester/Tests/testNics/test_mtu.py:70
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_mtu.py:70: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_mtu.py:109
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_mtu.py:109: PytestUnknownMarkWarning: Unknown pytest.mark.two_sut_CVL - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.two_sut_CVL

npxtester/Tests/testNics/test_mtu.py:110
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_mtu.py:110: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_network_sriov_stress.py:382
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_network_sriov_stress.py:382: PytestUnknownMarkWarning: Unknown pytest.mark.nicSriov5times - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSriov5times

npxtester/Tests/testNics/test_network_sriov_stress.py:501
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_network_sriov_stress.py:501: PytestUnknownMarkWarning: Unknown pytest.mark.nicSriov2hours - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSriov2hours

npxtester/Tests/testNics/test_network_sriov_stress.py:801
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_network_sriov_stress.py:801: PytestUnknownMarkWarning: Unknown pytest.mark.SriovVfIperf - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.SriovVfIperf

npxtester/Tests/testNics/test_nics.py:86
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_nics.py:86: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_nics.py:113
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_nics.py:113: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_nics.py:146
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_nics.py:146: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_nics.py:217
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_nics.py:217: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

npxtester/Tests/testNics/test_nics.py:243
  /root/.jenkins/workspace/icx-d-test-nic-sriov-stress-2hours/npxtester/Tests/testNics/test_nics.py:243: PytestUnknownMarkWarning: Unknown pytest.mark.nicSimple - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/mark.html
    @pytest.mark.nicSimple

-- Docs: https://docs.pytest.org/en/stable/warnings.html
- generated html file: file:///root/testconfig/testlogs/HtmlReport/nic_sriov2hours_case_report.html -
=========================== short test summary info ============================
FAILED npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img]
FAILED npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[uvm2.img-uvm1.img]
===== 1 failed, 16 deselected, 14 warnings, 1 error in 1255.91s (0:20:55) ======
[8mha:////4LeiMYyvaTAszhIQ10pdIeDepJ20hGjpoNTSDQ54vTlOAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIi0SCEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDyFBu95/avQGMKkS1vgAAAA==[0m[Pipeline] }
[8mha:////4I/tRoD/KV6lJ76TTEJ8vusLD5mbZiDJ1z7tZBIwhHThAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOKCQKJBqWgtN7zAJMY4se6C7eBUvIiv8QcsIlGxxWpnm3m9YRk81OwNdpp6S6GxOLjR5IWJfX91nLDjCzZMgZ1GqZPkVp9mlBw1zClKWAhYaWocB0smwlp06qEqp8hU5+jzdxRQ2vYOTyhENkfl4xcmD5vb2Aamn+evAKZhiFDut7l2hw9mQDtDvgAAAA==[0m[Pipeline] // stage
[8mha:////4CAP7WQdC2FMpNczqgZSKdPjM+Zu6Lz59I8VEE3/AlUOAAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjBB2iorXc8AITG+PEugv2haTiRXyNPxCIRMVWOyut5vmCMic4UPKycdgGzHWQXez91ORAqb1EGmRDZ1kTZopOajdosu44oyZ2MEcUsFCwdFhHygE9w0o15m6qaNBXJ07TtldQBHuDBwg1mdkk/sKYYH3tbSb8ef4KYOwYxI6h2G4+x/INOibpDcEAAAA=[0m[Pipeline] stage
[8mha:////4Db8sOlSRxZnVxb7xJBDSAteoF0PgC9lkQldzKIJFwYiAAAAph+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohUwIiYukZZOEFoQkgb/V9+UtqJE3E17kBLJSY8WLYl673eUESGE7ETjcXWY6y96ELvpiQG4vYaaBANXURNGClYoeygyNhqqYqShUVZDisJa4t1oOjRJdjIRj90GTS68px42o4Scm/u8IRMTuSkOX3LyLC99SYS/jh/ATB2CfLDbrb9/Cw+2YMO4MIAAAA=[0m[Pipeline] { (collect logs)
Stage "collect logs" skipped due to earlier failure(s)
[8mha:////4AfI3SthhIf/wHKBxkZZVuznCBOLGICd+mTaK5J1XhvpAAAAox+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIikRJR0VppeIFJjLFj3Tm2g1PxIr7GHwhEomKL1c4283zBOgY4ctBoFfWGYmvQu1HPCzOH/uo4o+ULtkyRncJG5YY7dVqw4aRgSVHCSsBGUes4GtIJtsLKu6ycJF2dU5i/g4DSdAM8oBCzOcmQvjAF2N3GLjL9PH8FMHmfoKzrT+3fkMfZ274AAAA=[0m[Pipeline] }
[8mha:////4O1G14z5oV6C9jl1Q5yIn+pZFQRmsElhyj6JiXyHA8ixAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiBB2iSmu54QUmNsaJdWdsh6TiRXyNPxCIRMUWq51t5vmCZYpw5GixNdQ5So3D4Hs7LRw4dhfPA7Z8xoYpsTcozSBZm3pGydnAnKKEhYCVocZzcmQzrEWr7qryimx1ynH6DgJKp2/wgEJM5qxi/sIYYXPtdWL6ef4KYAwhQ7nbf2r7BpKm1V++AAAA[0m[Pipeline] // stage
[8mha:////4KtBCOpIKS64HlRGbxVDHBnhT4546C6ceKSEgLxKWO63AAAAox+LCAAAAAAAAP9tjTESgjAQRT84FraWHiIUauVY2WZoPEGEGAOZXUwWofJEXs07yMiMlb/67zXv9cYyRRw5OtVYaj2lyqsu9G56auDYXgMPquGLqpgSB6tKO5Rc29OMJYvFvCzHQmNlqQqcPDnBWjfmYYpgyBVniZM7aOS+vuOJTE9lMVG+MEZsbn2dmH6dvwGMXSfIt3tBtvsA/gVtV70AAAA=[0m[Pipeline] }
[8mha:////4PVa+eOfGCB5ryE2GyokIfyPZOVvh3emQVgJTOuHuCGAAAAAox+LCAAAAAAAAP9tjbEOgjAURS8YB1dHP6IMJC7GybVh8Qsq1Fpo3sP2IUx+kb/mP0gkcfJO95zlvN5Yp4gjR6daS52nVHvVh8HNT40cu2vgUbV8UTVT4mBVZceKG3tasGKxWJblWGlsLNWBkycn2OrWPEwRDLniLHF2B43cN3c8kem5LCbKF6aI3W1oEtOv8zeAqe8FebkXZOUHjeqpjr0AAAA=[0m[Pipeline] // node
[8mha:////4OyM7hMK6utvbTfbnNkjhtaoCHWCq3+ZbQ+BNe9AvJHZAAAApB+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMKRoKBAVLRWGl5gEmOcWHfBvpBUvIiv8QciIlGx1c4083pjmSKOHJ1qLLWeUuVVF3o3PTVwbK+BB9XwRVVMiYNVpR1Kru1pxpLFYl6WY6GxslQFTp6cYK0b8zBFMOSKs8TJHTRyX9/xRKanspgoXxgjNre+Tky/zt8Axq4T5Lu9INt+AKvzzsS9AAAA[0m[Pipeline] End of Pipeline
ERROR: script returned exit code 1
Finished: FAILURE
