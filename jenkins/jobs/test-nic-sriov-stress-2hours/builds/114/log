Started by user [8mha:////4C8zTO/v0UlG+vQ5Fjm5jTf9kR93yL5yxTMP2X04T9v8AAAAlh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyWEgYu/dLi1CL9ovz8EgDKVWzSvwAAAA==[0mroot
Running in Durability level: MAX_SURVIVABILITY
[8mha:////4DOlrZhma2TKYqx8mtRBwGXVE8Xt4z3OJyo/zi+ICDdzAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4B4K7nOhvaaLmbeE3w0NEhE1GAALwLDjakw9plXgkY6XAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] node
Running on [8mha:////4GiJsi7Mya/6bg7lYfwMQTzNVpzT54TxwGFsrEp/EcRtAAAAoh+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyeEgZx/eT83ILSktQi/eTKAkMD3aLUXKBKfQCdwg2/zAAAAA==[0mcyp10-remote in /root/.jenkins/workspace/test-nic@2
[8mha:////4NUxBMzN6CtFAbQ4pdo7pH8ZuwVHigLf0SdP3FcjQTwyAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4OCB1+Up79PmV3LnMeomKr9r+JFCKkFjAfTpr2UorbLOAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gQkxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jc09154wAAAAA==[0m[Pipeline] stage
[8mha:////4N6KQN35K8CT/Pcr9a+R4oOEu4uEh3phvpB1t67zd2hmAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0ggUxsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jek7ggRwAAAAA==[0m[Pipeline] { (set args)
[8mha:////4KpTcsSlLG7yEvo1vGv2QG1z86HMYkLASFXVuKwhd7SZAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaWGsbAmNJ0AWEZb8zwLrbuWJvJp3kLiJlZNMMm+a93rDOic4UbLcG+wdZu14DKOti0+U+lugiXu6ck2YKRguzSSpM+cFJRUDS1gDKwEbgzpQdmgLbIVXD9UGhba9lFS/o4DGdQM8gYlqLiqVL8wJdvexy4Q/z18BzLEA29ce4gfg7KmOvAAAAA==[0m[Pipeline] sh
+ python /root/.jenkins/workspace/test-nic/npxtester/conf/change_args.py '{"dpdk_dir":"/opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/","vm_image_conf":{"image1":"ubuntu20.04.img","image2":"ubuntu20.04_2.img","image3":"rhel84rt.img","image4":"rhel84rt2.img","image_dir":"/home/image"},"sut_conf":{"host":"10.112.97.157","connect_switch_sut_pf":"ens787f0","pf1":"ens787f0","pf1_ipv6":"fe80::b696:91ff:fe9c:f760","os":"rehat"},"dhcp":{"ipv4":"192.168.10.10","ipv6":"fe80::b696:91ff:fe9c:f762"}}'
[8mha:////4ChDQWb8Lvr0RoXQ1L8EY4p37+Po0Q8Mb8bchs8JeqDJAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbGRNjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI6xADvU7j9Dg2gqvAAAAA==[0m[Pipeline] }
[8mha:////4J0p4zt/+On27QitkvU5TFB8M2wwWYWaAHIuYiUer4fkAAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQRbWRhjZUtoPAGyiLDkfxZYdytP5NW8g8RNrJxkknnTvNcb1jnBiZLl3mDvMGvHYxhtXXyi1N8CTdzTlWvCTMFwaSZJnTkvKKkYWMIaWAnYGNSBskNbYCu8eqg2KLTtpaT6HQU0rhvgCUxUc1GpfGFOsLuPXSb8ef4KYI6xADvU7j9J+wGOvAAAAA==[0m[Pipeline] // stage
[8mha:////4Ea3/4ZYuTM98yMZ9UntzMXOyQ2ItSOm6XAUUO4QqkITAAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQDEh2iorXc8AITG+PEugv2haTiRXyNPxCIRMVWOyut5vmCMic4UPKycdgGzHWQXez91ORAqb1EGmRDZ1kTZopOajdosu44oyZ2MEcUsFCwdFhHygE9w0o15m6qaNBXJ07TtldQBHuDBwg1mdkk/sKYYH3tbSb8ef4KYOwYxI6h2G4+x/INtuQqUcEAAAA=[0m[Pipeline] stage
[8mha:////4IJd0qxfNFkcgwUT9OFke9rxaJjwCH2G9mHJ+5FMmbLfAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+DOrAycoiUzoiJNerCCUITQtLo/zZJSSdOxNW4Ay2VmPBg2Zas93pDGQOcKBjuNHYWY2t570czJ54pdDdPmTu68pYwkte80bkhpc9rbShpWFUw2AjYamw9RYsmwU44+ZCVl2iqSwrzdhTArBrgCYWYyUmG9C1TgP19VJHwx/kLgKlPwOrDYvXyLD8BobDcwgAAAA==[0m[Pipeline] { (run silver nic case)
[8mha:////4KACpsxoNqug+yeGIE2K55MD+IyPDLfbYOrean7h1Zl/AAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggysXWsbBkaT4AJIoT5nwCRVJ7Iq3kH0cxYucXOvm3e8wXrGOBIQTOrcDAYO8O8m3RZLFMYro4ys3RhHWEkp5hQWVCvTgsKSgqWVDWsOGwUdo6iQZ1gy628y8ZJ1M05hfIdONSmH+EBFS/mJEP6whxgd5v6SPjz/BXA7BPUbfupvX8DpQJrNb4AAAA=[0m[Pipeline] sh
+ pytest /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_nics.py -m nicall -s
============================= test session starts ==============================
platform linux -- Python 3.6.8, pytest-6.2.4, py-1.11.0, pluggy-0.13.1
rootdir: /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics, configfile: pytest.ini
plugins: metadata-1.11.0, html-3.1.1
collected 3 items

../test-nic/npxtester/Tests/testNics/test_nics.py 2021-11-24 16:36:05 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_silver_Networking_ConnectivityEnableDisable
2021-11-24 16:36:05 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 16:36:05 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 16:36:05 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:36:05 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:36:05 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:36:05 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:36:05 - test_nics.py - [line:34] - root - INFO - run silver_Networking_ConnectivityEnableDisable
2021-11-24 16:36:09 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 15:55:40 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.038 ms
2021-11-24 16:36:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 16:36:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 16:36:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.007 ms
2021-11-24 16:36:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.007/0.014/0.038/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:36:21 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 16:36:29 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 16:36:36 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.043 ms
2021-11-24 16:36:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.015 ms
2021-11-24 16:36:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 16:36:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.007 ms
2021-11-24 16:36:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4086ms
rtt min/avg/max/mdev = 0.007/0.016/0.043/0.013 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:36:49 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 16:36:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 16:37:04 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.034 ms
2021-11-24 16:37:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 16:37:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.012 ms
2021-11-24 16:37:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.020 ms
2021-11-24 16:37:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.015 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4128ms
rtt min/avg/max/mdev = 0.010/0.018/0.034/0.009 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:37:16 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 16:37:24 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 16:37:31 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.034 ms
2021-11-24 16:37:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.015 ms
2021-11-24 16:37:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 16:37:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 16:37:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4104ms
rtt min/avg/max/mdev = 0.008/0.014/0.034/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:37:43 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 16:37:51 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 16:37:58 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.037 ms
2021-11-24 16:37:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.014 ms
2021-11-24 16:38:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.016 ms
2021-11-24 16:38:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.018 ms
2021-11-24 16:38:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4082ms
rtt min/avg/max/mdev = 0.008/0.018/0.037/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:38:10 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 down
[root@WW30CYP10 ~]# 
2021-11-24 16:38:18 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 up
[root@WW30CYP10 ~]# 
2021-11-24 16:38:25 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.032 ms
2021-11-24 16:38:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.015 ms
2021-11-24 16:38:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 16:38:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.019 ms
2021-11-24 16:38:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4124ms
rtt min/avg/max/mdev = 0.008/0.016/0.032/0.009 ms
[root@WW30CYP10 ~]# 
.2021-11-24 16:38:32 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 16:38:32 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown
2021-11-24 16:38:32 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_silver_ConnectivityReboot
2021-11-24 16:38:32 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 16:38:32 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:38:32 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:38:32 - test_nics.py - [line:56] - root - INFO - run silver_ConnectivityReboot
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:38:32 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:38:32 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:38:36 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 16:38:45 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.040 ms
2021-11-24 16:38:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 16:38:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 16:38:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 16:38:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4095ms
rtt min/avg/max/mdev = 0.008/0.015/0.040/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:38:47 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.200 ms
2021-11-24 16:38:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.034 ms
2021-11-24 16:38:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 16:38:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.030 ms
2021-11-24 16:38:51 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.028 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.028/0.066/0.200/0.067 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:38:54 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:38:54 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:38:54 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:38:54 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:38:58 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 16:38:45 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.035 ms
2021-11-24 16:38:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 16:39:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.011 ms
2021-11-24 16:39:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
2021-11-24 16:39:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4107ms
rtt min/avg/max/mdev = 0.008/0.014/0.035/0.011 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:39:09 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.083 ms
2021-11-24 16:39:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.047 ms
2021-11-24 16:39:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.034 ms
2021-11-24 16:39:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.039 ms
2021-11-24 16:39:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.040 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4102ms
rtt min/avg/max/mdev = 0.034/0.048/0.083/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:39:16 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:39:16 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:39:16 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:39:16 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:39:20 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 16:39:07 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.036 ms
2021-11-24 16:39:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.013 ms
2021-11-24 16:39:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 16:39:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
2021-11-24 16:39:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4121ms
rtt min/avg/max/mdev = 0.008/0.015/0.036/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:39:31 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.083 ms
2021-11-24 16:39:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.043 ms
2021-11-24 16:39:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.027 ms
2021-11-24 16:39:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.037 ms
2021-11-24 16:39:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.034 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4114ms
rtt min/avg/max/mdev = 0.027/0.044/0.083/0.021 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:39:38 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:39:38 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:39:38 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:39:39 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:39:43 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 16:39:29 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.040 ms
2021-11-24 16:39:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 16:39:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
2021-11-24 16:39:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.013 ms
2021-11-24 16:39:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.015 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4130ms
rtt min/avg/max/mdev = 0.009/0.017/0.040/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:39:54 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.074 ms
2021-11-24 16:39:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.036 ms
2021-11-24 16:39:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.034 ms
2021-11-24 16:39:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.028 ms
2021-11-24 16:39:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.039 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4123ms
rtt min/avg/max/mdev = 0.028/0.042/0.074/0.016 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:40:01 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:40:01 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:40:01 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:40:01 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:40:05 - sshInstance.py - [line:69] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket

This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register

Last login: Wed Nov 24 16:39:51 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ping -c 5 192.168.10.10
PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.035 ms
2021-11-24 16:40:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.036 ms
2021-11-24 16:40:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.014 ms
2021-11-24 16:40:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.014 ms
2021-11-24 16:40:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.011 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4077ms
rtt min/avg/max/mdev = 0.011/0.022/0.036/0.011 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:40:16 - sshInstance.py - [line:69] - root - INFO - ping6 -c 5 -I ens787f0 fe80::b696:91ff:fe9c:f762
ping6: Warning: source address might be selected on device other than ens787f0.
PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0: 56 data bytes
64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=1 ttl=64 time=0.078 ms
2021-11-24 16:40:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=2 ttl=64 time=0.032 ms
2021-11-24 16:40:18 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=3 ttl=64 time=0.035 ms
2021-11-24 16:40:19 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=4 ttl=64 time=0.034 ms
2021-11-24 16:40:20 - sshInstance.py - [line:69] - root - INFO - 64 bytes from fe80::b696:91ff:fe9c:f762%ens787f0: icmp_seq=5 ttl=64 time=0.035 ms

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4134ms
rtt min/avg/max/mdev = 0.032/0.042/0.078/0.019 ms
[root@WW30CYP10 ~]# 
.2021-11-24 16:40:23 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 16:40:23 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown
2021-11-24 16:40:23 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_gold_PI_Networking_SRIOV_CheckDevice
2021-11-24 16:40:23 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 16:40:23 - test_nics.py - [line:18] - root - INFO - this is Test_Nics setup.
2021-11-24 16:40:23 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:40:23 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:40:23 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:40:23 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:40:23 - test_nics.py - [line:74] - root - INFO - run gold_PI_Networking_SRIOV_CheckDevice
2021-11-24 16:40:26 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 16:40:26 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:40:34 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v0 192.168.10.11
2021-11-24 16:40:34 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:40:42 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v1 192.168.10.12
2021-11-24 16:40:42 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:40:50 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v2 192.168.10.13
2021-11-24 16:40:50 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:40:58 - sshInstance.py - [line:44] - root - INFO - ifconfig ens787f0v3 192.168.10.14
2021-11-24 16:40:58 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:41:06 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 16:41:10 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.038 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.007 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4117ms
rtt min/avg/max/mdev = 0.007/0.014/0.038/0.012 ms

2021-11-24 16:41:18 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v0 fe80::b696:91ff:fe9c:f762
2021-11-24 16:41:33 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v0: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4107ms


2021-11-24 16:41:41 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 16:41:45 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.041 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.012 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.016 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4092ms
rtt min/avg/max/mdev = 0.009/0.017/0.041/0.012 ms

2021-11-24 16:41:53 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v1 fe80::b696:91ff:fe9c:f762
2021-11-24 16:42:07 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v1: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4109ms


2021-11-24 16:42:15 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 16:42:19 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.036 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.008 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4092ms
rtt min/avg/max/mdev = 0.008/0.014/0.036/0.011 ms

2021-11-24 16:42:27 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v2 fe80::b696:91ff:fe9c:f762
2021-11-24 16:42:41 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v2: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4108ms


2021-11-24 16:42:49 - sshInstance.py - [line:44] - root - INFO - ping -c 5 192.168.10.10
2021-11-24 16:42:53 - sshInstance.py - [line:48] - root - INFO - PING 192.168.10.10 (192.168.10.10) 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.036 ms
64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.022 ms
64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.009 ms
64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.018 ms
64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.010 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4092ms
rtt min/avg/max/mdev = 0.009/0.019/0.036/0.009 ms

2021-11-24 16:43:01 - sshInstance.py - [line:44] - root - INFO - ping6 -c 5 -I ens787f0v3 fe80::b696:91ff:fe9c:f762
2021-11-24 16:43:15 - sshInstance.py - [line:48] - root - INFO - PING fe80::b696:91ff:fe9c:f762(fe80::b696:91ff:fe9c:f762) from :: ens787f0v3: 56 data bytes

--- fe80::b696:91ff:fe9c:f762 ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 4108ms


.2021-11-24 16:43:20 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 16:43:20 - test_nics.py - [line:28] - root - INFO - this is Test_Nics teardown


======================== 3 passed in 435.25s (0:07:15) =========================
[8mha:////4KMKnj+jwomtBZRlOM1zDNsT7NVP2UylJUBAmwQdpqOFAAAAox+LCAAAAAAAAP9tjTESwiAURH/iWNhaeggyGUvHypah8QSYIEKY/wkQSeWJvJp3EM2MlVvs7NvmPV+wjgGOFDSzCgeDsTPMu0mXxTKF4eooM0sX1hFGcooJlQX16rSgoKRgSVXDisNGYecoGtQJttzKu2ycRN2cUyjfgUNt+hEeUPFiTjKkL8wBdrepj4Q/z18BzN4nqNv9p9o3geV5574AAAA=[0m[Pipeline] }
[8mha:////4PHbOgS4fTQzlO31aLQygq6Gmyy7LbpReNAbbgHuNOsPAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOICEh2iSmu54QUmNsaJdWdsh6TiRXyNPxCIRMUWq51t5vmCZYpw5GixNdQ5So3D4Hs7LRw4dhfPA7Z8xoYpsTcozSBZm3pGydnAnKKEhYCVocZzcmQzrEWr7qryimx1ynH6DgJKp2/wgEJM5qxi/sIYYXPtdWL6ef4KYAwhQ7nbf2r7Bq/le42+AAAA[0m[Pipeline] // stage
[8mha:////4MZyk33+V/AiT4fn8n6G3pw2AKptiha+GL2FVGy8vSODAAAAph+LCAAAAAAAAP9tjTEOwjAQBM9BKWgpeYQjJKgQFa3lhheY2Bgn1l2wLyQVL+Jr/IFAJCq22llpNc8XlDnBgZKXjcM2YK6D7GLvpyYHSu0l0iAbOsuaMFN0UrtBk3XHGTWxgzmigIWCpcM6Ug7oGVaqMXdTRYO+OnGatr2CItgbPECoycwm8RfGBOtrbzPhz/NXAGPHILYMxWb3OZZvBXXnAcEAAAA=[0m[Pipeline] stage
[8mha:////4IbAYeEfzIYrbjXur3hhLHFS6T3zmMsYQQAYadAUrpZ/AAAApx+LCAAAAAAAAP9tjTEOwjAUQ3+LOrAycohUDLAgpq5RFk4QmhDSRv+Xn5R24kRcjTvQUokJD5ZtyXqvNxSR4UTsRGOx9RhrL7rQuymJgbi9BhpEQxdRE0YKVig7KDK2WqqiZGFRlsNKwtpiHSh6dAk2stEPXQaNrjwnnrajhNybOzwhkxM5aU7fMjJsb72JhD/OXwCMXYJ8t5/tMD+LD/s94rDCAAAA[0m[Pipeline] { (run gold nic sriov stress vm)
[8mha:////4FPk2mTBzwof/oyzK3/Y2W4GOSwpNdCdlxh/EpNq5ACcAAAApB+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiGigQVVrLDS8wsTFOrDtjOyQVL+Jr/IFAJCq2WO1sM88XLFOEI0eLraHOUWocBt/baeHAsbt4HrDlMzZMib1BaQbJ2tQzSs4G5hQlLASsDDWekyObYS1adVeVV2SrU47TdxBQOn2DBxRiMmcV8xfGCJtrrxPTz/NXAGPIUG53n9qHN27Iu42+AAAA[0m[Pipeline] sh
+ pytest /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py -m nicall -s
============================= test session starts ==============================
platform linux -- Python 3.6.8, pytest-6.2.4, py-1.11.0, pluggy-0.13.1
rootdir: /root/.jenkins/workspace/test-nic/npxtester/Tests/testNics, configfile: pytest.ini
plugins: metadata-1.11.0, html-3.1.1
collected 7 items / 1 deselected / 6 selected

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py 2021-11-24 16:43:21 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[ubuntu20.04.img-ubuntu20.04_2.img]
2021-11-24 16:43:21 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 16:43:21 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 16:43:21 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 16:43:21 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 16:43:21 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 16:43:21 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 16:43:21 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


2021-11-24 16:43:24 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 16:43:25 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 16:43:30 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 16:43:30 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 16:43:30 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 16:43:35 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 16:40:36 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 16:43:38 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 16:43:41 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 16:43:41 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:43:46 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 16:43:49 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 16:43:49 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 16:43:54 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 16:43:57 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 16:43:57 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 16:44:02 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 16:44:05 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 16:44:06 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:44:11 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 16:44:14 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 16:44:14 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:44:19 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 16:44:19 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 16:44:22 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 16:44:23 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 16:44:28 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 16:44:31 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 16:44:31 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 16:44:36 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 16:44:40 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:24619): [1;33mWARNING[0m **: [34m16:44:53.258[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 16:44:43 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 16:44:46 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 16:44:50 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:24716): [1;33mWARNING[0m **: [34m16:45:03.189[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 16:44:53 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 16:44:56 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 16:44:59 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:44:59 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:45:04 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 16:46:07 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:46:07 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 16:46:12 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 16:46:15 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:46:15 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 16:46:20 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 16:46:20 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 16:46:20 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 16:46:24 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.143 ms
2021-11-24 16:46:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.257 ms
2021-11-24 16:46:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.152 ms
2021-11-24 16:46:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.148 ms
2021-11-24 16:46:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.083 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4089ms
rtt min/avg/max/mdev = 0.083/0.156/0.257/0.057 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:46:36 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 16:46:44 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:46:55 AM EST
  System load:  0.18               Processes:             144
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:02:43 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:46:52 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 16:46:58 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 16:47:03 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 16:47:08 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 16:47:13 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 16:47:16 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 16:47:21 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 16:47:29 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 16:47:37 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:47:45 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:47:53 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:48:01 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:48:08 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.131 ms
2021-11-24 16:48:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.077 ms
2021-11-24 16:48:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.085 ms
2021-11-24 16:48:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.077 ms
2021-11-24 16:48:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.079 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4103ms
rtt min/avg/max/mdev = 0.077/0.089/0.131/0.024 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:48:20 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 16:48:28 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:48:39 AM EST
  System load:  0.01               Processes:             136
  Usage of /:   46.1% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:00:59 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:48:36 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 16:48:42 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 16:48:47 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 16:48:52 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 16:48:57 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 16:49:00 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 16:49:05 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 16:49:13 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 16:49:21 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:49:29 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:49:37 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:49:45 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:49:48 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 16:49:52 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=0.170 ms
2021-11-24 16:49:53 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.042 ms
2021-11-24 16:49:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.050 ms
2021-11-24 16:49:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.043 ms
2021-11-24 16:49:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.076 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4114ms
rtt min/avg/max/mdev = 0.042/0.076/0.170/0.048 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:50:03 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.028 ms
2021-11-24 16:50:04 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 16:50:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.010 ms
2021-11-24 16:50:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.028 ms
2021-11-24 16:50:07 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.009/0.017/0.028/0.009 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:50:10 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 16:50:14 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.155 ms
2021-11-24 16:50:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.083 ms
2021-11-24 16:50:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.095 ms
2021-11-24 16:50:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.096 ms
2021-11-24 16:50:18 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.078 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4104ms
rtt min/avg/max/mdev = 0.078/0.101/0.155/0.029 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:50:26 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 16:50:35 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:50:45 AM EST
  System load:  0.0                Processes:             131
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:46:55 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:50:42 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.240 ms
2021-11-24 16:50:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.035 ms
2021-11-24 16:50:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.029 ms
2021-11-24 16:50:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.031 ms
2021-11-24 16:50:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.047 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4091ms
rtt min/avg/max/mdev = 0.029/0.076/0.240/0.082 ms
root@localhost:~# 
2021-11-24 16:51:25 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:51:28 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 16:51:32 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.041 ms
2021-11-24 16:51:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 16:51:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 16:51:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.009 ms
2021-11-24 16:51:36 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.012 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4075ms
rtt min/avg/max/mdev = 0.008/0.016/0.041/0.012 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:51:42 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 16:51:44 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:51:49 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 16:51:52 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 16:51:52 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 16:51:57 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 16:52:00 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 16:52:00 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 16:52:05 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 16:52:08 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 16:52:09 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 16:52:14 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 16:52:17 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 16:52:17 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 16:52:22 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 16:52:22 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 2 time when VF is Assigned VM guest.*************************************************************


2021-11-24 16:52:25 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 16:52:26 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 16:52:31 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 16:52:31 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 16:52:31 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 16:52:36 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 16:52:39 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 16:52:42 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 16:52:42 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:52:47 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 16:52:50 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 16:52:50 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 16:52:55 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 16:52:58 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 16:52:58 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 16:53:03 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 16:53:06 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 16:53:07 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:53:12 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 16:53:15 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 16:53:15 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:53:21 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 16:53:21 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 16:53:24 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 16:53:24 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 16:53:29 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 16:53:32 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 16:53:32 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 16:53:37 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 16:53:41 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:25930): [1;33mWARNING[0m **: [34m16:53:53.907[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 16:53:44 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:25930): [1;33mWARNING[0m **: [34m16:53:53.907[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 16:53:44 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 16:53:48 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:25990): [1;33mWARNING[0m **: [34m16:54:00.900[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 16:53:51 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 16:53:54 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 16:53:58 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:26053): [1;33mWARNING[0m **: [34m16:54:10.901[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 16:54:01 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:26053): [1;33mWARNING[0m **: [34m16:54:10.901[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 16:54:01 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 16:54:05 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:26126): [1;33mWARNING[0m **: [34m16:54:17.922[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 16:54:08 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 16:54:11 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 16:54:14 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:54:14 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 16:54:19 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 16:55:22 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:55:22 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 16:55:27 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 16:55:30 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 16:55:30 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 16:55:35 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 16:55:35 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 16:55:35 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 16:55:39 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.121 ms
2021-11-24 16:55:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.087 ms
2021-11-24 16:55:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.081 ms
2021-11-24 16:55:42 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.094 ms
2021-11-24 16:55:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.127 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4082ms
rtt min/avg/max/mdev = 0.081/0.102/0.127/0.018 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:55:51 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 16:55:59 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:56:10 AM EST
  System load:  0.13               Processes:             142
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:50:45 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:56:07 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 16:56:13 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 16:56:18 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 16:56:23 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 16:56:28 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 16:56:31 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 16:56:36 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 16:56:44 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 16:56:52 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:57:00 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:57:08 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:57:16 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:57:23 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.141 ms
2021-11-24 16:57:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.151 ms
2021-11-24 16:57:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.122 ms
2021-11-24 16:57:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.130 ms
2021-11-24 16:57:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.140 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4097ms
rtt min/avg/max/mdev = 0.122/0.136/0.151/0.017 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:57:35 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 16:57:43 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 03:57:53 AM EST
  System load:  0.03               Processes:             139
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:48:40 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:57:51 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 16:57:57 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 16:58:02 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 16:58:07 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 16:58:12 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 16:58:15 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 16:58:20 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 16:58:28 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 16:58:36 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 16:58:44 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 16:58:52 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 5  bytes 1722 (1.7 KB)
        RX errors 0  dropped 3  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 16:59:00 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 16:59:03 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 16:59:07 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=4.82 ms
2021-11-24 16:59:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.075 ms
2021-11-24 16:59:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.037 ms
2021-11-24 16:59:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.048 ms
2021-11-24 16:59:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.032 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.032/1.002/4.821/1.909 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:59:18 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.171 ms
2021-11-24 16:59:19 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.036 ms
2021-11-24 16:59:20 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.042 ms
2021-11-24 16:59:21 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.029 ms
2021-11-24 16:59:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.041 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4106ms
rtt min/avg/max/mdev = 0.029/0.063/0.171/0.054 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:59:25 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 16:59:29 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.190 ms
2021-11-24 16:59:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.112 ms
2021-11-24 16:59:31 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.109 ms
2021-11-24 16:59:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.093 ms
2021-11-24 16:59:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.100 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4101ms
rtt min/avg/max/mdev = 0.093/0.120/0.190/0.037 ms
[root@WW30CYP10 ~]# 
2021-11-24 16:59:41 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 16:59:49 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:00:00 AM EST
  System load:  0.0                Processes:             128
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:56:10 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 16:59:56 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.106 ms
2021-11-24 16:59:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.044 ms
2021-11-24 16:59:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.036 ms
2021-11-24 16:59:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.037 ms
2021-11-24 17:00:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.036 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4078ms
rtt min/avg/max/mdev = 0.036/0.051/0.106/0.027 ms
root@localhost:~# 
2021-11-24 17:00:39 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:00:42 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:00:46 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.031 ms
2021-11-24 17:00:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.011 ms
2021-11-24 17:00:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.008 ms
2021-11-24 17:00:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.016 ms
2021-11-24 17:00:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.009 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4136ms
rtt min/avg/max/mdev = 0.008/0.015/0.031/0.008 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:00:56 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:00:59 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:01:04 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 17:01:07 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:01:07 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:01:12 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:01:15 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:01:15 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:01:20 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:01:23 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:01:24 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:01:29 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:01:32 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:01:32 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:01:37 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 17:01:37 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 3 time when VF is Assigned VM guest.*************************************************************


2021-11-24 17:01:40 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:01:40 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 17:01:45 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 17:01:45 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 17:01:45 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 17:01:50 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:01:53 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:01:56 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:01:56 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:02:01 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:02:04 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:02:05 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:02:10 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:02:13 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:02:13 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:02:18 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:02:21 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:02:21 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:02:26 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:02:29 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:02:30 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:02:35 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:02:35 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:02:38 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:02:38 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:02:43 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:02:46 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:02:46 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:02:51 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:02:55 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:27904): [1;33mWARNING[0m **: [34m17:03:08.489[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:02:58 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:27904): [1;33mWARNING[0m **: [34m17:03:08.489[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:02:58 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:03:02 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:27963): [1;33mWARNING[0m **: [34m17:03:15.528[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:03:05 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:03:08 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:03:12 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:28028): [1;33mWARNING[0m **: [34m17:03:25.528[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:03:15 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:28028): [1;33mWARNING[0m **: [34m17:03:25.528[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:03:15 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:03:19 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:28097): [1;33mWARNING[0m **: [34m17:03:32.520[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:03:22 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:03:25 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:03:28 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:03:28 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:03:33 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:04:36 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:04:37 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 17:04:42 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 17:04:45 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:04:45 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 17:04:50 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 17:04:50 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 17:04:50 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 17:04:54 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.103 ms
2021-11-24 17:04:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.087 ms
2021-11-24 17:04:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.071 ms
2021-11-24 17:04:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.070 ms
2021-11-24 17:04:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.120 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4123ms
rtt min/avg/max/mdev = 0.070/0.090/0.120/0.020 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:05:06 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:05:14 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:05:25 AM EST
  System load:  0.29               Processes:             144
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:00:01 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:05:22 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:05:28 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:05:33 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:05:38 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:05:43 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 17:05:46 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:05:51 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:05:59 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 17:06:07 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:06:15 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:06:23 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1038 (1.0 KB)
        RX errors 0  dropped 3  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:06:31 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:06:38 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.223 ms
2021-11-24 17:06:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.077 ms
2021-11-24 17:06:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.088 ms
2021-11-24 17:06:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.108 ms
2021-11-24 17:06:42 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.074 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4137ms
rtt min/avg/max/mdev = 0.074/0.114/0.223/0.055 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:06:50 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 17:06:58 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:07:09 AM EST
  System load:  0.01               Processes:             140
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 03:57:54 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:07:06 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:07:12 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:07:17 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:07:22 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:07:27 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 17:07:30 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:07:35 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:07:43 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 17:07:51 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:07:59 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:08:07 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:08:15 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:08:18 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 17:08:22 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=8.79 ms
2021-11-24 17:08:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.044 ms
2021-11-24 17:08:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.033 ms
2021-11-24 17:08:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.062 ms
2021-11-24 17:08:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.040 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4086ms
rtt min/avg/max/mdev = 0.033/1.794/8.794/3.500 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:08:33 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.146 ms
2021-11-24 17:08:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.055 ms
2021-11-24 17:08:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 17:08:36 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.043 ms
2021-11-24 17:08:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.040 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4080ms
rtt min/avg/max/mdev = 0.038/0.064/0.146/0.041 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:08:40 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:08:44 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.110 ms
2021-11-24 17:08:45 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.091 ms
2021-11-24 17:08:46 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.097 ms
2021-11-24 17:08:47 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.073 ms
2021-11-24 17:08:48 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.085 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4076ms
rtt min/avg/max/mdev = 0.073/0.091/0.110/0.013 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:08:56 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:09:04 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:09:15 AM EST
  System load:  0.0                Processes:             129
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:05:25 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:09:11 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.237 ms
2021-11-24 17:09:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.033 ms
2021-11-24 17:09:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.032 ms
2021-11-24 17:09:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.029 ms
2021-11-24 17:09:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.043 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4103ms
rtt min/avg/max/mdev = 0.029/0.074/0.237/0.081 ms
root@localhost:~# 
2021-11-24 17:09:54 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:09:57 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:10:01 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.032 ms
2021-11-24 17:10:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.013 ms
2021-11-24 17:10:03 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.016 ms
2021-11-24 17:10:04 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.027 ms
2021-11-24 17:10:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.011 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.011/0.019/0.032/0.009 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:10:11 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:10:13 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:10:18 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 17:10:21 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:10:22 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:10:27 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:10:30 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:10:30 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:10:35 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:10:38 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:10:38 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:10:43 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:10:46 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:10:47 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:10:52 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 17:10:52 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 4 time when VF is Assigned VM guest.*************************************************************


2021-11-24 17:10:55 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:10:55 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 17:11:00 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 17:11:00 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 17:11:00 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 17:11:05 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:11:08 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:11:11 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:11:11 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:11:16 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:11:19 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:11:19 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:11:24 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:11:27 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:11:28 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:11:33 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:11:36 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:11:36 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:11:41 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:11:44 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:11:45 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:11:50 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:11:50 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:11:53 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:11:53 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:11:58 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:12:01 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:12:01 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:12:06 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:12:10 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:29348): [1;33mWARNING[0m **: [34m17:12:23.394[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:13 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:29348): [1;33mWARNING[0m **: [34m17:12:23.394[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:13 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:12:17 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:29415): [1;33mWARNING[0m **: [34m17:12:30.408[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:12:20 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:23 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:12:27 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:29477): [1;33mWARNING[0m **: [34m17:12:40.425[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:30 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:29477): [1;33mWARNING[0m **: [34m17:12:40.425[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:30 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:12:34 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:29542): [1;33mWARNING[0m **: [34m17:12:47.438[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:12:37 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:12:40 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:12:43 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:12:43 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:12:48 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:13:51 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:13:51 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 17:13:56 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 17:13:59 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:13:59 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 17:14:05 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 17:14:05 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 17:14:05 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 17:14:09 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.151 ms
2021-11-24 17:14:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.100 ms
2021-11-24 17:14:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.098 ms
2021-11-24 17:14:12 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.094 ms
2021-11-24 17:14:13 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.094 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4096ms
rtt min/avg/max/mdev = 0.094/0.107/0.151/0.023 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:14:21 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:14:29 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:14:38 AM EST
  System load:  0.03               Processes:             139
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:09:15 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:14:37 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:14:43 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:14:48 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:14:53 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:14:58 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 17:15:01 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:15:06 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:15:14 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 17:15:22 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:15:30 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:15:38 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:15:46 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:15:53 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.139 ms
2021-11-24 17:15:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.086 ms
2021-11-24 17:15:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.103 ms
2021-11-24 17:15:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.121 ms
2021-11-24 17:15:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.092 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4109ms
rtt min/avg/max/mdev = 0.086/0.108/0.139/0.020 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:16:05 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 17:16:13 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:16:24 AM EST
  System load:  0.02               Processes:             138
  Usage of /:   46.2% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:07:09 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:16:21 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:16:27 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:16:32 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:16:37 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:16:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 17:16:45 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:16:50 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:16:58 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 17:17:06 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:17:14 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:17:22 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1026 (1.0 KB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:17:30 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:17:33 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 17:17:37 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=4.38 ms
2021-11-24 17:17:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.042 ms
2021-11-24 17:17:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.032 ms
2021-11-24 17:17:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.044 ms
2021-11-24 17:17:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.030 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4059ms
rtt min/avg/max/mdev = 0.030/0.905/4.379/1.737 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:17:48 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.209 ms
2021-11-24 17:17:49 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.049 ms
2021-11-24 17:17:50 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 17:17:51 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.038 ms
2021-11-24 17:17:52 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.033 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4119ms
rtt min/avg/max/mdev = 0.033/0.073/0.209/0.068 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:17:55 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:17:59 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.105 ms
2021-11-24 17:18:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.135 ms
2021-11-24 17:18:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.077 ms
2021-11-24 17:18:02 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.074 ms
2021-11-24 17:18:03 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.073 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4113ms
rtt min/avg/max/mdev = 0.073/0.092/0.135/0.027 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:18:11 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:18:19 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:18:28 AM EST
  System load:  0.0                Processes:             129
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:14:39 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:18:26 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.167 ms
2021-11-24 17:18:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.039 ms
2021-11-24 17:18:28 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.038 ms
2021-11-24 17:18:29 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.033 ms
2021-11-24 17:18:30 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.035 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4088ms
rtt min/avg/max/mdev = 0.033/0.062/0.167/0.052 ms
root@localhost:~# 
2021-11-24 17:19:09 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:19:12 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:19:16 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.034 ms
2021-11-24 17:19:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.010 ms
2021-11-24 17:19:18 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.024 ms
2021-11-24 17:19:19 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.011 ms
2021-11-24 17:19:20 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.008 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4083ms
rtt min/avg/max/mdev = 0.008/0.017/0.034/0.010 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:19:26 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:19:28 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:19:33 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 17:19:36 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:19:37 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:19:42 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:19:45 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:19:45 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:19:50 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:19:53 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:19:53 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:19:58 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:20:01 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:20:01 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:20:06 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 17:20:06 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 5 time when VF is Assigned VM guest.*************************************************************


2021-11-24 17:20:09 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:20:10 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 17:20:15 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 17:20:15 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 17:20:15 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 17:20:20 - sshInstance.py - [line:89] - root - INFO - ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:20:23 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:20:26 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:20:26 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:20:31 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:20:34 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:20:34 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:20:39 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:20:42 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:20:42 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:20:47 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:20:50 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:20:51 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:20:56 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:20:59 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:21:00 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:21:05 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:21:05 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:21:08 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:21:08 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:21:13 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:21:16 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:21:16 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:21:21 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:21:25 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:30760): [1;33mWARNING[0m **: [34m17:21:38.060[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:28 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:30760): [1;33mWARNING[0m **: [34m17:21:38.060[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:28 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:21:32 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:30820): [1;33mWARNING[0m **: [34m17:21:45.077[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:21:35 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:38 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:21:42 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:30882): [1;33mWARNING[0m **: [34m17:21:55.085[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:45 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:30882): [1;33mWARNING[0m **: [34m17:21:55.085[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:45 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:21:49 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:30943): [1;33mWARNING[0m **: [34m17:22:02.097[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:21:52 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:21:55 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:21:58 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:21:58 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:22:03 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:23:06 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:23:06 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 17:23:11 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 17:23:14 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:23:14 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 17:23:19 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 17:23:19 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 17:23:19 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 192.168.122.248
2021-11-24 17:23:23 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.126 ms
2021-11-24 17:23:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.079 ms
2021-11-24 17:23:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.097 ms
2021-11-24 17:23:26 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.082 ms
2021-11-24 17:23:27 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.077 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4132ms
rtt min/avg/max/mdev = 0.077/0.092/0.126/0.019 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:23:35 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:23:43 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:23:53 AM EST
  System load:  0.04               Processes:             140
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:18:29 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:23:51 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:23:57 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:24:02 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:24:07 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:24:12 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 17:24:15 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:24:20 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:24:28 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 17:24:36 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:24:44 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:24:52 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1026 (1.0 KB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:25:00 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:25:07 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.199 ms
2021-11-24 17:25:08 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.080 ms
2021-11-24 17:25:09 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.069 ms
2021-11-24 17:25:10 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.088 ms
2021-11-24 17:25:11 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.087 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4079ms
rtt min/avg/max/mdev = 0.069/0.104/0.199/0.048 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:25:19 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 17:25:27 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:25:38 AM EST
  System load:  0.02               Processes:             138
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:16:24 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:25:35 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:25:41 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:25:46 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:25:51 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:25:56 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 17:25:59 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:26:04 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:26:12 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 17:26:20 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:26:28 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:26:36 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1038 (1.0 KB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:26:44 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:26:47 - test_network_sriov_stress.py - [line:428] - root - INFO - Ping two vms IP from SUT:
2021-11-24 17:26:51 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.12
PING 192.168.10.12 (192.168.10.12) 56(84) bytes of data.
64 bytes from 192.168.10.12: icmp_seq=1 ttl=64 time=9.21 ms
2021-11-24 17:26:52 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=2 ttl=64 time=0.065 ms
2021-11-24 17:26:53 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=3 ttl=64 time=0.035 ms
2021-11-24 17:26:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=4 ttl=64 time=0.048 ms
2021-11-24 17:26:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.12: icmp_seq=5 ttl=64 time=0.033 ms

--- 192.168.10.12 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4093ms
rtt min/avg/max/mdev = 0.033/1.877/9.208/3.665 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:27:02 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=3.98 ms
2021-11-24 17:27:03 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.059 ms
2021-11-24 17:27:04 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.072 ms
2021-11-24 17:27:05 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.039 ms
2021-11-24 17:27:06 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.040 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4088ms
rtt min/avg/max/mdev = 0.039/0.838/3.982/1.572 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:27:09 - test_network_sriov_stress.py - [line:436] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:27:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.130 ms
2021-11-24 17:27:14 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.095 ms
2021-11-24 17:27:15 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.089 ms
2021-11-24 17:27:16 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.080 ms
2021-11-24 17:27:17 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.087 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4082ms
rtt min/avg/max/mdev = 0.080/0.096/0.130/0.018 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:27:25 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:27:33 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:27:44 AM EST
  System load:  0.0                Processes:             129
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:23:54 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:27:40 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.10.13
PING 192.168.10.13 (192.168.10.13) 56(84) bytes of data.
64 bytes from 192.168.10.13: icmp_seq=1 ttl=64 time=0.181 ms
2021-11-24 17:27:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=2 ttl=64 time=0.048 ms
2021-11-24 17:27:42 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=3 ttl=64 time=0.047 ms
2021-11-24 17:27:43 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=4 ttl=64 time=0.036 ms
2021-11-24 17:27:44 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.13: icmp_seq=5 ttl=64 time=0.037 ms

--- 192.168.10.13 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4096ms
rtt min/avg/max/mdev = 0.036/0.069/0.181/0.055 ms
root@localhost:~# 
2021-11-24 17:28:24 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:28:27 - test_network_sriov_stress.py - [line:444] - root - INFO - ping VMtest2 IP from VMtest1
2021-11-24 17:28:31 - sshInstance.py - [line:69] - root - INFO - ping -c 5 -I 192.168.10.11 192.168.10.10
PING 192.168.10.10 (192.168.10.10) from 192.168.10.11 : 56(84) bytes of data.
64 bytes from 192.168.10.10: icmp_seq=1 ttl=64 time=0.033 ms
2021-11-24 17:28:32 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=2 ttl=64 time=0.017 ms
2021-11-24 17:28:33 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=3 ttl=64 time=0.014 ms
2021-11-24 17:28:34 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=4 ttl=64 time=0.021 ms
2021-11-24 17:28:35 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.10.10: icmp_seq=5 ttl=64 time=0.014 ms

--- 192.168.10.10 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4117ms
rtt min/avg/max/mdev = 0.014/0.019/0.033/0.009 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:28:41 - sshInstance.py - [line:44] - root - INFO - echo 0 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:28:43 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:28:48 - test_network_sriov_stress.py - [line:237] - root - INFO - Successfully removed VFs from PF.
2021-11-24 17:28:51 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:28:52 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:28:57 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:29:00 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:29:00 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:29:05 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:29:08 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:29:08 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:29:13 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:29:16 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:29:16 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:29:21 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
.2021-11-24 17:29:21 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 17:29:24 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:29:24 - sshInstance.py - [line:48] - root - INFO - 

2021-11-24 17:29:29 - test_network_sriov_stress.py - [line:249] - root - ERROR - Failed to shut down the VM VMtest2
2021-11-24 17:29:32 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:29:32 - sshInstance.py - [line:48] - root - INFO - 

2021-11-24 17:29:37 - test_network_sriov_stress.py - [line:249] - root - ERROR - Failed to shut down the VM VMtest1
2021-11-24 17:29:37 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 17:29:37 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 17:29:37 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[ubuntu20.04.img-rhel84rt.img]
2021-11-24 17:29:37 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 17:29:37 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 17:29:37 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 17:29:37 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 17:29:37 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 17:29:37 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 17:29:37 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


2021-11-24 17:29:40 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:29:41 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0

2021-11-24 17:29:46 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0

2021-11-24 17:29:46 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0

2021-11-24 17:29:46 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 17:29:51 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 16:43:34 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:29:54 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:29:57 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:29:57 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:30:02 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:30:05 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:30:05 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:30:10 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:30:13 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:30:13 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:30:18 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:30:21 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:30:22 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:30:27 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:30:30 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:30:31 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:30:36 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:30:36 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:30:39 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:30:39 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:30:44 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:30:47 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:30:47 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:30:52 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:30:56 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32874): [1;33mWARNING[0m **: [34m17:31:09.261[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:30:59 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32874): [1;33mWARNING[0m **: [34m17:31:09.261[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:30:59 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:31:03 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32932): [1;33mWARNING[0m **: [34m17:31:16.266[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:31:06 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:31:09 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:31:13 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:32998): [1;33mWARNING[0m **: [34m17:31:26.295[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:31:16 - test_network_sriov_stress.py - [line:202] - root - ERROR - Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:32998): [1;33mWARNING[0m **: [34m17:31:26.295[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
2021-11-24 17:31:16 - test_network_sriov_stress.py - [line:203] - root - ERROR - Failed to create a VM: 
2021-11-24 17:31:20 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:33068): [1;33mWARNING[0m **: [34m17:31:33.299[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:31:23 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:31:26 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:31:29 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:31:29 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:31:34 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:32:37 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:32:37 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 17:32:42 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 17:32:45 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:32:45 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:32:50 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:33:53 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:33:54 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:33:59 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:35:02 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:35:02 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:35:07 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:36:10 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:36:10 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:36:15 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:37:18 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:37:18 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:37:23 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:38:26 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:38:26 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:38:31 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:39:31 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 192.168.122.181
2021-11-24 17:39:31 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 
2021-11-24 17:39:35 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.136 ms
2021-11-24 17:39:36 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.079 ms
2021-11-24 17:39:37 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.069 ms
2021-11-24 17:39:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.067 ms
2021-11-24 17:39:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.066 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.066/0.083/0.136/0.027 ms
[root@WW30CYP10 ~]# 
2021-11-24 17:39:47 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 17:39:55 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:40:05 AM EST
  System load:  0.0                Processes:             131
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:27:44 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 17:40:03 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 17:40:09 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 17:40:14 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 17:40:19 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 17:40:24 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 17:40:27 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 17:40:32 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 17:40:40 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 17:40:48 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 17:40:56 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 17:41:04 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 17:41:12 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 17:41:19 - sshInstance.py - [line:69] - root - INFO - ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]# 
F2021-11-24 17:41:22 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 17:41:25 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:41:26 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:41:31 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:41:34 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:41:34 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:41:39 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 17:41:42 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:41:43 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:41:48 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:41:51 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:41:52 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:41:57 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:41:57 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 17:41:57 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 17:41:57 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[rhel84rt.img-rhel84rt2.img]
2021-11-24 17:41:57 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 17:41:57 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 17:41:57 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 17:41:57 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 17:41:57 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 17:41:57 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 17:41:57 - test_network_sriov_stress.py - [line:349] - root - INFO - 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


2021-11-24 17:42:00 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:42:00 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 17:42:05 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 17:42:05 - test_network_sriov_stress.py - [line:357] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

2021-11-24 17:42:05 - test_network_sriov_stress.py - [line:360] - root - INFO - pf_id_key: 31
2021-11-24 17:42:10 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 17:29:50 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:42:13 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:42:16 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:42:16 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:42:21 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:42:24 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:42:24 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:42:29 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:42:32 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:42:32 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:42:37 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:42:40 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:42:41 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:42:46 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:42:49 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:42:50 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:42:55 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:42:55 - test_network_sriov_stress.py - [line:381] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:42:58 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:42:58 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:43:03 - test_network_sriov_stress.py - [line:392] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:43:06 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:43:06 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:43:11 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:43:15 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5900  --noautoconsole

** (process:34339): [1;33mWARNING[0m **: [34m17:43:28.309[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:43:18 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:43:21 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:43:25 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59011 --noautoconsole

** (process:34391): [1;33mWARNING[0m **: [34m17:43:38.327[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:43:28 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:43:31 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:43:34 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:43:34 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:43:39 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:44:42 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:44:42 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:44:47 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:45:50 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:45:50 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:45:55 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:46:59 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:46:59 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:47:04 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:48:07 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:48:07 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:48:12 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:49:15 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:49:15 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:49:20 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 17:50:23 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:50:23 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:50:28 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:51:31 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:51:31 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:51:36 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:52:39 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:52:39 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:52:44 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:53:47 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:53:47 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:53:52 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:54:55 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:54:55 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:55:00 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:56:04 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:56:04 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:56:09 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 17:57:09 - test_network_sriov_stress.py - [line:409] - root - INFO - ip of VM1: 
2021-11-24 17:57:09 - test_network_sriov_stress.py - [line:410] - root - INFO - ip of VM1: 
2021-11-24 17:57:13 - sshInstance.py - [line:69] - root - INFO - ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]# 
F2021-11-24 17:57:16 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 17:57:19 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 17:57:20 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 17:57:25 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 17:57:28 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 17:57:28 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 17:57:33 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 17:57:36 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 17:57:37 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 17:57:42 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 17:57:45 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 17:57:45 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 17:57:50 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 17:57:50 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 17:57:50 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 17:57:50 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[ubuntu20.04.img-ubuntu20.04_2.img]
2021-11-24 17:57:50 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 17:57:50 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 17:57:50 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 17:57:50 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 17:57:50 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 17:57:50 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 17:57:53 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 17:57:54 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 17:57:59 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 17:57:59 - test_network_sriov_stress.py - [line:467] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 17:57:59 - test_network_sriov_stress.py - [line:470] - root - INFO - pf_id_key: 31
2021-11-24 17:58:04 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 17:42:09 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 17:58:07 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 17:58:10 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 17:58:10 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:58:15 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 17:58:18 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 17:58:18 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 17:58:23 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 17:58:26 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 17:58:26 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 17:58:31 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 17:58:34 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 17:58:35 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:58:40 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:58:43 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 17:58:43 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:58:48 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 17:58:48 - test_network_sriov_stress.py - [line:493] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:58:51 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 17:58:51 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 17:58:56 - test_network_sriov_stress.py - [line:504] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 17:58:59 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 17:58:59 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 17:59:04 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 17:59:08 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:36243): [1;33mWARNING[0m **: [34m17:59:21.453[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:59:11 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:59:14 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 17:59:18 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/ubuntu20.04_2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port==5901 --noautoconsole

** (process:36286): [1;33mWARNING[0m **: [34m17:59:31.467[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 17:59:21 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 17:59:24 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 17:59:27 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 17:59:27 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 17:59:32 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:00:35 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:00:36 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 18:00:41 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 18:00:44 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:00:44 - sshInstance.py - [line:48] - root - INFO - 192.168.122.248/24

2021-11-24 18:00:49 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest2 IP: 192.168.122.248/24

2021-11-24 18:00:53 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.108 ms
2021-11-24 18:00:54 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.087 ms
2021-11-24 18:00:55 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.102 ms
2021-11-24 18:00:56 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.098 ms
2021-11-24 18:00:57 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.081 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4107ms
rtt min/avg/max/mdev = 0.081/0.095/0.108/0.011 ms
[root@WW30CYP10 ~]# 
2021-11-24 18:01:05 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 18:01:13 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 05:01:23 AM EST
  System load:  0.14               Processes:             141
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:40:06 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 18:01:21 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 18:01:27 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 18:01:32 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 18:01:37 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 18:01:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 18:01:45 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 18:01:50 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 18:01:58 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 18:02:06 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 18:02:14 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 18:02:22 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 3  bytes 1026 (1.0 KB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 8  bytes 696 (696.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 18:02:30 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 18:02:37 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.248
PING 192.168.122.248 (192.168.122.248) 56(84) bytes of data.
64 bytes from 192.168.122.248: icmp_seq=1 ttl=64 time=0.159 ms
2021-11-24 18:02:38 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=2 ttl=64 time=0.098 ms
2021-11-24 18:02:39 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=3 ttl=64 time=0.089 ms
2021-11-24 18:02:40 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=4 ttl=64 time=0.075 ms
2021-11-24 18:02:41 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.248: icmp_seq=5 ttl=64 time=0.093 ms

--- 192.168.122.248 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4120ms
rtt min/avg/max/mdev = 0.075/0.102/0.159/0.031 ms
[root@WW30CYP10 ~]# 
2021-11-24 18:02:49 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.248
root@192.168.122.248's password: 
2021-11-24 18:02:57 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 05:03:07 AM EST
  System load:  0.03               Processes:             139
  Usage of /:   46.3% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.248
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:25:38 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 18:03:05 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 18:03:11 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 18:03:16 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 18:03:21 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 18:03:26 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.13
root@localhost:~# 
2021-11-24 18:03:29 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 18:03:34 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 18:03:42 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ab
root@localhost:~# 
2021-11-24 18:03:50 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 18:03:58 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 18:04:06 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.13  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ab  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ab  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 18:04:14 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.248 closed.
[root@WW30CYP10 ~]# 
2021-11-24 18:04:21 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.148 ms
2021-11-24 18:04:22 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.089 ms
2021-11-24 18:04:23 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.097 ms
2021-11-24 18:04:24 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.128 ms
2021-11-24 18:04:25 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.082 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4133ms
rtt min/avg/max/mdev = 0.082/0.108/0.148/0.028 ms
[root@WW30CYP10 ~]# 
2021-11-24 18:04:33 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 18:04:41 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 05:04:51 AM EST
  System load:  0.0                Processes:             140
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%                 IPv4 address for ens5: 192.168.10.12

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 05:01:24 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 18:04:49 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 3600 192.168.10.11 > ping_sut1.txt &
[1] 1052
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:04:57 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 3600 fe80::b696:91ff:fe9c:f760 >ping6_sut1.txt &
[2] 1055
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:05:05 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 3600 192.168.10.13 > ping_vm2.txt &
[3] 1057
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:05:13 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 3600 fe80::1034:56ff:fe78:90ab >ping6_vm2.txt &
[4] 1058
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:05:21 - sshInstance.py - [line:89] - root - INFO - nohup ping -w 3600 192.168.10.10 > ping_sut2.txt &
[5] 1059
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:05:29 - sshInstance.py - [line:89] - root - INFO - nohup ping6 -I ens5 -w 3600 fe80::b696:91ff:fe9c:f762 >ping6_sut2.txt &
[6] 1060
root@localhost:~# 
root@localhost:~# nohup: ignoring input and redirecting stderr to stdout

2021-11-24 18:05:32 - test_network_sriov_stress.py - [line:567] - root - INFO - ---ping end -----
2021-11-24 18:05:37 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
.2021-11-24 18:05:40 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 18:05:43 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 18:05:44 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 18:05:49 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 18:05:52 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 18:05:52 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 18:05:57 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 18:06:00 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 18:06:01 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 18:06:06 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 18:06:09 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 18:06:09 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 18:06:14 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 18:06:14 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 18:06:14 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 18:06:14 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[ubuntu20.04.img-rhel84rt.img]
2021-11-24 18:06:14 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 18:06:14 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 18:06:14 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 18:06:14 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 18:06:14 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 18:06:14 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 18:06:17 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 18:06:18 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:06:23 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:06:23 - test_network_sriov_stress.py - [line:467] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:06:23 - test_network_sriov_stress.py - [line:470] - root - INFO - pf_id_key: 31
2021-11-24 18:06:28 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 17:58:03 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 18:06:31 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 18:06:34 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 18:06:34 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:06:39 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 18:06:42 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 18:06:42 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 18:06:47 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 18:06:50 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 18:06:50 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 18:06:55 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 18:06:58 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 18:06:59 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:07:04 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 18:07:07 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 18:07:07 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:07:12 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 18:07:12 - test_network_sriov_stress.py - [line:493] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 18:07:15 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 18:07:15 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 18:07:20 - test_network_sriov_stress.py - [line:504] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 18:07:23 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 18:07:24 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 18:07:29 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 18:07:33 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:37212): [1;33mWARNING[0m **: [34m18:07:45.660[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 18:07:36 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 18:07:39 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 18:07:43 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:37259): [1;33mWARNING[0m **: [34m18:07:55.638[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 18:07:46 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 18:07:49 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 18:07:52 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:07:52 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:07:57 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:09:00 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:09:00 - sshInstance.py - [line:48] - root - INFO - 192.168.122.181/24

2021-11-24 18:09:05 - test_network_sriov_stress.py - [line:216] - root - INFO - Successfully got VMtest1 IP: 192.168.122.181/24

2021-11-24 18:09:08 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:09:08 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:09:13 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:10:16 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:10:16 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:10:21 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:11:24 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:11:24 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:11:29 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:12:32 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:12:32 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:12:37 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:13:40 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:13:40 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:13:45 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:14:48 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:14:48 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:14:53 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:15:57 - sshInstance.py - [line:69] - root - INFO - ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.149 ms
2021-11-24 18:15:58 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.104 ms
2021-11-24 18:15:59 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.093 ms
2021-11-24 18:16:00 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.100 ms
2021-11-24 18:16:01 - sshInstance.py - [line:69] - root - INFO - 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.102 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4132ms
rtt min/avg/max/mdev = 0.093/0.109/0.149/0.023 ms
[root@WW30CYP10 ~]# 
2021-11-24 18:16:10 - sshInstance.py - [line:89] - root - INFO - ssh root@192.168.122.181
root@192.168.122.181's password: 
2021-11-24 18:16:18 - sshInstance.py - [line:89] - root - INFO - 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 05:16:29 AM EST
  System load:  0.0                Processes:             127
  Usage of /:   46.5% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 05:04:52 2021 from 192.168.122.1
root@localhost:~# 
2021-11-24 18:16:26 - sshInstance.py - [line:89] - root - INFO - lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
2021-11-24 18:16:32 - test_network_sriov_stress.py - [line:306] - root - INFO - successfully got vf pci id of vm1: 0000:00:05.0
2021-11-24 18:16:37 - sshInstance.py - [line:89] - root - INFO - ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
2021-11-24 18:16:42 - test_network_sriov_stress.py - [line:317] - root - INFO - Successfully got vf device name of vm1: ens5
2021-11-24 18:16:47 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 192.168.10.12
root@localhost:~# 
2021-11-24 18:16:50 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens5
2021-11-24 18:16:55 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 down
root@localhost:~# 
2021-11-24 18:17:03 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
2021-11-24 18:17:11 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5 up
root@localhost:~# 
2021-11-24 18:17:19 - sshInstance.py - [line:89] - root - INFO - nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
2021-11-24 18:17:27 - sshInstance.py - [line:89] - root - INFO - ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
2021-11-24 18:17:35 - sshInstance.py - [line:89] - root - INFO - exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
2021-11-24 18:17:42 - sshInstance.py - [line:69] - root - INFO - ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]# 
F2021-11-24 18:17:45 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 18:17:48 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 18:17:49 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 18:17:54 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 18:17:57 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 18:17:57 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 18:18:02 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 18:18:05 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 18:18:06 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 18:18:11 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 18:18:14 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 18:18:14 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 18:18:19 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 18:18:19 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 18:18:19 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================
2021-11-24 18:18:19 - NicTestFixture.py - [line:28] - root - INFO - Starting to run test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[rhel84rt.img-rhel84rt2.img]
2021-11-24 18:18:19 - NicTestFixture.py - [line:29] - root - INFO - setup log for testing in the fixture class fbefore
2021-11-24 18:18:19 - test_network_sriov_stress.py - [line:30] - root - INFO - SSH SUT and setup configurations in the setup function.
2021-11-24 18:18:19 - transport.py - [line:1819] - paramiko.transport - INFO - Connected (version 2.0, client OpenSSH_8.0)
2021-11-24 18:18:19 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (publickey) failed.
2021-11-24 18:18:19 - transport.py - [line:1819] - paramiko.transport - INFO - Authentication (password) successful!
2021-11-24 18:18:19 - sshInstance.py - [line:28] - root - INFO - SSH on SUT: 10.112.97.157
2021-11-24 18:18:22 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
2021-11-24 18:18:23 - sshInstance.py - [line:48] - root - INFO - 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:18:28 - test_network_sriov_stress.py - [line:80] - root - INFO - pf_id was found: 0000:31:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:18:28 - test_network_sriov_stress.py - [line:467] - root - INFO - format_pf_id is 0000\:31\:00.0
0000:31:01.2
0000:31:01.3

2021-11-24 18:18:28 - test_network_sriov_stress.py - [line:470] - root - INFO - pf_id_key: 31
2021-11-24 18:18:33 - sshInstance.py - [line:89] - root - INFO - Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 18:06:27 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
2021-11-24 18:18:36 - test_network_sriov_stress.py - [line:268] - root - INFO - Successfully assigned ip to ethernet: ens787f0
2021-11-24 18:18:39 - sshInstance.py - [line:44] - root - INFO - echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
2021-11-24 18:18:39 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:18:44 - test_network_sriov_stress.py - [line:95] - root - INFO - Successfully Virtualized PF to VFs.
2021-11-24 18:18:47 - sshInstance.py - [line:44] - root - INFO -  lspci | grep "Virtual" | awk '{print $1;}'list
2021-11-24 18:18:47 - sshInstance.py - [line:48] - root - INFO - 31:01.0
31:01.1
31:01.2
31:01.3

2021-11-24 18:18:52 - test_network_sriov_stress.py - [line:109] - root - INFO - Succssfully Gotten vf_id list:

2021-11-24 18:18:55 - sshInstance.py - [line:44] - root - INFO -  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
2021-11-24 18:18:55 - sshInstance.py - [line:48] - root - INFO - vfio_pci

2021-11-24 18:19:00 - test_network_sriov_stress.py - [line:162] - root - INFO - Successfuly modeprobe vfio-pci
2021-11-24 18:19:03 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
2021-11-24 18:19:03 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:19:08 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 18:19:11 - sshInstance.py - [line:44] - root - INFO - /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
2021-11-24 18:19:12 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:19:17 - test_network_sriov_stress.py - [line:141] - root - INFO - Successfuly bound VF to vfio-pci
2021-11-24 18:19:17 - test_network_sriov_stress.py - [line:493] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 18:19:20 - sshInstance.py - [line:44] - root - INFO - lspci -Dnn | grep 31:01.1
2021-11-24 18:19:20 - sshInstance.py - [line:48] - root - INFO - 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

2021-11-24 18:19:25 - test_network_sriov_stress.py - [line:504] - root - INFO - Successfully get vf device id: 8086:1889
2021-11-24 18:19:28 - sshInstance.py - [line:44] - root - INFO - virsh net-info default | grep "Active" | awk '{print $2;}'
2021-11-24 18:19:28 - sshInstance.py - [line:48] - root - INFO - yes

2021-11-24 18:19:33 - test_network_sriov_stress.py - [line:170] - root - INFO - Default network is active? yes

2021-11-24 18:19:37 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5900  --noautoconsole

** (process:38380): [1;33mWARNING[0m **: [34m18:19:50.346[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 18:19:40 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 18:19:43 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest1
2021-11-24 18:19:47 - sshInstance.py - [line:69] - root - INFO - virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59011 --noautoconsole

** (process:38422): [1;33mWARNING[0m **: [34m18:20:00.336[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
2021-11-24 18:19:50 - sshInstance.py - [line:69] - root - INFO - Domain creation completed.
[root@WW30CYP10 ~]# 
2021-11-24 18:19:53 - test_network_sriov_stress.py - [line:205] - root - INFO - Successfully created a VM: VMtest2
2021-11-24 18:19:56 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:19:56 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:20:01 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:21:04 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:21:04 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:21:09 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:22:12 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:22:13 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:22:18 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:23:21 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:23:21 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:23:26 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:24:29 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:24:29 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:24:34 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:25:37 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:25:37 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:25:42 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest1
2021-11-24 18:26:45 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:26:45 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:26:50 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:27:53 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:27:53 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:27:58 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:29:01 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:29:01 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:29:06 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:30:09 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:30:09 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:30:14 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:31:17 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:31:17 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:31:22 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:32:25 - sshInstance.py - [line:44] - root - INFO - virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
2021-11-24 18:32:26 - sshInstance.py - [line:48] - root - INFO - 
2021-11-24 18:32:31 - test_network_sriov_stress.py - [line:221] - root - ERROR - not found IP of VMtest2
2021-11-24 18:33:35 - sshInstance.py - [line:69] - root - INFO - ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]# 
F2021-11-24 18:33:38 - test_network_sriov_stress.py - [line:52] - root - INFO - this is the teardown of Test_Network_SRIOV_Stress.
2021-11-24 18:33:41 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest2
2021-11-24 18:33:42 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 destroyed


2021-11-24 18:33:47 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest2
2021-11-24 18:33:50 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest2
2021-11-24 18:33:50 - sshInstance.py - [line:48] - root - INFO - Domain VMtest2 has been undefined


2021-11-24 18:33:55 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest2
2021-11-24 18:33:58 - sshInstance.py - [line:44] - root - INFO - virsh destroy VMtest1
2021-11-24 18:33:59 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 destroyed


2021-11-24 18:34:04 - test_network_sriov_stress.py - [line:247] - root - INFO - Successfully shut down the VM: VMtest1
2021-11-24 18:34:07 - sshInstance.py - [line:44] - root - INFO - virsh undefine VMtest1
2021-11-24 18:34:07 - sshInstance.py - [line:48] - root - INFO - Domain VMtest1 has been undefined


2021-11-24 18:34:12 - test_network_sriov_stress.py - [line:254] - root - INFO - Successfully removed the VM: VMtest1
2021-11-24 18:34:12 - sshInstance.py - [line:39] - root - INFO - closing ssh client on SUT
2021-11-24 18:34:12 - test_network_sriov_stress.py - [line:57] - root - INFO - =============================================Finished run the test case===============================================


=================================== FAILURES ===================================
_ Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[ubuntu20.04.img-rhel84rt.img] _

self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>
vm1_image = 'ubuntu20.04.img', vm2_image = 'rhel84rt.img'

    @pytest.mark.nicall
    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest(self, vm1_image, vm2_image):
        for j in range(1, 6):
            logging.info("\n\n********************************************************Stress Disable and Enable for {} time when VF is Assigned VM guest.*************************************************************\n\n".format(j))
            # get pf id: 0000:xx:xx.x
            pf_id, status= self.get_pf_id(self.pf_name)
            # transfer pf_id to 0000\:00\:00.0 format
            if not pf_id:
                assert 200 == status
            else:
                pf_id_format = pf_id.replace(":", "\\:", 2)
                logging.info("format_pf_id is {}".format(pf_id_format))
                # get the number key of pf_id
                pf_id_key = pf_id.split(":")[1]
                logging.info("pf_id_key: {}".format(pf_id_key))
                # assign IP to PF in SUT and sut2
                pf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+1))
                dhcp_ipv4 = self.dhcp_info["ipv4"]
                assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
                # virtulize the pf to vfs
                assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
                # get vf ids
                vf_id_list, status=self.get_vf_ids(pf_id_key)
                if status == 200:
                    # modprobe vfio-pci
                    assert 200 == self.modprobe("vfio-pci")
                    # bind vf with vfio-pci
                    host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                    assert 200 == status
                else:
                    assert 200 == status
                # get vF device ida
                #tmp code
                cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
                logging.info(cmd)
                vf_device_id = ""
                vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
                if vf_device_id_rs:
                    st = False
                    vf_device_id = None
                    for one in vf_device_id_rs.split(" "):
                        one = " "+one+" "
                        if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":")> -1:
                            vf_device_id = one.replace("[", "").replace("]","").strip()
                    if not vf_device_id: assert 200 == 400,"vf_device_id is not found"
                    logging.info("Successfully get vf device id: {}".format(vf_device_id))
                    assert 200 == 200
                else:
                    logging.error("Fail to get vf device id.")
                    assert 200==400
    
                #set network
                status = self.default_network_isActive(self.defult_network)
                if status == "no":
                    assert 200 == self.start_default_network(self.defult_network)
    
                # start VMs
                assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
                assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
                # get VM ssh IP
                vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
                vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
                logging.info("ip of VM1: {}".format(vm1_ip))
                logging.info("ip of VM1: {}".format(vm2_ip))
    
                #ssh VM1 to set VF
                vm1_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+2))
                vm2_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+3))
                assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm1_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
                vm1_vf_name, vm1_ipv6, status = self.ssh_vm_set_VF(vm1_ip, vf_device_id, vm1_vf_ip, "1234567890ac")
                self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
    
                assert 200 == status, "vm1 vf related settings failed"
>               assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm2_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
E               AssertionError: ssh vm failed,the reason may be is password is error,vm ip isimpassability
E               assert 200 == 400
E                +  where 400 = <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>>(<libs.commons.sshInstance.sshInstance object at 0x7f6294cf0ac8>, <paramiko.Channel 0 (open) window=2095842 -> <paramiko.Transport at 0x94c4cfd0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, '')
E                +    where <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>.on_session_ssh
E                +    and   <libs.commons.sshInstance.sshInstance object at 0x7f6294cf0ac8> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>.ssh_sut
E                +    and   <paramiko.Channel 0 (open) window=2095842 -> <paramiko.Transport at 0x94c4cfd0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294cf0b70>.session

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py:422: AssertionError
------------------------------ Captured log call -------------------------------
INFO     root:test_network_sriov_stress.py:349 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
INFO     root:sshInstance.py:48 0000:31:00.0

INFO     root:test_network_sriov_stress.py:80 pf_id was found: 0000:31:00.0

INFO     root:test_network_sriov_stress.py:357 format_pf_id is 0000\:31\:00.0

INFO     root:test_network_sriov_stress.py:360 pf_id_key: 31
INFO     root:sshInstance.py:89 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 16:43:34 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens787f0
INFO     root:sshInstance.py:44 echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:95 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:44  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:48 31:01.0
31:01.1
31:01.2
31:01.3

INFO     root:test_network_sriov_stress.py:109 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:44  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
INFO     root:sshInstance.py:48 vfio_pci

INFO     root:test_network_sriov_stress.py:162 Successfuly modeprobe vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:381 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:44 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:48 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

INFO     root:test_network_sriov_stress.py:392 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:44 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:48 yes

INFO     root:test_network_sriov_stress.py:170 Default network is active? yes

INFO     root:sshInstance.py:69 virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32874): [1;33mWARNING[0m **: [34m17:31:09.261[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
ERROR    root:test_network_sriov_stress.py:202 Failed to create a VM: virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32874): [1;33mWARNING[0m **: [34m17:31:09.261[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.0 is in use by driver QEMU, domain VMtest1
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest1
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
ERROR    root:test_network_sriov_stress.py:203 Failed to create a VM: 
INFO     root:sshInstance.py:69 virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:32932): [1;33mWARNING[0m **: [34m17:31:16.266[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:69 virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:32998): [1;33mWARNING[0m **: [34m17:31:26.295[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
ERROR    root:test_network_sriov_stress.py:202 Failed to create a VM: virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:32998): [1;33mWARNING[0m **: [34m17:31:26.295[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
ERROR    Requested operation is not valid: PCI device 0000:31:01.1 is in use by driver QEMU, domain VMtest2
Domain installation does not appear to have been successful.
If it was, you can restart your domain by running:
  virsh --connect qemu:///system start VMtest2
otherwise, please restart your installation.
[root@WW30CYP10 ~]# 
ERROR    root:test_network_sriov_stress.py:203 Failed to create a VM: 
INFO     root:sshInstance.py:69 virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:33068): [1;33mWARNING[0m **: [34m17:31:33.299[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 192.168.122.181/24

INFO     root:test_network_sriov_stress.py:216 Successfully got VMtest1 IP: 192.168.122.181/24

INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:test_network_sriov_stress.py:409 ip of VM1: 192.168.122.181
INFO     root:test_network_sriov_stress.py:410 ip of VM1: 
INFO     root:sshInstance.py:69 ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.136 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.079 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.069 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.067 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.066 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4110ms
rtt min/avg/max/mdev = 0.066/0.083/0.136/0.027 ms
[root@WW30CYP10 ~]# 
INFO     root:sshInstance.py:89 ssh root@192.168.122.181
root@192.168.122.181's password: 
INFO     root:sshInstance.py:89 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 04:40:05 AM EST
  System load:  0.0                Processes:             131
  Usage of /:   46.4% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 04:27:44 2021 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:89 lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:306 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:89 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:317 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:89 ifconfig ens5 192.168.10.12
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:89 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:89 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:89 exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
INFO     root:sshInstance.py:69 ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]#
---------------------------- Captured log teardown -----------------------------
INFO     root:test_network_sriov_stress.py:52 this is the teardown of Test_Network_SRIOV_Stress.
INFO     root:sshInstance.py:44 virsh destroy VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest2
INFO     root:sshInstance.py:44 virsh undefine VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest2
INFO     root:sshInstance.py:44 virsh destroy VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest1
INFO     root:sshInstance.py:44 virsh undefine VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest1
INFO     root:sshInstance.py:39 closing ssh client on SUT
INFO     root:test_network_sriov_stress.py:57 =============================================Finished run the test case===============================================
_ Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[rhel84rt.img-rhel84rt2.img] _

self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>
vm1_image = 'rhel84rt.img', vm2_image = 'rhel84rt2.img'

    @pytest.mark.nicall
    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest(self, vm1_image, vm2_image):
        for j in range(1, 6):
            logging.info("\n\n********************************************************Stress Disable and Enable for {} time when VF is Assigned VM guest.*************************************************************\n\n".format(j))
            # get pf id: 0000:xx:xx.x
            pf_id, status= self.get_pf_id(self.pf_name)
            # transfer pf_id to 0000\:00\:00.0 format
            if not pf_id:
                assert 200 == status
            else:
                pf_id_format = pf_id.replace(":", "\\:", 2)
                logging.info("format_pf_id is {}".format(pf_id_format))
                # get the number key of pf_id
                pf_id_key = pf_id.split(":")[1]
                logging.info("pf_id_key: {}".format(pf_id_key))
                # assign IP to PF in SUT and sut2
                pf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+1))
                dhcp_ipv4 = self.dhcp_info["ipv4"]
                assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
                # virtulize the pf to vfs
                assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
                # get vf ids
                vf_id_list, status=self.get_vf_ids(pf_id_key)
                if status == 200:
                    # modprobe vfio-pci
                    assert 200 == self.modprobe("vfio-pci")
                    # bind vf with vfio-pci
                    host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                    assert 200 == status
                else:
                    assert 200 == status
                # get vF device ida
                #tmp code
                cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
                logging.info(cmd)
                vf_device_id = ""
                vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
                if vf_device_id_rs:
                    st = False
                    vf_device_id = None
                    for one in vf_device_id_rs.split(" "):
                        one = " "+one+" "
                        if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":")> -1:
                            vf_device_id = one.replace("[", "").replace("]","").strip()
                    if not vf_device_id: assert 200 == 400,"vf_device_id is not found"
                    logging.info("Successfully get vf device id: {}".format(vf_device_id))
                    assert 200 == 200
                else:
                    logging.error("Fail to get vf device id.")
                    assert 200==400
    
                #set network
                status = self.default_network_isActive(self.defult_network)
                if status == "no":
                    assert 200 == self.start_default_network(self.defult_network)
    
                # start VMs
                assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
                assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
                # get VM ssh IP
                vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
                vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
                logging.info("ip of VM1: {}".format(vm1_ip))
                logging.info("ip of VM1: {}".format(vm2_ip))
    
                #ssh VM1 to set VF
                vm1_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+2))
                vm2_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                               str(int(self.dhcp_info["ipv4"].split(".")[3])+3))
>               assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm1_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
E               AssertionError: ssh vm failed,the reason may be is password is error,vm ip isimpassability
E               assert 200 == 400
E                +  where 400 = <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>>(<libs.commons.sshInstance.sshInstance object at 0x7f62941d5fd0>, <paramiko.Channel 0 (open) window=2096634 -> <paramiko.Transport at 0x941d5208 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, '')
E                +    where <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>.on_session_ssh
E                +    and   <libs.commons.sshInstance.sshInstance object at 0x7f62941d5fd0> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>.ssh_sut
E                +    and   <paramiko.Channel 0 (open) window=2096634 -> <paramiko.Transport at 0x941d5208 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f62941d52e8>.session

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py:417: AssertionError
------------------------------ Captured log call -------------------------------
INFO     root:test_network_sriov_stress.py:349 

********************************************************Stress Disable and Enable for 1 time when VF is Assigned VM guest.*************************************************************


INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
INFO     root:sshInstance.py:48 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:80 pf_id was found: 0000:31:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:357 format_pf_id is 0000\:31\:00.0
0000:31:01.0
0000:31:01.1
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:360 pf_id_key: 31
INFO     root:sshInstance.py:89 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 17:29:50 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens787f0
INFO     root:sshInstance.py:44 echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:95 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:44  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:48 31:01.0
31:01.1
31:01.2
31:01.3

INFO     root:test_network_sriov_stress.py:109 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:44  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
INFO     root:sshInstance.py:48 vfio_pci

INFO     root:test_network_sriov_stress.py:162 Successfuly modeprobe vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:381 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:44 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:48 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

INFO     root:test_network_sriov_stress.py:392 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:44 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:48 yes

INFO     root:test_network_sriov_stress.py:170 Default network is active? yes

INFO     root:sshInstance.py:69 virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5900  --noautoconsole

** (process:34339): [1;33mWARNING[0m **: [34m17:43:28.309[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:69 virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59011 --noautoconsole

** (process:34391): [1;33mWARNING[0m **: [34m17:43:38.327[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:test_network_sriov_stress.py:409 ip of VM1: 
INFO     root:test_network_sriov_stress.py:410 ip of VM1: 
INFO     root:sshInstance.py:69 ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]#
---------------------------- Captured log teardown -----------------------------
INFO     root:test_network_sriov_stress.py:52 this is the teardown of Test_Network_SRIOV_Stress.
INFO     root:sshInstance.py:44 virsh destroy VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest2
INFO     root:sshInstance.py:44 virsh undefine VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest2
INFO     root:sshInstance.py:44 virsh destroy VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest1
INFO     root:sshInstance.py:44 virsh undefine VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest1
INFO     root:sshInstance.py:39 closing ssh client on SUT
INFO     root:test_network_sriov_stress.py:57 =============================================Finished run the test case===============================================
_ Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[ubuntu20.04.img-rhel84rt.img] _

self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>
vm1_image = 'ubuntu20.04.img', vm2_image = 'rhel84rt.img'

    @pytest.mark.nicall
    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest(self,vm1_image, vm2_image):
    
        pf_id, status = self.get_pf_id(self.pf_name)
        # transfer pf_id to 0000\:00\:00.0 format
        if not pf_id:
            assert 200 == status
        else:
            pf_id_format = pf_id.replace(":", "\\:", 2)
            logging.info("format_pf_id is {}".format(pf_id_format))
            # get the number key of pf_id
            pf_id_key = pf_id.split(":")[1]
            logging.info("pf_id_key: {}".format(pf_id_key))
            # assign IP to PF in SUT and sut2
            pf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 1))
            dhcp_ipv4 = self.dhcp_info["ipv4"]
            assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
    
            # virtulize the pf to vfs
            assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
            # get vf ids
            vf_id_list, status = self.get_vf_ids(pf_id_key)
    
            if status == 200:
                # modprobe vfio-pci
                assert 200 == self.modprobe("vfio-pci")
                # bind vf with vfio-pci
                host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                assert 200 == status
            else:
                assert 200 == status
            # get vF device id
    
            cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
            logging.info(cmd)
            vf_device_id = ""
            vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
            if vf_device_id_rs:
                st = False
                vf_device_id = None
                for one in vf_device_id_rs.split(" "):
                    one = " "+one+" "
                    if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":")> -1:
                        vf_device_id = one.replace("[", "").replace("]","").strip()
                if not vf_device_id: assert 200 == 400,"vf_device_id is not found"
                logging.info("Successfully get vf device id: {}".format(vf_device_id))
                assert 200 == 200
            else:
                logging.error("Fail to get vf device id.")
                assert 200==400
            # set network
            status = self.default_network_isActive(self.defult_network)
            if status == "no":
                assert 200 == self.start_default_network(self.defult_network)
    
            # start VMs
            assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
            assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
            # get VM ssh IP
            vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
            vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
    
            # ssh VM1 to set VF
            #ssh VM1 to set VF
            vm1_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 2))
            vm2_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 3))
            assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm1_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
            vm1_vf_name, vm1_ipv6, status = self.ssh_vm_set_VF(vm1_ip, vf_device_id, vm1_vf_ip, "1234567890ac")
            self.ssh_sut.run_ssh_cmd(self.session, "exit\n")
    
            assert 200 == status, "vm1 vf related settings failed"
>           assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm2_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
E           AssertionError: ssh vm failed,the reason may be is password is error,vm ip isimpassability
E           assert 200 == 400
E            +  where 400 = <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>>(<libs.commons.sshInstance.sshInstance object at 0x7f629409b978>, <paramiko.Channel 0 (open) window=2096319 -> <paramiko.Transport at 0x9409b1d0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, '')
E            +    where <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>.on_session_ssh
E            +    and   <libs.commons.sshInstance.sshInstance object at 0x7f629409b978> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>.ssh_sut
E            +    and   <paramiko.Channel 0 (open) window=2096319 -> <paramiko.Transport at 0x9409b1d0 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f629409b240>.session

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py:532: AssertionError
------------------------------ Captured log call -------------------------------
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
INFO     root:sshInstance.py:48 0000:31:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:80 pf_id was found: 0000:31:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:467 format_pf_id is 0000\:31\:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:470 pf_id_key: 31
INFO     root:sshInstance.py:89 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 17:58:03 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens787f0
INFO     root:sshInstance.py:44 echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:95 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:44  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:48 31:01.0
31:01.1
31:01.2
31:01.3

INFO     root:test_network_sriov_stress.py:109 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:44  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
INFO     root:sshInstance.py:48 vfio_pci

INFO     root:test_network_sriov_stress.py:162 Successfuly modeprobe vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:493 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:44 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:48 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

INFO     root:test_network_sriov_stress.py:504 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:44 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:48 yes

INFO     root:test_network_sriov_stress.py:170 Default network is active? yes

INFO     root:sshInstance.py:69 virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/ubuntu20.04.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59900 --noautoconsole

** (process:37212): [1;33mWARNING[0m **: [34m18:07:45.660[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:69 virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5901  --noautoconsole

** (process:37259): [1;33mWARNING[0m **: [34m18:07:55.638[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 192.168.122.181/24

INFO     root:test_network_sriov_stress.py:216 Successfully got VMtest1 IP: 192.168.122.181/24

INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:69 ping -c 5 192.168.122.181
PING 192.168.122.181 (192.168.122.181) 56(84) bytes of data.
64 bytes from 192.168.122.181: icmp_seq=1 ttl=64 time=0.149 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=2 ttl=64 time=0.104 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=3 ttl=64 time=0.093 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=4 ttl=64 time=0.100 ms
INFO     root:sshInstance.py:69 64 bytes from 192.168.122.181: icmp_seq=5 ttl=64 time=0.102 ms

--- 192.168.122.181 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4132ms
rtt min/avg/max/mdev = 0.093/0.109/0.149/0.023 ms
[root@WW30CYP10 ~]# 
INFO     root:sshInstance.py:89 ssh root@192.168.122.181
root@192.168.122.181's password: 
INFO     root:sshInstance.py:89 
Welcome to Ubuntu 20.04 LTS (GNU/Linux 5.4.0-26-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
  System information as of Wed 24 Nov 2021 05:16:29 AM EST
  System load:  0.0                Processes:             127
  Usage of /:   46.5% of 19.07GB   Users logged in:       0
  Memory usage: 30%                IPv4 address for ens3: 192.168.122.181
  Swap usage:   0%

366 updates can be installed immediately.
222 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Last login: Wed Nov 24 05:04:52 2021 from 192.168.122.1
root@localhost:~# 
INFO     root:sshInstance.py:89 lspci -Dnn | grep "8086:1889" | awk '{print $1;}'
0000:00:05.0
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:306 successfully got vf pci id of vm1: 0000:00:05.0
INFO     root:sshInstance.py:89 ls /sys/bus/pci/devices/0000\:00\:05.0/net/ --color=never
ens5
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:317 Successfully got vf device name of vm1: ens5
INFO     root:sshInstance.py:89 ifconfig ens5 192.168.10.12
root@localhost:~# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens5
INFO     root:sshInstance.py:89 ifconfig ens5 down
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5 hw ether 1234567890ac
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5 up
root@localhost:~# 
INFO     root:sshInstance.py:89 nmcli device connect ens5
Command 'nmcli' not found, but can be installed with:
apt install network-manager
root@localhost:~# 
INFO     root:sshInstance.py:89 ifconfig ens5
ens5: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.12  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::1034:56ff:fe78:90ac  prefixlen 64  scopeid 0x20<link>
        ether 12:34:56:78:90:ac  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 9  bytes 766 (766.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
root@localhost:~# 
INFO     root:sshInstance.py:89 exit
logout
Connection to 192.168.122.181 closed.
[root@WW30CYP10 ~]# 
INFO     root:sshInstance.py:69 ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]#
---------------------------- Captured log teardown -----------------------------
INFO     root:test_network_sriov_stress.py:52 this is the teardown of Test_Network_SRIOV_Stress.
INFO     root:sshInstance.py:44 virsh destroy VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest2
INFO     root:sshInstance.py:44 virsh undefine VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest2
INFO     root:sshInstance.py:44 virsh destroy VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest1
INFO     root:sshInstance.py:44 virsh undefine VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest1
INFO     root:sshInstance.py:39 closing ssh client on SUT
INFO     root:test_network_sriov_stress.py:57 =============================================Finished run the test case===============================================
_ Test_Network_SRIOV_Stress.test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[rhel84rt.img-rhel84rt2.img] _

self = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>
vm1_image = 'rhel84rt.img', vm2_image = 'rhel84rt2.img'

    @pytest.mark.nicall
    @pytest.mark.usefixtures("fbefore")
    @pytest.mark.parametrize('vm1_image, vm2_image', vm_image)
    def test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest(self,vm1_image, vm2_image):
    
        pf_id, status = self.get_pf_id(self.pf_name)
        # transfer pf_id to 0000\:00\:00.0 format
        if not pf_id:
            assert 200 == status
        else:
            pf_id_format = pf_id.replace(":", "\\:", 2)
            logging.info("format_pf_id is {}".format(pf_id_format))
            # get the number key of pf_id
            pf_id_key = pf_id.split(":")[1]
            logging.info("pf_id_key: {}".format(pf_id_key))
            # assign IP to PF in SUT and sut2
            pf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 1))
            dhcp_ipv4 = self.dhcp_info["ipv4"]
            assert 200 == self.assign_ip_ehternet(self.session, pf_ip, self.pf_name)
    
            # virtulize the pf to vfs
            assert 200 == self.virtualize_pf_to_vfs(self.pf_name)
            # get vf ids
            vf_id_list, status = self.get_vf_ids(pf_id_key)
    
            if status == 200:
                # modprobe vfio-pci
                assert 200 == self.modprobe("vfio-pci")
                # bind vf with vfio-pci
                host_dev_id_list, status = self.bind_vf_to_vfio_pci(vf_id_list)
                assert 200 == status
            else:
                assert 200 == status
            # get vF device id
    
            cmd = "lspci -Dnn | grep %s" % (vf_id_list[1])
            logging.info(cmd)
            vf_device_id = ""
            vf_device_id_rs, error = self.ssh_sut.ssh_exec_cmd(self.client, cmd)
            if vf_device_id_rs:
                st = False
                vf_device_id = None
                for one in vf_device_id_rs.split(" "):
                    one = " "+one+" "
                    if one.find(" [") > -1 and one.find("] ") > -1 and one.find(":")> -1:
                        vf_device_id = one.replace("[", "").replace("]","").strip()
                if not vf_device_id: assert 200 == 400,"vf_device_id is not found"
                logging.info("Successfully get vf device id: {}".format(vf_device_id))
                assert 200 == 200
            else:
                logging.error("Fail to get vf device id.")
                assert 200==400
            # set network
            status = self.default_network_isActive(self.defult_network)
            if status == "no":
                assert 200 == self.start_default_network(self.defult_network)
    
            # start VMs
            assert 200 == self.create_vm(vm1_image, host_dev_id_list[0], self.vm1_name, "5900")
            assert 200 == self.create_vm(vm2_image, host_dev_id_list[1], self.vm2_name, "5901")
            # get VM ssh IP
            vm1_ip, status1 = self.get_vm_ip(self.vm1_name)
            vm2_ip, status2 = self.get_vm_ip(self.vm2_name)
    
            # ssh VM1 to set VF
            #ssh VM1 to set VF
            vm1_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 2))
            vm2_vf_ip = "192.168.{}.{}".format(self.dhcp_info["ipv4"].split(".")[2],
                                           str(int(self.dhcp_info["ipv4"].split(".")[3]) + 3))
>           assert 200 == self.on_session_ssh(self.ssh_sut, self.session, vm1_ip),"ssh vm failed,the reason may be is password is error,vm ip isimpassability"
E           AssertionError: ssh vm failed,the reason may be is password is error,vm ip isimpassability
E           assert 200 == 400
E            +  where 400 = <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>>(<libs.commons.sshInstance.sshInstance object at 0x7f6294c677b8>, <paramiko.Channel 0 (open) window=2096634 -> <paramiko.Transport at 0x94165630 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>>, '')
E            +    where <bound method Test_Network_SRIOV_Stress.on_session_ssh of <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>.on_session_ssh
E            +    and   <libs.commons.sshInstance.sshInstance object at 0x7f6294c677b8> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>.ssh_sut
E            +    and   <paramiko.Channel 0 (open) window=2096634 -> <paramiko.Transport at 0x94165630 (cipher aes128-ctr, 128 bits) (active; 1 open channel(s))>> = <Tests.testNics.test_network_sriov_stress.Test_Network_SRIOV_Stress object at 0x7f6294165eb8>.session

../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py:527: AssertionError
------------------------------ Captured log call -------------------------------
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -s | grep ens787f0 | awk '{print $1;}'
INFO     root:sshInstance.py:48 0000:31:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:80 pf_id was found: 0000:31:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:467 format_pf_id is 0000\:31\:00.0
0000:31:01.2
0000:31:01.3

INFO     root:test_network_sriov_stress.py:470 pf_id_key: 31
INFO     root:sshInstance.py:89 Activate the web console with: systemctl enable --now cockpit.socket
This system is not registered to Red Hat Insights. See https://cloud.redhat.com/
To register this system, run: insights-client --register
Last login: Wed Nov 24 18:06:27 2021 from 10.239.129.147
[root@WW30CYP10 ~]# ifconfig ens787f0 192.168.10.11
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:268 Successfully assigned ip to ethernet: ens787f0
INFO     root:sshInstance.py:44 echo 4 > /sys/class/net/ens787f0/device/sriov_numvfs
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:95 Successfully Virtualized PF to VFs.
INFO     root:sshInstance.py:44  lspci | grep "Virtual" | awk '{print $1;}'list
INFO     root:sshInstance.py:48 31:01.0
31:01.1
31:01.2
31:01.3

INFO     root:test_network_sriov_stress.py:109 Succssfully Gotten vf_id list:

INFO     root:sshInstance.py:44  modinfo vfio-pci | grep "vfio_pci" | awk '{ print $2;}'
INFO     root:sshInstance.py:48 vfio_pci

INFO     root:test_network_sriov_stress.py:162 Successfuly modeprobe vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.0
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:sshInstance.py:44 /opt/APP/utility/DPDK_install/dpdk-stable-20.11.1/usertools/dpdk-devbind.py -b vfio-pci 31:01.1
INFO     root:sshInstance.py:48 
INFO     root:test_network_sriov_stress.py:141 Successfuly bound VF to vfio-pci
INFO     root:test_network_sriov_stress.py:493 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:44 lspci -Dnn | grep 31:01.1
INFO     root:sshInstance.py:48 0000:31:01.1 Ethernet controller [0200]: Intel Corporation Ethernet Adaptive Virtual Function [8086:1889] (rev 02)

INFO     root:test_network_sriov_stress.py:504 Successfully get vf device id: 8086:1889
INFO     root:sshInstance.py:44 virsh net-info default | grep "Active" | awk '{print $2;}'
INFO     root:sshInstance.py:48 yes

INFO     root:test_network_sriov_stress.py:170 Default network is active? yes

INFO     root:sshInstance.py:69 virt-install --name VMtest1 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_0 --boot hd --disk path=/home//image/rhel84rt.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=5900  --noautoconsole

** (process:38380): [1;33mWARNING[0m **: [34m18:19:50.346[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest1
INFO     root:sshInstance.py:69 virt-install --name VMtest2 --ram 4096 --cpu host --vcpus=5 ---network network=default --hostdev pci_0000_31_01_1 --boot hd --disk path=/home//image/rhel84rt2.img,size=50,format=qcow2 --graphics vnc,listen=0.0.0.0,port=59011 --noautoconsole

** (process:38422): [1;33mWARNING[0m **: [34m18:20:00.336[0m: Entity http://pcisig.com/pci/1B36/0100 referenced but not defined
WARNING  No operating system detected, VM performance may suffer. Specify an OS with --os-variant for optimal results.

Starting install...
INFO     root:sshInstance.py:69 Domain creation completed.
[root@WW30CYP10 ~]# 
INFO     root:test_network_sriov_stress.py:205 Successfully created a VM: VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest1 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest1
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:44 virsh domifaddr VMtest2 | grep '192.168' | awk '{print $4;}'
INFO     root:sshInstance.py:48 
ERROR    root:test_network_sriov_stress.py:221 not found IP of VMtest2
INFO     root:sshInstance.py:69 ping -c 5 
Usage: ping [-aAbBdDfhLnOqrRUvV64] [-c count] [-i interval] [-I interface]
            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]
            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]
            [-w deadline] [-W timeout] [hop1 ...] destination
Usage: ping -6 [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]
             [-l preload] [-m mark] [-M pmtudisc_option]
             [-N nodeinfo_option] [-p pattern] [-Q tclass] [-s packetsize]
             [-S sndbuf] [-t ttl] [-T timestamp_option] [-w deadline]
             [-W timeout] destination
[root@WW30CYP10 ~]#
---------------------------- Captured log teardown -----------------------------
INFO     root:test_network_sriov_stress.py:52 this is the teardown of Test_Network_SRIOV_Stress.
INFO     root:sshInstance.py:44 virsh destroy VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest2
INFO     root:sshInstance.py:44 virsh undefine VMtest2
INFO     root:sshInstance.py:48 Domain VMtest2 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest2
INFO     root:sshInstance.py:44 virsh destroy VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 destroyed


INFO     root:test_network_sriov_stress.py:247 Successfully shut down the VM: VMtest1
INFO     root:sshInstance.py:44 virsh undefine VMtest1
INFO     root:sshInstance.py:48 Domain VMtest1 has been undefined


INFO     root:test_network_sriov_stress.py:254 Successfully removed the VM: VMtest1
INFO     root:sshInstance.py:39 closing ssh client on SUT
INFO     root:test_network_sriov_stress.py:57 =============================================Finished run the test case===============================================
=========================== short test summary info ============================
FAILED ../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[ubuntu20.04.img-rhel84rt.img]
FAILED ../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressDisableEnableFor5TimesWhenVFIsAssigned_VM_Guest[rhel84rt.img-rhel84rt2.img]
FAILED ../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[ubuntu20.04.img-rhel84rt.img]
FAILED ../test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py::Test_Network_SRIOV_Stress::test_PI_Networking_SRIOV_StressTrafficBetweenPFVFAndTestClientFor2Hours_VM_Guest[rhel84rt.img-rhel84rt2.img]
============ 4 failed, 2 passed, 1 deselected in 6650.71s (1:50:50) ============
Exception in thread Thread-9:
Traceback (most recent call last):
  File "/usr/lib64/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/usr/lib64/python3.6/threading.py", line 864, in run
    self._target(*self._args, **self._kwargs)
  File "/root/.jenkins/workspace/test-nic/npxtester/Tests/testNics/test_network_sriov_stress.py", line 596, in check_log
    st, code = check_log_rs(dt["filename"], "packet loss", vm1_client)
NameError: name 'vm1_client' is not defined

[8mha:////4LYnTL2kHEK3xk4r0Ko1+Seo0jzleqkNHqW+48vbd8D5AAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiGoSEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDyFBu95/avQHhgNoTvgAAAA==[0m[Pipeline] }
[8mha:////4NMYSizRLQ1dZuwWSEHzgQ6w9lPsBbHRCtMg5H1rEwslAAAApR+LCAAAAAAAAP9tjTEOwjAQBC9BFLSUPOIiCgqEqNJabniBiY1xYt0Z2yGpeBFf4w8EIlGxxWpnm3m+YJkiHDlabA11jlLjMPjeTgsHjt3F84Atn7FhSuwNSjNI1qaeUXI2MKcoYSFgZajxnBzZDGvRqruqvCJbnXKcvoOA0ukbPKAQkzmrmL8wRthce52Yfp6/AhhDyFBu95/avQH+Ao9BvgAAAA==[0m[Pipeline] // stage
[8mha:////4DKXsabp5/afXFSsWLUBDHMQEXD3jgAzV8WEfOF26pEaAAAAox+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMJBiA5R0VppeIFJjHFi3QX7QlLxIr7GH4iIRMVWO9PM641lijhydKqx1HpKlVdd6N301MCxvQYeVMMXVTElDlaVdii5tqcZSxaLeVmOhcbKUhU4eXKCtW7MwxTBkCvOEid30Mh9fccTmZ7KYqJ8YYzY3Po6Mf06fwMYu06Q77aCbP8BK1nRVL0AAAA=[0m[Pipeline] }
[8mha:////4HmorPDDfMRqsF6zz9/2vCOvXnWMSW4cx9qE6GTxL9MFAAAAoh+LCAAAAAAAAP9tjTEOwjAQBDdBFLSUPMIRUCIqWisNLzCJMU6su2BfSCpexNf4AxGRqNhqZ5p5vbFMEUeOTjWWWk+p8qoLvZueGji218CDaviiKqbEwarSDiXX9jRjyWIxL8ux0FhZqgInT06w1o15mCIYcsVZ4uQOGrmv73gi01NZTJQvjBGbW18npl/nbwBj1wny3VaQ7T845dX3vQAAAA==[0m[Pipeline] // node
[8mha:////4BE+fprF9eommgtvg+AAT8POwnI+05QgEWtQ8SEssetUAAAAoh+LCAAAAAAAAP9tjbEOgjAURS8YB1dHP6IkrMbJtWHxCyrUWmjeg/YhTH6Rv+Y/SCRx8k73nOW83timiBNHp1pLnadUe9WH0S1PTRy7W+BJtXxVNVPiYFVlp4obe16xYrFYl+XYaOws1YGTJyfY69Y8TBEMueIicXFHjdw3A57I9FIWE+ULc8ThPjaJ6df5G8Dc94K8LAVZ+QF+r3LHvQAAAA==[0m[Pipeline] End of Pipeline
ERROR: script returned exit code 1
Finished: FAILURE
